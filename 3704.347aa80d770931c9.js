"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[3704],{93704:(st,Z,r)=>{r.r(Z),r.d(Z,{PublicModule:()=>rt});var _=r(35357),F=r(2596),D=r(6826),Q=r(76863),T=r(17460),s=r(93075),h=r(77579),g=r(82722),N=r(22594),v=r(2491),S=r(61896),J=r(17489),U=r(74062),Y=r(20755),P=r(33005),u=r(41777),e=r(5e3),q=r(71683),E=r(12454),I=r(85094),p=r(69808),k=r(90508),C=r(47423),f=r(80288),j=r(25245),x=r(67322),B=r(98833),O=r(74107),m=r(88279);let H=(()=>{class t{constructor(o,n){this.elementRef=o,this.renderer=n,this.parallaxRatio=1,this.initialTop=0,this.initialTop=o.nativeElement.getBoundingClientRect().top}onWindowScroll(o){this.elementRef.nativeElement.style.top=this.initialTop-window.scrollY*this.parallaxRatio+"px",this.elementRef.nativeElement.style.transform="scale(1,1)"}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(e.SBq),e.Y36(e.Qsj))},t.\u0275dir=e.lG2({type:t,selectors:[["","appParallax2",""]],hostBindings:function(o,n){1&o&&e.NdJ("scroll",function(c){return n.onWindowScroll(c)},!1,e.Jf7)},inputs:{parallaxRatio:"parallaxRatio"}}),t})();function G(t,i){1&t&&e.GkF(0)}function $(t,i){if(1&t&&(e.TgZ(0,"div",25),e.YNc(1,G,1,0,"ng-container",26),e.qZA()),2&t){e.oxw();const o=e.MAs(36);e.xp6(1),e.Q6J("ngTemplateOutlet",o)}}function M(t,i){1&t&&e.GkF(0)}function L(t,i){if(1&t&&(e.TgZ(0,"div",27),e.YNc(1,M,1,0,"ng-container",26),e.qZA()),2&t){e.oxw();const o=e.MAs(38);e.xp6(1),e.Q6J("ngTemplateOutlet",o)}}function z(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre es obligatorio. "),e.qZA())}function W(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado debe contener entre 3 y 255 caracteres. "),e.qZA())}function K(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del empleado no debe contener n\xfameros. "),e.qZA())}function V(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos son obligatorio. "),e.qZA())}function X(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos deben contener entre 6 y 255 caracteres. "),e.qZA())}function ee(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Los apellidos no deben contener n\xfameros. "),e.qZA())}function te(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger la personalidad. "),e.qZA())}function oe(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos no posee un formato v\xe1lido. "),e.qZA())}function ne(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," El correos electr\xf3nicos es obligatorio. "),e.qZA())}function ie(t,i){if(1&t&&(e.TgZ(0,"mat-option",57)(1,"span"),e._uU(2),e.qZA()()),2&t){const o=i.$implicit;e.Q6J("value",o),e.xp6(2),e.Oqu(o.name)}}function re(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Debe escoger un producto o servicio "),e.qZA())}function ae(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad de obligatoria "),e.qZA())}function se(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," La cantidad debe ser mayor que 0 "),e.qZA())}function ce(t,i){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," la cantidad solo debe contener n\xfameros "),e.qZA())}function le(t,i){if(1&t&&(e.TgZ(0,"th",70),e._uU(1),e.qZA()),2&t){const o=e.oxw(2).$implicit,n=e.oxw(4);e.xp6(1),e.hij(" ",n.getFieldsTableHeaderNames(o)," ")}}function me(t,i){if(1&t&&(e.TgZ(0,"td",71),e._uU(1),e.qZA()),2&t){const o=i.$implicit,n=e.oxw(2).$implicit;e.xp6(1),e.hij("",o[n]," ")}}function de(t,i){1&t&&(e.TgZ(0,"td",72),e._uU(1,"Total de la solicitud "),e.qZA())}function ue(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,le,2,1,"th",68),e.YNc(2,me,2,1,"td",62),e.YNc(3,de,2,0,"td",69),e.qZA())}function pe(t,i){if(1&t&&(e.TgZ(0,"th",76),e._uU(1),e.qZA()),2&t){const o=e.oxw(2).$implicit,n=e.oxw(4);e.xp6(1),e.hij(" ",n.getFieldsTableHeaderNames(o)," ")}}function _e(t,i){if(1&t&&(e.TgZ(0,"td",77),e._uU(1),e.qZA()),2&t){const o=i.$implicit,n=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",o[n]," ")}}function ge(t,i){1&t&&e._UZ(0,"td",78)}function fe(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,pe,2,1,"th",73),e.YNc(2,_e,2,1,"td",74),e.YNc(3,ge,1,0,"td",75),e.qZA())}function xe(t,i){1&t&&(e.TgZ(0,"th",81),e._uU(1," Acciones "),e.qZA())}function he(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"td",77)(1,"div",82)(2,"button",83),e.NdJ("click",function(a){const l=e.CHM(o).$implicit,d=e.oxw(6);return d.expandedElement=d.expandedElement&&d.expandedElement.goodsId===l.goodsId?null:l,a.stopPropagation(),e.KtG(d.setSelectedProductServiceDetail(l.goodsId))}),e._UZ(3,"mat-icon",84),e.qZA(),e.TgZ(4,"button",83),e.NdJ("click",function(){const c=e.CHM(o).$implicit,l=e.oxw(6);return e.KtG(l.removeGoodsField(c.goodsId))}),e._UZ(5,"mat-icon",84),e.qZA()()()}if(2&t){const o=i.$implicit,n=e.oxw(6);e.xp6(3),e.Q6J("svgIcon",n.expandedElement&&n.expandedElement.goodsId===o.goodsId?"heroicons_solid:chevron-up":"heroicons_solid:chevron-down"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}const ve=function(){return["CUP "]};function qe(t,i){if(1&t&&(e.TgZ(0,"td",85),e._uU(1),e.ALo(2,"currency"),e.qZA()),2&t){const o=e.oxw(6);e.xp6(1),e.hij(" ",e.xi3(2,1,o.getTotalQuantity(),e.DdM(4,ve))," ")}}function Ie(t,i){1&t&&(e.TgZ(0,"div"),e.YNc(1,xe,2,0,"th",79),e.YNc(2,he,6,2,"td",74),e.YNc(3,qe,3,5,"td",80),e.qZA())}function Ce(t,i){if(1&t&&(e.ynx(0,67),e.YNc(1,ue,4,0,"div",37),e.YNc(2,fe,4,0,"div",37),e.YNc(3,Ie,4,0,"div",37),e.BQk()),2&t){const o=i.$implicit;e.s9C("matColumnDef",o),e.xp6(1),e.Q6J("ngIf","name"===o),e.xp6(1),e.Q6J("ngIf","expand"!==o&&"name"!==o),e.xp6(1),e.Q6J("ngIf","expand"===o)}}function Ze(t,i){if(1&t&&e._UZ(0,"img",93),2&t){const o=e.oxw(6);e.Q6J("alt","No tiene conexi\xf3n o esta imagen no existe")("src",o.selectedProductServiceDetail.images[0],e.LSH)}}function Te(t,i){1&t&&(e.TgZ(0,"div",94),e._uU(1," SIN IMAGEN "),e.qZA())}function be(t,i){if(1&t&&(e.TgZ(0,"div",87)(1,"div",88)(2,"div",89),e.YNc(3,Ze,1,2,"img",90),e.YNc(4,Te,2,0,"div",91),e.qZA()(),e.TgZ(5,"span",92),e._uU(6),e.qZA()()),2&t){const o=e.oxw().$implicit,n=e.oxw(4);e.Q6J("@detailExpand",n.expandedElement&&o.goodsId===n.expandedElement.goodsId?"expanded":"collapsed"),e.xp6(3),e.Q6J("ngIf",n.selectedProductServiceDetail.images&&n.selectedProductServiceDetail.images[0]),e.xp6(1),e.Q6J("ngIf",!n.selectedProductServiceDetail.images||0===n.selectedProductServiceDetail.images.length),e.xp6(2),e.Oqu(n.selectedProductServiceDetail.description)}}function Re(t,i){if(1&t&&(e.TgZ(0,"td",71),e.YNc(1,be,7,4,"div",86),e.qZA()),2&t){const o=e.oxw(4);e.uIk("colspan",o.columnsToDisplayWithExpand.length),e.xp6(1),e.Q6J("ngIf",o.selectedProductServiceDetail)}}function Ae(t,i){1&t&&e._UZ(0,"tr",95)}function ye(t,i){if(1&t&&e._UZ(0,"tr",96),2&t){const o=i.$implicit,n=e.oxw(4);e.ekj("example-expanded-row",n.expandedElement===o)}}function we(t,i){1&t&&e._UZ(0,"tr",97)}function Fe(t,i){1&t&&e._UZ(0,"tr",98)}const De=function(){return["expandedDetail"]};function Qe(t,i){if(1&t&&(e.ynx(0),e.TgZ(1,"div",58)(2,"table",59),e.YNc(3,Ce,4,4,"ng-container",60),e.ynx(4,61),e.YNc(5,Re,2,2,"td",62),e.BQk(),e.YNc(6,Ae,1,0,"tr",63),e.YNc(7,ye,1,2,"tr",64),e.YNc(8,we,1,0,"tr",65),e.YNc(9,Fe,1,0,"tr",66),e.qZA()(),e.BQk()),2&t){const o=e.oxw(3);e.xp6(2),e.Q6J("dataSource",o.requestForm.get("goodsData").getRawValue()),e.xp6(1),e.Q6J("ngForOf",o.displayedColumns),e.xp6(3),e.Q6J("matHeaderRowDef",o.columnsToDisplayWithExpand),e.xp6(1),e.Q6J("matRowDefColumns",o.columnsToDisplayWithExpand),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(7,De)),e.xp6(1),e.Q6J("matFooterRowDef",o.displayedColumns)("matFooterRowDefSticky",!0)}}function Ne(t,i){1&t&&(e.TgZ(0,"div",99),e._uU(1," No ha agregado un producto o servicio a\xfan! "),e.qZA())}const b=function(t){return{"cursor-not-allowed":t}};function Se(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"mat-accordion",28)(1,"mat-expansion-panel",29)(2,"mat-expansion-panel-header",30)(3,"mat-panel-title",31)(4,"div",32),e._uU(5," Informaci\xf3n General "),e.qZA()()(),e.TgZ(6,"form",33)(7,"div",34)(8,"mat-form-field",35)(9,"mat-label"),e._uU(10,"Nombre"),e.qZA(),e._UZ(11,"input",36),e.YNc(12,z,2,0,"mat-error",37),e.YNc(13,W,2,0,"mat-error",37),e.YNc(14,K,2,0,"mat-error",37),e.qZA()(),e.TgZ(15,"div",34)(16,"mat-form-field",35)(17,"mat-label"),e._uU(18,"Apellidos"),e.qZA(),e._UZ(19,"input",38),e.YNc(20,V,2,0,"mat-error",37),e.YNc(21,X,2,0,"mat-error",37),e.YNc(22,ee,2,0,"mat-error",37),e.qZA()(),e.TgZ(23,"div",34)(24,"mat-form-field",35)(25,"mat-label"),e._uU(26,"Personalidad"),e.qZA(),e.TgZ(27,"mat-select",39)(28,"mat-option",40),e._uU(29,"Natural"),e.qZA(),e.TgZ(30,"mat-option",41),e._uU(31,"Jur\xeddico"),e.qZA()(),e.YNc(32,te,2,0,"mat-error",37),e.qZA()(),e.TgZ(33,"div",34)(34,"mat-form-field",35)(35,"mat-label"),e._uU(36,"Correos Electr\xf3nicos"),e.qZA(),e._UZ(37,"mat-icon",42)(38,"input",43),e.YNc(39,oe,2,0,"mat-error",37),e.YNc(40,ne,2,0,"mat-error",37),e.qZA()()()(),e.TgZ(41,"mat-expansion-panel",29)(42,"mat-expansion-panel-header",30)(43,"mat-panel-title",31)(44,"div",32),e._uU(45," Selecci\xf3n de Productos y Servicios "),e.qZA()()(),e.TgZ(46,"form",44)(47,"div",34)(48,"mat-form-field",35)(49,"mat-label"),e._uU(50,"Productos y servicios"),e.qZA(),e.TgZ(51,"mat-select",45),e.YNc(52,ie,3,2,"mat-option",46),e.qZA(),e.YNc(53,re,2,0,"mat-error",37),e.qZA()(),e.TgZ(54,"div",47)(55,"mat-form-field",35)(56,"mat-label"),e._uU(57,"Cantidad"),e.qZA(),e._UZ(58,"input",48),e.YNc(59,ae,2,0,"mat-error",37),e.YNc(60,se,2,0,"mat-error",37),e.YNc(61,ce,2,0,"mat-error",37),e.qZA()(),e.TgZ(62,"div",49)(63,"button",50),e.NdJ("click",function(){e.CHM(o);const a=e.oxw(2);return e.KtG(a.addGoodsField())}),e._UZ(64,"mat-icon",51),e.TgZ(65,"span",52),e._uU(66,"Agregar"),e.qZA()()(),e.YNc(67,Qe,10,8,"ng-container",53),e.YNc(68,Ne,2,0,"ng-template",null,54,e.W1O),e.qZA()()(),e.TgZ(70,"div",55)(71,"button",56),e.NdJ("click",function(){e.CHM(o);const a=e.oxw(2);return e.KtG(a.createRequest())}),e._UZ(72,"mat-icon",51),e.TgZ(73,"span",52),e._uU(74,"Enviar"),e.qZA()()()}if(2&t){const o=e.MAs(69),n=e.oxw(2);e.xp6(1),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(4),e.Q6J("formGroup",n.requestForm)("autocomplete","off"),e.xp6(5),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre"),e.xp6(1),e.Q6J("ngIf",n.requestForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.requestForm.get("name").hasError("maxlength")||n.requestForm.get("name").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.requestForm.get("name").hasError("pattern")),e.xp6(5),e.Q6J("type","text")("formControlName","lastname")("minlength",3)("maxlength",255),e.xp6(1),e.Q6J("ngIf",n.requestForm.get("lastname").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.requestForm.get("lastname").hasError("maxlength")||n.requestForm.get("lastname").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",n.requestForm.get("lastname").hasError("pattern")),e.xp6(5),e.Q6J("formControlName","personality"),e.xp6(5),e.Q6J("ngIf",n.requestForm.get("personality").hasError("required")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:mail"),e.xp6(1),e.Q6J("formControl",n.requestForm.get("email"))("spellcheck",!1),e.xp6(1),e.Q6J("ngIf",n.requestForm.get("email").hasError("email")),e.xp6(1),e.Q6J("ngIf",n.requestForm.get("email").hasError("required")),e.xp6(1),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(4),e.Q6J("formGroup",n.goodsAmountTempForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","goods"),e.xp6(1),e.Q6J("ngForOf",n.productServices),e.xp6(1),e.Q6J("ngIf",n.goodsAmountTempForm.get("goods").hasError("required")),e.xp6(5),e.Q6J("formControlName","amount")("min",3),e.xp6(1),e.Q6J("ngIf",n.goodsAmountTempForm.get("amount").hasError("required")),e.xp6(1),e.Q6J("ngIf",n.goodsAmountTempForm.get("amount").hasError("min")),e.xp6(1),e.Q6J("ngIf",n.goodsAmountTempForm.get("amount").hasError("pattern")),e.xp6(2),e.Q6J("disabled",n.goodsAmountTempForm.invalid)("ngClass",e.VKq(46,b,n.goodsAmountTempForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(3),e.Q6J("ngIf",n.requestForm.get("goodsData").getRawValue().length>0)("ngIfElse",o),e.xp6(4),e.Q6J("disabled",n.requestForm.invalid||0===n.requestForm.get("goodsData").getRawValue().length)("ngClass",e.VKq(48,b,n.requestForm.invalid||0===n.requestForm.get("goodsData").getRawValue().length)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:paper-airplane")}}function Je(t,i){1&t&&(e.TgZ(0,"div",100),e._uU(1," Cat\xe1logo de productos y servicios "),e.qZA())}const R=function(t,i){return{"font-medium":t,"text-secondary":i}};function Ue(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._UZ(3,"img",4),e.qZA(),e.TgZ(4,"div",5)(5,"div",6)(6,"div",7),e._UZ(7,"img",8),e.qZA(),e.TgZ(8,"div",9)(9,"div",10),e._uU(10),e.qZA(),e.TgZ(11,"div",11),e._uU(12),e.qZA()(),e._UZ(13,"div",12),e.TgZ(14,"div",13)(15,"div",14)(16,"span",15),e._uU(17),e.qZA(),e.TgZ(18,"span",16),e._uU(19),e.qZA()(),e.TgZ(20,"div",14)(21,"span",15),e._uU(22),e.qZA(),e.TgZ(23,"span",16),e._uU(24),e.qZA()()(),e.TgZ(25,"div",17)(26,"a",18),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.selectedPage="catalogue")}),e._uU(27," Cat\xe1logo "),e.qZA(),e.TgZ(28,"a",18),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.selectedPage="request")}),e._uU(29," Solicitud "),e.qZA()()()()(),e.TgZ(30,"div",19)(31,"div",20),e.GkF(32),e.YNc(33,$,2,1,"div",21),e.YNc(34,L,2,1,"div",22),e.qZA()(),e.YNc(35,Se,75,50,"ng-template",null,23,e.W1O),e.YNc(37,Je,2,0,"ng-template",null,24,e.W1O),e.qZA()}if(2&t){const o=e.oxw();e.xp6(3),e.Q6J("parallaxRatio",.5)("src",o.merchant.coverUrl?o.merchant.coverUrl:"assets/images/auth/signup.jpg",e.LSH),e.xp6(4),e.Q6J("src",o.merchant.logoUrl,e.LSH),e.xp6(3),e.Oqu(o.merchant.name),e.xp6(2),e.AsE("",o.merchant.state,", ",o.merchant.city,""),e.xp6(5),e.Oqu(o.pCount),e.xp6(2),e.Oqu(1===o.pCount?"Producto":"Productos"),e.xp6(3),e.Oqu(o.sCount),e.xp6(2),e.Oqu(1===o.sCount?"Servicio":"Servicios"),e.xp6(2),e.Q6J("ngClass",e.WLB(14,R,"catalogue"===o.selectedPage,"catalogue"!==o.selectedPage)),e.xp6(2),e.Q6J("ngClass",e.WLB(17,R,"request"===o.selectedPage,"request"!==o.selectedPage)),e.xp6(5),e.Q6J("ngIf","request"===o.selectedPage),e.xp6(1),e.Q6J("ngIf","catalogue"===o.selectedPage)}}let Ye=(()=>{class t{constructor(o,n,a,c,l,d,at){this._activatedRoute=o,this._changeDetectorRef=n,this._router=a,this._formBuilder=c,this._fuseConfirmationService=l,this._requestsService=d,this.store=at,this.productServices=[],this.productServicesStatic=[],this.pCount=0,this.sCount=0,this.selectedPage="catalogue",this.selectedProductServiceDetail=null,this.displayedColumns=["name","type","uom","amount","price","quantity","expand"],this.columnsToDisplayWithExpand=[...this.displayedColumns],this._unsubscribeAll=new h.x}ngOnInit(){this.store.select(N.Qs).pipe((0,g.R)(this._unsubscribeAll)).subscribe(o=>{o||this._router.navigate(["../"]),this.merchant=o}),this.productServices$=this.store.select(P.ZQ),this.productServices$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(o=>{this.productServices=(0,J.cloneDeep)(o),this.productServicesStatic=o,this.pCount=o.filter(n=>"Producto"===n.type).length,this.sCount=o.filter(n=>"Servicio"===n.type).length,this._changeDetectorRef.markForCheck()}),this.requestForm=this._formBuilder.group({merchantId:[this.merchant.id,[s.kI.required]],name:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(255),v.L.onlyAlphabetsWithAccentPattern()]],lastname:["",[s.kI.required,s.kI.minLength(6),s.kI.maxLength(255),v.L.onlyAlphabetsWithAccentPattern()]],email:["",[s.kI.required,s.kI.email]],personality:["",[s.kI.required]],status:[S.eJ.Nueva,[s.kI.required]],goodsData:this._formBuilder.array([]),slug:[""]}),this.goodsAmountTempForm=this._formBuilder.group({_id:[""],goods:[null,[s.kI.required]],amount:[0,[s.kI.required,s.kI.min(1),v.L.onlyNumbersPattern()]]})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete(),this.store.dispatch((0,Y.AD)())}addGoodsField(){const o=this.goodsAmountTempForm.getRawValue(),n=this._formBuilder.group({goodsId:[o.goods._id],name:[o.goods.name],type:[o.goods.type],amount:[+o.amount,[s.kI.required]],price:[o.goods.price,[s.kI.required]],quantity:[o.goods.price*o.amount,[s.kI.required]],uom:[o.goods.uomId.name],description:[o.goods.description]});this.requestForm.get("goodsData").push(n);const a=this.productServices.findIndex(c=>c._id===o.goods._id);this.productServices.splice(a,1),this.goodsAmountTempForm.reset(),this._changeDetectorRef.markForCheck()}removeGoodsField(o){const n=this.requestForm.get("goodsData").getRawValue().findIndex(l=>l.goodsId===o),a=this.productServicesStatic.find(l=>l._id===o);this.requestForm.get("goodsData").removeAt(n),this.productServices.push(Object.assign({},a)),this._changeDetectorRef.markForCheck()}createRequest(){const o=this.requestForm.getRawValue();o.slug=new U.i(o.name).slug,this._fuseConfirmationService.open({title:"Enviar solicitud",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(a=>{"confirmed"===a&&this._requestsService.createRequest(o).subscribe(c=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Su solicitud ha sido enviada. Se le enviar\xe1 un correo con una oferta. \xbfDesea enviar otra solicitud?",icon:{show:!0,name:"heroicons_outline:check",color:"success"},actions:{confirm:{show:!0,label:"si",color:"primary"},cancel:{show:!0,label:"No"}}}).afterClosed().subscribe(d=>{"confirmed"===d?(this.requestForm.reset(),this.requestForm.get("merchantId").setValue(this.merchant.id),this.requestForm.get("status").setValue("Nueva"),this.requestForm.get("goodsData").clear(),this.productServices=[...this.productServicesStatic],this.setSelectedProductServiceDetail(null)):this._router.navigate(["../../"],{relativeTo:this._activatedRoute}),this._changeDetectorRef.markForCheck()})}),this._changeDetectorRef.markForCheck()})}getTotalQuantity(){return this.requestForm.get("goodsData").getRawValue().map(o=>o.quantity).reduce((o,n)=>o+n,0)}getFieldsTableHeaderNames(o){switch(o){case"name":return"Nombre";case"uom":return"U.M";case"amount":return"Cantidad";case"price":return"Precio";case"quantity":return"Total unitario";case"type":return"Tipo"}}setSelectedProductServiceDetail(o){this.selectedProductServiceDetail=this.productServicesStatic.find(n=>n._id===o)}trackByFn(o,n){return n.id||o}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(_.gz),e.Y36(e.sBO),e.Y36(_.F0),e.Y36(s.qu),e.Y36(q.R),e.Y36(E.r),e.Y36(I.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["incoming-request"]],decls:1,vars:1,consts:[["class","flex flex-col flex-auto min-w-0",4,"ngIf"],[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col"],[1,"h-40","bg-accent-200","lg:h-80","dark:bg-accent-700"],["appParallax2","","alt","No tiene conexi\xf3n o esta imagen no existe",1,"fixed","z-0","object-fill","h-40","lg:h-80",3,"parallaxRatio","src"],[1,"z-20","bg-white","shadow"],[1,"flex","flex-col","items-center","w-full","max-w-5xl","px-8","mx-auto","flex-0","lg:flex-row","lg:h-18","bg-card"],[1,"rounded-md","-mt-26","lg:-mt-22","bg-accent-100","dark:bg-accent-700"],["alt","No tiene conexi\xf3n o esta imagen no existe",1,"w-32","h-32","rounded-md","ring-4","ring-bg-card",3,"src"],[1,"flex","flex-col","items-center","mt-4","lg:items-start","lg:mt-0","lg:ml-8"],[1,"text-lg","font-bold","leading-none"],[1,"text-secondary"],[1,"hidden","h-8","mx-8","border-l-2","lg:flex"],[1,"items-center","hidden","mt-6","space-x-6","lg:flex","lg:mt-0"],[1,"flex","flex-col","items-center"],[1,"font-bold"],[1,"text-sm","font-medium","text-secondary"],[1,"flex","items-center","mt-8","mb-4","space-x-6","lg:m-0","lg:ml-auto"],[1,"cursor-pointer",3,"ngClass","click"],[1,"z-10","w-full","light"],[1,"flex","justify-center","flex-auto","w-full","pt-4","pb-6","mx-auto","sm:p-8"],["class","w-[92%] sm:w-[90%] flex flex-col items-start",4,"ngIf"],["class","w-[90%] flex flex-col items-start",4,"ngIf"],["requestContent",""],["catalogueContent",""],[1,"w-[92%]","sm:w-[90%]","flex","flex-col","items-start"],[4,"ngTemplateOutlet"],[1,"w-[90%]","flex","flex-col","items-start"],["multi","",1,"w-full","bg-transparent"],[2,"--tw-shadow","0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1) !important",3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-bold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","pt-8","pb-8","pl-4","pr-4","border-t-2","sm:grid-cols-4","gap-y-3","gap-x-6",3,"formGroup","autocomplete"],[1,"sm:col-span-2"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[4,"ngIf"],["matInput","","required","",3,"type","formControlName","minlength","maxlength"],["id","mat-select","required","",3,"formControlName"],["value","Natural"],["value","Jur\xeddico"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","required","",3,"formControl","spellcheck"],[1,"grid","w-full","pt-8","pb-12","pl-4","pr-4","border-t-2","sm:grid-cols-4","gap-y-3","gap-x-6",3,"formGroup","autocomplete"],["required","",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[1,"sm:col-span-2","md:col-span-1"],["type","number","matInput","","required","",3,"formControlName","min"],[1,"flex","self-center","justify-center","mt-2","sm:justify-start","sm:col-span-2","md:col-span-1"],["mat-stroked-button","",1,"lg:ml-4",3,"disabled","ngClass","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[4,"ngIf","ngIfElse"],["noSelectedPS",""],[1,"flex","justify-start","w-full","mt-10","mb-2","text-right","sm:justify-end"],["mat-raised-button","",1,"ml-4","mr-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","ngClass","click"],[3,"value"],["tabindex","0",1,"mt-6","overflow-auto","rounded-md","sm:col-span-4","elevation-shadow","max-h-80"],["mat-table","","multiTemplateDataRows","",1,"w-full",3,"dataSource"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["mat-footer-row","","class","font-medium font-bold",4,"matFooterRowDef","matFooterRowDefSticky"],[3,"matColumnDef"],["mat-header-cell","","class","w-10 pr-8 md:w-auto md:pr-0",4,"matHeaderCellDef"],["mat-footer-cell","","class","truncate",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pr-8","md:w-auto","md:pr-0"],["mat-cell",""],["mat-footer-cell","",1,"truncate"],["mat-header-cell","","class","w-10 pl-8 pr-8 text-center md:w-auto md:pr-0 md:pl-0",4,"matHeaderCellDef"],["mat-cell","","class","text-center",4,"matCellDef"],["mat-footer-cell","","class","text-center",4,"matFooterCellDef"],["mat-header-cell","",1,"w-10","pl-8","pr-8","text-center","md:w-auto","md:pr-0","md:pl-0"],["mat-cell","",1,"text-center"],["mat-footer-cell","",1,"text-center"],["mat-header-cell","","class","pl-8 pr-8 text-center md:pr-6 md:pl-0",4,"matHeaderCellDef"],["mat-footer-cell","","class","text-end",4,"matFooterCellDef"],["mat-header-cell","",1,"pl-8","pr-8","text-center","md:pr-6","md:pl-0"],[1,"flex","justify-center","space-x-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["mat-footer-cell","",1,"text-end"],["class","flex space-x-2 overflow-hidden",4,"ngIf"],[1,"flex","space-x-2","overflow-hidden"],[1,"flex","items-center","m-2"],[1,"relative","flex","items-center","justify-center","w-32","h-32","mr-2","overflow-hidden","border","rounded","flex-0"],[3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"m-4","text-secondary"],[3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],["mat-header-row",""],["mat-row","",1,"example-element-row"],["mat-row","",1,"example-detail-row"],["mat-footer-row","",1,"font-medium","font-bold"],[1,"flex","items-center","justify-center","h-40","pl-8","pr-8","mt-8","overflow-auto","text-2xl","font-semibold","tracking-tight","border-2","border-gray-300","border-dashed","rounded-md","sm:col-span-4","md:text-3xl"],[1,"flex","items-center","justify-center","w-full","pl-8","pr-8","text-2xl","font-semibold","tracking-tight","border-2","border-gray-300","border-dashed","rounded-md","h-140","md:text-4xl","text-secondary"]],template:function(o,n){1&o&&e.YNc(0,Ue,39,20,"div",0),2&o&&e.Q6J("ngIf",n.merchant)},dependencies:[p.mk,p.sg,p.O5,p.tP,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.qQ,s.oH,s.sg,s.u,k.ey,C.lW,f.pp,f.ib,f.yz,f.yK,j.Hw,x.TO,x.KE,x.hX,x.qo,B.Nt,O.gD,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.mD,m.Ke,m.ge,m.ev,m.yh,m.XQ,m.Gk,m.Q2,H,p.H9],styles:["incoming-request table{width:100%}incoming-request tr.example-detail-row{height:0}incoming-request tr.example-element-row:not(.example-expanded-row):hover{background:whitesmoke}incoming-request tr.example-element-row:not(.example-expanded-row):active{background:#efefef}incoming-request .example-element-row td{border-bottom-width:0}incoming-request .elevation-shadow{box-shadow:0 0 3px #0000001a,0 1px 2px -1px #0000001a!important}\n"],encapsulation:2,data:{animation:[(0,u.X$)("detailExpand",[(0,u.SB)("collapsed",(0,u.oB)({height:"0px",minHeight:"0"})),(0,u.SB)("expanded",(0,u.oB)({height:"*"})),(0,u.eR)("expanded <=> collapsed",(0,u.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),t})();var Pe=r(4128),Ee=r(95915),ke=r(42834);const je=[{path:"merchant/:merchantId",component:Ye,resolve:{merchant:(()=>{class t{constructor(o,n,a){this._merchantService=o,this._productServices=n,this._router=a}resolve(o,n){const a=o.params.merchantId;if(a&&"new"!==a)return(0,Pe.D)([this._merchantService.getMerchantById(a),this._productServices.getPublicProductServicesByMerchantId(a)]);this._router.navigate([""])}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(Ee.S),e.LFG(ke.z),e.LFG(_.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}];let Be=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(je),T.m]}),t})();var Oe=r(32567),He=r(59641),Ge=r(32627),$e=r(94290),Me=r(27939),Le=r(29997),A=r(57261),y=r(48966),ze=r(31915);function We(t,i){1&t&&(e.TgZ(0,"div",2)(1,"button",3),e._uU(2," Pagar por Transfermovil "),e.qZA(),e.TgZ(3,"button",4),e._uU(4," Pagar por Enzona "),e.qZA()())}let Ke=(()=>{class t{constructor(o,n,a,c,l,d){this._fuseConfirmationService=o,this._changeDetectorRef=n,this._invoiceService=a,this._snackBar=c,this._dialog=l,this.store=d,this.selectedInvoice$=null,this.selectedInvoice=null,this._unsubscribeAll=new h.x}ngOnInit(){this.selectedInvoice$=this.store.select(Me.xF),this.selectedInvoice$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(o=>{this.selectedInvoice=o,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(q.R),e.Y36(e.sBO),e.Y36(Le.x),e.Y36(A.ux),e.Y36(y.uw),e.Y36(I.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["invoice-public-detail"]],decls:3,vars:1,consts:[[1,"w-full","flex","flex-col"],["class","flex items-center justify-around  md:justify-center  border-t px-8 py-4",4,"ngIf"],[1,"flex","items-center","justify-around","md:justify-center","border-t","px-8","py-4"],["mat-flat-button","",1,"mr-4","bg-green-500","text-white"],["color","primary","mat-flat-button","",1,"ml-4"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"invoice-details"),e.YNc(2,We,5,0,"div",1),e.qZA()),2&o&&(e.xp6(2),e.Q6J("ngIf","UseAthendatPayments"===n.selectedInvoice.quotationId.paymentMethodData.paymentBy))},dependencies:[p.O5,C.lW,ze._],encapsulation:2,changeDetection:0}),t})();var Ve=r(71121),w=r(59784),Xe=r(66861),et=r(67272),tt=r(65453);function ot(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",2)(1,"button",3),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.rejectQuotation())}),e._uU(2," Rechazar "),e.qZA(),e.TgZ(3,"button",4),e.NdJ("click",function(){e.CHM(o);const a=e.oxw();return e.KtG(a.acceptQuotation())}),e._uU(4," Aceptar "),e.qZA()()}}const it=[{path:"request/:requestId",component:Ge.d,resolve:{request:$e.N}},{path:"quotation/:quotationId",component:(()=>{class t{constructor(o,n,a,c,l,d){this._fuseConfirmationService=o,this._changeDetectorRef=n,this._quotationService=a,this._snackBar=c,this._dialog=l,this.store=d,this.selectedQuotation$=null,this.selectedQuotation=null,this._unsubscribeAll=new h.x}ngOnInit(){this.selectedQuotation$=this.store.select(Xe.$i),this.selectedQuotation$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(o=>{this.selectedQuotation=o,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}acceptQuotation(){this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"\xbfEsta seguro que desea aceptar esta oferta?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._quotationService.acceptQuotation(this.selectedQuotation._id).subscribe(a=>{this._snackBar.openFromComponent(w.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}})})})}rejectQuotation(){this._dialog.open(Ve.g,{data:{title:"Rechazar Oferta",message:"\xbfEst\xe1 seguro desea Rechazar esta Oferta ?",rejectedReason:"",rejectedReasonRequired:!1},panelClass:"ath-reject-dialog-panel",maxWidth:"520px"}).afterClosed().pipe((0,g.R)(this._unsubscribeAll)).subscribe(n=>{void 0!==n&&this._quotationService.rejectQuotation(this.selectedQuotation._id,n.reason).subscribe(c=>{this._snackBar.openFromComponent(w.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}})})})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(q.R),e.Y36(e.sBO),e.Y36(et.D),e.Y36(A.ux),e.Y36(y.uw),e.Y36(I.yh))},t.\u0275cmp=e.Xpm({type:t,selectors:[["quotation-public-detail"]],decls:3,vars:1,consts:[[1,"w-full","flex","flex-col"],["class","flex items-center justify-around  md:justify-center  border-t px-8 py-4",4,"ngIf"],[1,"flex","items-center","justify-around","md:justify-center","border-t","px-8","py-4"],["color","warn","mat-stroked-button","",1,"mr-4",3,"click"],["color","primary","mat-flat-button","",1,"ml-4",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"quotation-details"),e.YNc(2,ot,5,0,"div",1),e.qZA()),2&o&&(e.xp6(2),e.Q6J("ngIf","Nueva"===n.selectedQuotation.status))},dependencies:[p.O5,C.lW,tt.i],encapsulation:2,changeDetection:0}),t})(),resolve:{request:He.x}},{path:"invoice/:invoiceId",component:Ke,resolve:{request:Oe.u}}];let rt=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[_.Bz.forChild(it),T.m,F.o,Be,Q.K,D.b]}),t})()}}]);