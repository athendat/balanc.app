"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[1366],{31366:(et,y,i)=>{i.d(y,{B:()=>X});var s=i(93075),p=i(84847),T=i(39646),f=i(77579),A=i(56451),m=i(82722),I=i(78372),x=i(63900),h=i(54004),Q=i(16911),d=i(48966),w=i(89116),t=i(5e3),_=i(71683),v=i(99813),b=i(85094),g=i(69808),k=i(90508),Z=i(47423),u=i(67322),U=i(98833),J=i(74107);function L(o,a){1&o&&(t.TgZ(0,"h2",7),t._uU(1," Agregar Unidad de Medida "),t.qZA())}function D(o,a){1&o&&(t.TgZ(0,"h2",7),t._uU(1," Editar Unidad de Medida "),t.qZA())}function N(o,a){if(1&o&&(t.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),t._uU(6,"Nombre"),t.qZA(),t.TgZ(7,"span",14),t._uU(8),t.qZA()()()()()()),2&o){const e=t.oxw();t.xp6(8),t.Oqu(e.data.uom.name||"Sin nombre")}}function Y(o,a){if(1&o&&(t.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),t._uU(6,"Nombre"),t.qZA(),t._UZ(7,"input",20),t.qZA()(),t.TgZ(8,"div",18)(9,"mat-form-field",19)(10,"mat-label"),t._uU(11,"Sigla"),t.qZA(),t._UZ(12,"input",20),t.qZA()(),t.TgZ(13,"div",18)(14,"mat-form-field",19)(15,"mat-label"),t._uU(16,"Tipo"),t.qZA(),t.TgZ(17,"mat-select",21)(18,"mat-option",22),t._uU(19,"\xc1rea"),t.qZA(),t.TgZ(20,"mat-option",22),t._uU(21,"Conteo"),t.qZA(),t.TgZ(22,"mat-option",22),t._uU(23,"Energ\xeda"),t.qZA(),t.TgZ(24,"mat-option",22),t._uU(25,"Longitud"),t.qZA(),t.TgZ(26,"mat-option",22),t._uU(27,"Peso"),t.qZA(),t.TgZ(28,"mat-option",22),t._uU(29,"Volumen"),t.qZA()()()()()()()),2&o){const e=t.oxw();t.xp6(2),t.Q6J("formGroup",e.uomForm)("autocomplete","off"),t.xp6(5),t.Q6J("formControlName","name")("placeholder","Nombre del Unidad de Medida"),t.xp6(5),t.Q6J("formControlName","abbr")("placeholder","Siglas"),t.xp6(5),t.Q6J("formControlName","type"),t.xp6(1),t.Q6J("value","area"),t.xp6(2),t.Q6J("value","conteo"),t.xp6(2),t.Q6J("value","energ\xeda"),t.xp6(2),t.Q6J("value","longitud"),t.xp6(2),t.Q6J("value","peso"),t.xp6(2),t.Q6J("value","volumen")}}function q(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.updateUom())}),t._uU(2," Actualizar "),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("color","primary")("disabled",e.uomForm.invalid)("matDialogClose","confirmed")}}function F(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",25),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.createUom())}),t._uU(2," Agregar "),t.qZA(),t.BQk()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("color","primary")("disabled",e.uomForm.invalid)("matDialogClose","confirmed")}}function M(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"div",23),t.ynx(2),t.TgZ(3,"button",24),t._uU(4," Cancelar "),t.qZA(),t.BQk(),t.YNc(5,q,3,3,"ng-container",6),t.YNc(6,F,3,3,"ng-container",6),t.qZA(),t.BQk()),2&o){const e=t.oxw();t.xp6(3),t.Q6J("matDialogClose","cancelled"),t.xp6(2),t.Q6J("ngIf","edit"===e.data.dialogMode),t.xp6(1),t.Q6J("ngIf","add"===e.data.dialogMode)}}let S=(()=>{class o{constructor(e,n,r,l,c,P,tt){this.data=e,this._changeDetectorRef=n,this._formBuilder=r,this._fuseConfirmationService=l,this._dialogRef=c,this._uomService=P,this.store=tt,this.dialogMode="view",this._unsubscribeAll=new f.x,this.dialogMode=e.dialogMode,this.uom=e.uom}ngOnInit(){this.uomForm=this._formBuilder.group({id:[null],name:[null,[s.kI.required,s.kI.minLength(3),s.kI.maxLength(255)]],abbr:[null,[s.kI.required,s.kI.maxLength(255)]],type:[null,[s.kI.required,s.kI.minLength(3),s.kI.maxLength(255)]]}),"edit"===this.dialogMode&&this.uomForm.patchValue(this.uom)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createUom(){let e=this.uomForm.getRawValue();e=(0,w.Z)(e,["id"]),this._fuseConfirmationService.open({title:"Crear Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._uomService.createUom(e).pipe((0,m.R)(this._unsubscribeAll)).subscribe(l=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:l.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateUom(){const e=this.uomForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Unidad de Medida",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(r=>{"confirmed"===r&&this._uomService.updateUom(e).pipe((0,m.R)(this._unsubscribeAll)).subscribe(l=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:l.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.WI),t.Y36(t.sBO),t.Y36(s.QS),t.Y36(_.R),t.Y36(d.so),t.Y36(v.c),t.Y36(b.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["lists-uom-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","250",3,"formControlName","placeholder"],["required","",3,"formControlName"],[3,"value"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.ynx(1),t.TgZ(2,"div",1),t.YNc(3,L,2,0,"h2",2),t.YNc(4,D,2,0,"h2",2),t.qZA(),t.BQk(),t.TgZ(5,"div",3),t.ynx(6),t.YNc(7,N,9,1,"div",4),t.BQk(),t.ynx(8),t.YNc(9,Y,30,13,"div",5),t.BQk(),t.qZA(),t.YNc(10,M,7,3,"ng-container",6),t.qZA()),2&e&&(t.xp6(3),t.Q6J("ngIf","add"===n.data.dialogMode),t.xp6(1),t.Q6J("ngIf","edit"===n.data.dialogMode),t.xp6(3),t.Q6J("ngIf","view"===n.data.dialogMode),t.xp6(2),t.Q6J("ngIf","edit"===n.data.dialogMode||"add"),t.xp6(1),t.Q6J("ngIf","view"!==n.data.dialogMode))},dependencies:[g.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.nD,s.sg,s.u,k.ey,Z.lW,d.ZT,u.KE,u.hX,U.Nt,J.gD],encapsulation:2}),o})();class B{}var C=i(86087),O=i(86428),R=i(35357),z=i(25245);function E(o,a){1&o&&(t.ynx(0),t._UZ(1,"mat-icon",36),t.BQk()),2&o&&(t.xp6(1),t.Q6J("svgIcon","mat_solid:done"))}function G(o,a){1&o&&(t.ynx(0),t._UZ(1,"mat-icon",37),t.BQk()),2&o&&(t.xp6(1),t.Q6J("svgIcon","mat_solid:close"))}function j(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",29)(2,"div",30),t._uU(3),t.qZA(),t.TgZ(4,"div",31)(5,"div",32),t._uU(6),t.qZA()(),t.TgZ(7,"div",31)(8,"div",32),t._uU(9),t.qZA()(),t.TgZ(10,"div",33),t.YNc(11,E,2,1,"ng-container",19),t.YNc(12,G,2,1,"ng-container",19),t.qZA(),t.TgZ(13,"div")(14,"button",34),t.NdJ("click",function(){const l=t.CHM(e).$implicit,c=t.oxw(4);return t.KtG(c.updateUom(l))}),t._UZ(15,"mat-icon",35),t.qZA()()(),t.BQk()}if(2&o){const e=a.$implicit;t.xp6(3),t.hij(" ",e.name," "),t.xp6(3),t.Oqu(e.abbr),t.xp6(3),t.Oqu(e.type),t.xp6(2),t.Q6J("ngIf",e.active),t.xp6(1),t.Q6J("ngIf",!e.active),t.xp6(3),t.Q6J("svgIcon","mat_solid:edit")}}function H(o,a){if(1&o&&(t.ynx(0),t.YNc(1,j,16,6,"ng-container",28),t.BQk()),2&o){const e=a.ngIf,n=t.oxw(3);t.xp6(1),t.Q6J("ngForOf",e)("ngForTrackBy",n.trackByFn)}}const W=function(){return[5,10,25,100]};function $(o,a){if(1&o&&(t.ynx(0),t.TgZ(1,"div",22)(2,"div",23)(3,"div",24),t._uU(4,"Nombre"),t.qZA(),t.TgZ(5,"div",25),t._uU(6," Siglas "),t.qZA(),t.TgZ(7,"div",26),t._uU(8," Tipo "),t.qZA(),t.TgZ(9,"div",26),t._uU(10," Activo "),t.qZA(),t.TgZ(11,"div",25),t._uU(12,"Detalles"),t.qZA()(),t.YNc(13,H,2,2,"ng-container",19),t.ALo(14,"async"),t.qZA(),t._UZ(15,"mat-paginator",27),t.BQk()),2&o){const e=t.oxw(2);t.xp6(3),t.Q6J("mat-sort-header","name"),t.xp6(4),t.Q6J("mat-sort-header","value"),t.xp6(2),t.Q6J("mat-sort-header","active"),t.xp6(4),t.Q6J("ngIf",t.lcZ(14,9,e.uoms$)),t.xp6(2),t.Q6J("length",e.pagination.length)("page",e.pagination.page)("pageSize",e.pagination.size)("pageSizeOptions",t.DdM(11,W))("showFirstLastButtons",!0)}}function K(o,a){if(1&o&&(t.ynx(0),t.YNc(1,$,16,12,"ng-container",21),t.BQk()),2&o){const e=a.ngIf;t.oxw();const n=t.MAs(31);t.xp6(1),t.Q6J("ngIf",e.length>0)("ngIfElse",n)}}function V(o,a){1&o&&(t.TgZ(0,"div",38),t._uU(1,"\xa1No se ha creado ninguna unidad de medida!"),t.qZA())}let X=(()=>{class o{constructor(e,n,r,l,c){this._changeDetectorRef=e,this._dialog=n,this._fuseConfirmationService=r,this._uomService=l,this.store=c,this.uoms$=(0,T.of)([]),this.searchInputControl=new s.NI,this.isLoading=!1,this._unsubscribeAll=new f.x}ngOnInit(){this.uoms$=this.store.select(Q.av),this.store.select(O.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{this.pagination=e,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,I.b)(300),(0,x.w)(e=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,e))),(0,h.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,A.T)(this._sort.sortChange,this._paginator.page).pipe((0,x.w)(()=>(this.isLoading=!0,this._uomService.getUoms(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,h.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createUom(){this._openDialog(new B,"add")}updateUom(e){this._openDialog(e,"edit")}trackByFn(e,n){return e||n.id}_openDialog(e,n){this._dialog.open(S,{data:{uom:e,dialogMode:n},panelClass:"ath-dialog-panel"})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(t.sBO),t.Y36(d.uw),t.Y36(_.R),t.Y36(v.c),t.Y36(b.yh))},o.\u0275cmp=t.Xpm({type:o,selectors:[["lists-uom"]],viewQuery:function(e,n){if(1&e&&(t.Gf(C.NW,5),t.Gf(p.YE,5)),2&e){let r;t.iGM(r=t.CRH())&&(n._paginator=r.first),t.iGM(r=t.CRH())&&(n._sort=r.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noUoms",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","uom-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","sm:block"],[1,"hidden","lg:block",3,"mat-sort-header"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","uom-grid","md:px-8"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"hidden","lg:block"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-gray-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),t._uU(6,"Inicio"),t.qZA()(),t.TgZ(7,"div",5),t._UZ(8,"mat-icon",6),t.TgZ(9,"a",7),t._uU(10,"Almac\xe9n"),t.qZA()(),t.TgZ(11,"div",5),t._UZ(12,"mat-icon",6),t.TgZ(13,"a",7),t._uU(14,"Unidades de Medida"),t.qZA()()(),t.TgZ(15,"div",8)(16,"h2",9),t._uU(17," Unidades de Medida "),t.qZA()()(),t.TgZ(18,"div",10)(19,"mat-form-field",11),t._UZ(20,"mat-icon",12)(21,"input",13),t.qZA(),t.TgZ(22,"button",14),t.NdJ("click",function(){return n.createUom()}),t._UZ(23,"mat-icon",15),t.TgZ(24,"span",16),t._uU(25,"Agregar"),t.qZA()()()(),t.TgZ(26,"div",17)(27,"div",18),t.YNc(28,K,2,2,"ng-container",19),t.ALo(29,"async"),t.YNc(30,V,2,0,"ng-template",null,20,t.W1O),t.qZA()()()),2&e&&(t.xp6(8),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(4),t.Q6J("svgIcon","mat_solid:chevron_right"),t.xp6(8),t.Q6J("svgIcon","mat_solid:search"),t.xp6(1),t.Q6J("formControl",n.searchInputControl)("autocomplete","off")("placeholder","Buscar unidades"),t.xp6(2),t.Q6J("svgIcon","mat_solid:add"),t.xp6(5),t.Q6J("ngIf",t.lcZ(29,8,n.uoms$)))},dependencies:[R.yS,g.sg,g.O5,s.Fj,s.JJ,s.oH,Z.lW,z.Hw,u.KE,u.qo,U.Nt,C.NW,p.YE,p.nU,g.Ov],styles:[".uom-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.uom-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.uom-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.uom-grid{grid-template-columns:auto 250px 150px 72px 72px}}\n"],encapsulation:2,changeDetection:0}),o})()}}]);