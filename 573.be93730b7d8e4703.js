"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[573],{86428:(V,F,c)=>{c.d(F,{B:()=>T});const T=(0,c(85094).P1)(s=>s.pagination,s=>s.pagination)},90810:(V,F,c)=>{c.d(F,{Y:()=>T});var f=c(5e3),A=c(63334);let T=(()=>{class s{constructor(g){this._currenciesService=g}resolve(g,Q){return this._currenciesService.getCurrencies()}}return s.\u0275fac=function(g){return new(g||s)(f.LFG(A.t))},s.\u0275prov=f.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})()},99987:(V,F,c)=>{c.d(F,{zd:()=>s});var f=c(85094);const A=h=>h.currencies,s=((0,f.P1)(A,h=>h.currency),(0,f.P1)(A,h=>h.currencies))},63334:(V,F,c)=>{c.d(F,{t:()=>B});var f=c(95698),A=c(63900),T=c(18505),s=c(45840),h=c(60230),g=c(99987),Q=c(59784),x=c(33921);const W=x.Ps`
    mutation CreateCurrency($createCurrencyInput: CreateCurrencyInput!) {
        createCurrency(createCurrencyInput: $createCurrencyInput) {

            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }

        }
    }
`,k=x.Ps`
mutation UpdateCurrency($updateCurrencyInput: UpdateCurrencyInput!) {
    updateCurrency(updateCurrencyInput: $updateCurrencyInput) {
        ok
        message

        currency {
            id
            active
            name
            iso
            symbol
        }
    }
}
`,ie=x.Ps`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateCurrencyStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }
    }
`,H=x.Ps`
mutation RemoveCurrency($removeCurrencyId: String!) {
    removeCurrency(id: $removeCurrencyId) {
        ok,
        message
    }
}
`,e=x.Ps`
    query FindAllCurrencies {
        findAllCurrencies {
            ok
            message

            currencies {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`,U=x.Ps`
    query FindCurrencyById($findCurrencyByIdId: String!) {
        findCurrencyById(id: $findCurrencyByIdId) {
            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`;var L=c(5e3),J=c(57261),p=c(85094);let B=(()=>{class w{constructor(_,v,u){this.apolloProvider=_,this._snackBar=v,this.store=u,this._apollo=this.apolloProvider.use("BALANC")}createCurrency(_){return this.store.select(g.zd).pipe((0,f.q)(1),(0,A.w)(v=>this._apollo.mutate({mutation:W,variables:{createCurrencyInput:_},errorPolicy:"all"}).pipe((0,T.b)(({errors:u,data:m})=>{if(u){let b="";u.forEach(N=>b+=`\n ${N.message}.`),this._snackBar.openFromComponent(Q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:b,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const Z=(0,s.Z)(v);Z.push(m.createCurrency.currency),this.store.dispatch((0,h.HC)({currencies:Z}))}))))}getCurrencies(){return this._apollo.query({query:e,errorPolicy:"all"}).pipe((0,T.b)(({errors:_,data:v})=>{if(_){let u="";_.forEach(m=>u+=`\n ${m.message}.`),this._snackBar.openFromComponent(Q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:u,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,h.HC)({currencies:v.findAllCurrencies.currencies}))}))}getCurrencyById(_){return this._apollo.query({query:U,variables:{findCurrencyByIdId:_},errorPolicy:"all"}).pipe((0,T.b)(({errors:v,data:u})=>{if(v){let m="";v.forEach(Z=>m+=`\n ${Z.message}.`),this._snackBar.openFromComponent(Q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:m,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,h.NW)({currency:u.findCurrencyById.currency}))}))}updateCurrency(_){return this.store.select(g.zd).pipe((0,f.q)(1),(0,A.w)(v=>this._apollo.mutate({mutation:k,variables:{updateCurrencyInput:_},errorPolicy:"all"}).pipe((0,T.b)(({errors:u,data:m})=>{if(u){let N="";u.forEach(ae=>N+=`\n ${ae.message}.`),this._snackBar.openFromComponent(Q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:N,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const Z=(0,s.Z)(v);Z[v.findIndex(N=>N.id===_.id)]=m.updateCurrency.currency,this.store.dispatch((0,h.HC)({currencies:Z}))}))))}updateCurrencyStatus(_){return this.store.select(g.zd).pipe((0,f.q)(1),(0,A.w)(v=>this._apollo.mutate({mutation:ie,variables:{updateEntityStatusInput:_},errorPolicy:"all"}).pipe((0,T.b)(({errors:u})=>{if(u){let b="";u.forEach(N=>b+=`\n ${N.message}.`),this._snackBar.openFromComponent(Q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:b,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const m=(0,s.Z)(v);m[v.findIndex(b=>b.id===_.id)].active=_.active,this.store.dispatch((0,h.HC)({currencies:m}))}))))}removeCurrency(_){return this.store.select(g.zd).pipe((0,f.q)(1),(0,A.w)(v=>this._apollo.mutate({mutation:H,variables:{removeCurrencyId:_},errorPolicy:"all"}).pipe((0,T.b)(({errors:u})=>{if(u){let b="";u.forEach(N=>b+=`\n ${N.message}.`),this._snackBar.openFromComponent(Q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:b,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const m=(0,s.Z)(v),Z=v.findIndex(b=>b.id===_);m.splice(Z,1),this.store.dispatch((0,h.HC)({currencies:m}))}))))}}return w.\u0275fac=function(_){return new(_||w)(L.LFG(x._M),L.LFG(J.ux),L.LFG(p.yh))},w.\u0275prov=L.Yz7({token:w,factory:w.\u0275fac,providedIn:"root"}),w})()},573:(V,F,c)=>{c.r(F),c.d(F,{SettingsModule:()=>Jo});var f=c(35357),A=c(17460),T=c(30712),s=c(93075),h=c(77579),g=c(82722),Q=c(89116),x=c(59784),W=c(43103),k=c(85094);const H=(0,k.P1)(n=>n.mPermissions,n=>n.permissions);var e=c(5e3),U=c(71683),L=c(81972),J=c(57261),p=c(69808),B=c(29071),w=c(90508),q=c(47423),_=c(77446),v=c(80288),u=c(25245),m=c(67322),Z=c(98833),b=c(74107),N=c(32368),ae=c(87238);function ye(n,a){1&n&&(e.TgZ(0,"div",4),e._UZ(1,"mat-icon",6),e.TgZ(2,"a",58),e._uU(3,"Nuevo"),e.qZA()()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-right"))}function Ie(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Nuevo M\xf3dulo"),e.qZA())}function Ae(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Informaci\xf3n de ",t.selectedGModule.name,"")}}const X=function(n){return{"cursor-not-allowed":n}};function ke(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.createGModule())}),e._UZ(1,"mat-icon",60),e.TgZ(2,"span",61),e._uU(3,"Guardar"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.gModuleForm.invalid)("ngClass",e.VKq(3,X,t.gModuleForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateGModule())}),e._UZ(1,"mat-icon",60),e.TgZ(2,"span",61),e._uU(3,"Actualizar"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.gModuleForm.invalid)("ngClass",e.VKq(3,X,t.gModuleForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}function Fe(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del m\xf3dulo es obligatorio. "),e.qZA())}function Qe(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del m\xf3dulo debe contener entre 3 y 255 caracteres. "),e.qZA())}function Ue(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El costo del m\xf3dulo es obligatorio "),e.qZA())}function Je(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El precio del m\xf3dulo debe ser mayor que 0 "),e.qZA())}function we(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El costo del m\xf3dulo es obligatorio "),e.qZA())}function qe(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El precio del m\xf3dulo debe ser mayor que 0 "),e.qZA())}function Pe(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n del m\xf3dulo debe contener al menos 5 caracteres. "),e.qZA())}function De(n,a){1&n&&(e.TgZ(0,"mat-label"),e._uU(1,"Nombre"),e.qZA())}function Ee(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la caracter\xedstica es obligatorio "),e.qZA())}function Se(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la caracter\xedstica debe contener entre 3 y 255 caracteres. "),e.qZA())}function Le(n,a){1&n&&(e.TgZ(0,"mat-label"),e._uU(1,"Descripci\xf3n"),e.qZA())}function Re(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n de la caracter\xedstica debe contener entre 3 y 1000 caracteres. "),e.qZA())}function Ye(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",62)(2,"mat-form-field",63),e.YNc(3,De,2,0,"mat-label",14),e._UZ(4,"input",64),e.YNc(5,Ee,2,0,"mat-error",14),e.YNc(6,Se,2,0,"mat-error",14),e.qZA(),e.TgZ(7,"mat-form-field",65),e.YNc(8,Le,2,0,"mat-label",14),e._UZ(9,"mat-icon",41)(10,"textarea",66),e.YNc(11,Re,2,0,"mat-error",14),e.qZA(),e.ynx(12),e.TgZ(13,"div",67)(14,"button",68),e.NdJ("click",function(){const r=e.CHM(t).index,l=e.oxw();return e.KtG(l.removeFeatureField(r))}),e._UZ(15,"mat-icon",50),e.qZA()(),e.BQk(),e.qZA(),e.BQk()}if(2&n){const t=a.$implicit,o=a.first;e.xp6(3),e.Q6J("ngIf",o),e.xp6(1),e.Q6J("formControl",t.get("name"))("minlength",3)("maxlength",255)("placeholder","Nombre de la caracter\xedstica"),e.xp6(1),e.Q6J("ngIf",t.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.get("name").hasError("maxlength")||t.get("name").hasError("minlength")),e.xp6(2),e.Q6J("ngIf",o),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControl",t.get("description"))("placeholder","Descripci\xf3n de la caracter\xedstica")("minLength",3)("maxLength",1e3),e.xp6(1),e.Q6J("ngIf",t.get("description").hasError("maxlength")||t.get("description").hasError("minlength")),e.xp6(4),e.Q6J("svgIcon","heroicons_solid:trash")}}function Be(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",69)(1,"div",70)(2,"mat-checkbox",71),e.NdJ("change",function(i){const l=e.CHM(t).index,d=e.oxw();return e.KtG(d.markModule(i,l))}),e.qZA(),e.TgZ(3,"span",72),e._uU(4),e.qZA()(),e.TgZ(5,"div",73),e._uU(6),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Q6J("color","primary")("checked",t.checked),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," ")}}function Ge(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.createGModule())}),e._UZ(1,"mat-icon",60),e.TgZ(2,"span",61),e._uU(3,"Guardar"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.gModuleForm.invalid)("ngClass",e.VKq(3,X,t.gModuleForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:save")}}function Oe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"button",59),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.updateGModule())}),e._UZ(1,"mat-icon",60),e.TgZ(2,"span",61),e._uU(3,"Actualizar"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("disabled",t.gModuleForm.invalid)("ngClass",e.VKq(3,X,t.gModuleForm.invalid)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:refresh")}}let $e=(()=>{class n{constructor(t,o,i,r,l,d,C,E){this._router=t,this._activatedRoute=o,this._changeDetectorRef=i,this._formBuilder=r,this._fuseConfirmationService=l,this._gModulesService=d,this._snackBar=C,this.store=E,this.mPermissions=[],this._unsubscribeAll=new h.x}ngOnInit(){this.store.select(H).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.mPermissions=[...t].map(o=>Object.assign(Object.assign({},o),{checked:!1}))}),this.store.select(W.oC).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.selectedGModule=t}),this.gModuleForm=this._formBuilder.group({id:[""],name:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(255)]],active:[!0],cost:[0,[s.kI.required,s.kI.min(0),s.kI.max(999999999),s.kI.maxLength(9)]],uom:["mes",[s.kI.required]],mandatory:[!1],features:this._formBuilder.array([]),description:["",[s.kI.minLength(5),s.kI.maxLength(1e3)]]}),this._activatedRoute.params.pipe((0,g.R)(this._unsubscribeAll)).subscribe(({gModuleId:t})=>{this.windowsMode="new"===t?"new":"edit",this._fillGModuleData(),this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}addFeatureField(){const t=this._formBuilder.group({name:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(255)]],description:["",[s.kI.minLength(5),s.kI.maxLength(1e3)]]});this.gModuleForm.get("features").push(t),this._changeDetectorRef.markForCheck()}removeFeatureField(t){this.gModuleForm.get("features").removeAt(t),this._changeDetectorRef.markForCheck()}createGModule(){let t=this.gModuleForm.getRawValue();t.permissionsId=this.mPermissions.filter(i=>!0===i.checked).map(i=>i.id),t=(0,Q.Z)(t,"id"),this._fuseConfirmationService.open({title:"Crear M\xf3dulo",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._gModulesService.createGModule(t).subscribe(({errors:r})=>{r||(this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"M\xf3dulo creado correctamente",title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigateByUrl("//modules/settings/g-modules"))})})}updateGModule(){const t=this.gModuleForm.getRawValue();t.permissionsId=this.mPermissions.filter(i=>!0===i.checked).map(i=>i.id),this._fuseConfirmationService.open({title:"Actualizar M\xf3dulo",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._gModulesService.updateGModule(t).subscribe(({errors:r})=>{r||(this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"M\xf3dulo actualizado correctamente",title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._router.navigateByUrl("//modules/settings/g-modules"))})})}markModule(t,o){this.mPermissions[o].checked=t.checked,this._changeDetectorRef.markForCheck()}trackByFn(t,o){return o.id||t}_fillGModuleData(){if("edit"===this.windowsMode){this.gModuleForm.patchValue(this.selectedGModule),this.gModuleForm.get("features").clear();const t=[];this.selectedGModule.features.length>0&&this.selectedGModule.features.forEach(i=>{t.push(this._formBuilder.group({name:[i.name,[s.kI.required,s.kI.minLength(3),s.kI.maxLength(255)]],description:[i.description,[s.kI.minLength(5),s.kI.maxLength(1e3)]]}))}),t.forEach(i=>{this.gModuleForm.get("features").push(i)});const o=[...this.selectedGModule.permissions].map(i=>Object.assign(Object.assign({},i),{checked:!0}));this.mPermissions=[...o,...this.mPermissions]}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.F0),e.Y36(f.gz),e.Y36(e.sBO),e.Y36(s.qu),e.Y36(U.R),e.Y36(L.C),e.Y36(J.ux),e.Y36(k.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["g-module-detail"]],decls:119,vars:57,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-col","flex-wrap","p-6","sm:flex-row","flex-0","sm:items-center","sm:justify-between","sm:pt-12","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],["routerLink","/settings/g-modules/",1,"ml-1","text-primary-500","hover:underline"],["class","flex items-center ml-1 whitespace-nowrap",4,"ngIf"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight","sm:text-3xl"],[4,"ngIf"],[1,"flex","items-center","flex-shrink-0","mt-6","sm:mt-0","sm:ml-4"],["class","ml-4 text-white bg-primary-500 hover:bg-primary-700 hover:shadow-lg","mat-raised-button","",3,"disabled","ngClass","click",4,"ngIf"],[1,"flex-auto","p-4","sm:p-6"],[1,"flex","flex-col","flex-auto","min-w-0"],[3,"formGroup","autocomplete"],["multi","",1,"w-full","bg-transparent"],[3,"expanded"],[3,"collapsedHeight"],[1,"flex","items-center"],[1,"text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"grid","w-full","px-4","pt-8","pb-8","border-t-2","sm:grid-cols-3","gap-y-3","gap-x-6"],[1,"flex","flex-col","sm:col-span-1"],[1,"w-full"],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[1,"hidden","w-full","grid-cols-3","md:grid"],[1,"col-span-2"],["matPrefix",""],["matInput","","type","number","min","0","max","999999999","maxlength","9","required","",3,"formControlName"],["matSuffix","","required","",3,"formControlName"],[3,"value"],[1,"flex","flex-col","items-center"],[1,"font-medium"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],[1,"md:hidden"],[1,"sm:col-span-3","md:col-span-2"],[1,"flex-auto","w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",1,"sm:h-26",3,"formControlName","rows","spellcheck","minlength","maxlength"],["desc",""],[1,"text-right"],[1,"mb-2","sm:mb-0","sm:mt-3",3,"color","formControlName"],[1,"flex","flex-col","md:hidden"],[1,"flex","flex-col","w-full","px-4","pt-8","pb-8","space-y-4","border-t-2"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"inline-flex","items-center","px-4","mt-2","-ml-4","rounded","cursor-pointer","group",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"ml-2","font-medium","text-secondary","group-hover:underline"],[1,"flex","flex-col","w-full","px-4","pt-8","pb-8","border-t-2"],[1,"flex","flex-col"],[1,"flex","flex-wrap","w-full","gap-4","sm:grid","sm:grid-cols-3","md:grid-cols-4"],["class","w-full p-3 overflow-hidden border border-dashed rounded-sm sm:w-auto border-primary-700 max-h-30 ",4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-wrap","justify-end","px-6","pb-10","sm:flex-row","flex-0","sm:items-center","sm:px-10","bg-default","dark:bg-transparent"],[1,"flex","items-center","flex-shrink-0","mt-6","text-right","sm:mt-0","sm:ml-4"],[1,"ml-1","text-primary-500"],["mat-raised-button","",1,"ml-4","text-white","bg-primary-500","hover:bg-primary-700","hover:shadow-lg",3,"disabled","ngClass","click"],[3,"svgIcon"],[1,"ml-2","mr-1"],[1,"grid","sm:grid-cols-8","gap-y-3","gap-x-6"],[1,"flex-auto","sm:col-span-2"],["type","text","matInput","","required","",3,"formControl","minlength","maxlength","placeholder"],[1,"flex-auto","w-full","sm:col-span-5","fuse-mat-textarea"],["matInput","","matInput","","matTextareaAutosize","",3,"formControl","placeholder","minLength","maxLength"],[1,"flex","self-end","w-10","mb-2","sm:items-center","sm:pl-2"],["mat-icon-button","","matTooltip","Eliminar",1,"w-8","h-8","min-h-8",3,"click"],[1,"w-full","p-3","overflow-hidden","border","border-dashed","rounded-sm","sm:w-auto","border-primary-700","max-h-30"],[1,"flex","flex-row","h-6"],[3,"color","checked","change"],[1,"font-medium","truncate"],[1,"whitespace-pre-line","text-md","text-hint","line-clamp-3"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"M\xf3dulos de m\xf3dulos"),e.qZA()(),e.YNc(12,ye,4,1,"div",8),e.qZA(),e.TgZ(13,"div",9)(14,"a",10),e._UZ(15,"mat-icon",6),e.TgZ(16,"span",11),e._uU(17,"Regresar"),e.qZA()()()(),e.TgZ(18,"div",12)(19,"div",13),e.YNc(20,Ie,2,0,"span",14),e.YNc(21,Ae,2,1,"span",14),e.qZA()()(),e.TgZ(22,"div",15),e.YNc(23,ke,4,5,"button",16),e.YNc(24,Me,4,5,"button",16),e.qZA()(),e.TgZ(25,"div",17)(26,"div",18)(27,"form",19)(28,"mat-accordion",20)(29,"mat-expansion-panel",21)(30,"mat-expansion-panel-header",22)(31,"mat-panel-title",23)(32,"div",24),e._uU(33," Informaci\xf3n General "),e.qZA()()(),e.TgZ(34,"div",25)(35,"div",26)(36,"mat-form-field",27)(37,"mat-label"),e._uU(38,"Nombre"),e.qZA(),e._UZ(39,"input",28),e.YNc(40,Fe,2,0,"mat-error",14),e.YNc(41,Qe,2,0,"mat-error",14),e.qZA(),e.TgZ(42,"div",29)(43,"mat-form-field",30)(44,"mat-label"),e._uU(45,"Costo"),e.qZA(),e.TgZ(46,"span",31),e._uU(47,"$"),e.qZA(),e._UZ(48,"input",32),e.TgZ(49,"mat-select",33)(50,"mat-select-trigger"),e._uU(51),e.qZA(),e.TgZ(52,"mat-option",34),e._uU(53," Empleado"),e.qZA(),e.TgZ(54,"mat-option",34),e._uU(55," Mes"),e.qZA()(),e.YNc(56,Ue,2,0,"mat-error",14),e.YNc(57,Je,2,0,"mat-error",14),e.qZA(),e.TgZ(58,"div",35)(59,"span",36),e._uU(60,"Estado"),e.qZA(),e.TgZ(61,"mat-slide-toggle",37),e._uU(62),e.qZA()()()(),e.TgZ(63,"mat-form-field",38)(64,"mat-label"),e._uU(65,"Precio"),e.qZA(),e.TgZ(66,"span",31),e._uU(67,"$"),e.qZA(),e._UZ(68,"input",32),e.TgZ(69,"mat-select",33)(70,"mat-select-trigger"),e._uU(71),e.qZA(),e.TgZ(72,"mat-option",34),e._uU(73," Empleado"),e.qZA(),e.TgZ(74,"mat-option",34),e._uU(75," Mes"),e.qZA()(),e.YNc(76,we,2,0,"mat-error",14),e.YNc(77,qe,2,0,"mat-error",14),e.qZA(),e.TgZ(78,"div",39)(79,"mat-form-field",40)(80,"mat-label"),e._uU(81,"Descripci\xf3n del M\xf3dulo"),e.qZA(),e._UZ(82,"mat-icon",41)(83,"textarea",42,43),e.YNc(85,Pe,2,0,"mat-error",14),e.TgZ(86,"mat-hint",44),e._uU(87),e.qZA()()(),e.TgZ(88,"mat-checkbox",45),e._uU(89," Obligatorio"),e.qZA(),e.TgZ(90,"div",46)(91,"span",36),e._uU(92,"Estado"),e.qZA(),e.TgZ(93,"mat-slide-toggle",37),e._uU(94),e.qZA()()()(),e.TgZ(95,"mat-expansion-panel")(96,"mat-expansion-panel-header",22)(97,"mat-panel-title",23)(98,"div",24),e._uU(99," Caracter\xedsticas "),e.qZA()()(),e.TgZ(100,"div",47),e.YNc(101,Ye,16,15,"ng-container",48),e.TgZ(102,"div",49),e.NdJ("click",function(){return o.addFeatureField()}),e._UZ(103,"mat-icon",50),e.TgZ(104,"span",51),e._uU(105,"Agregar caracter\xedstica"),e.qZA()()()(),e.TgZ(106,"mat-expansion-panel")(107,"mat-expansion-panel-header",22)(108,"mat-panel-title",23)(109,"div",24),e._uU(110," Subm\xf3dulos "),e.qZA()()(),e.TgZ(111,"div",52)(112,"div",53)(113,"div",54),e.YNc(114,Be,7,4,"div",55),e.qZA()()()()()()()(),e.TgZ(115,"div",56)(116,"div",57),e.YNc(117,Ge,4,5,"button",16),e.YNc(118,Oe,4,5,"button",16),e.qZA()()()),2&t){const i=e.MAs(84);e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(3),e.Q6J("ngIf","new"===o.windowsMode),e.xp6(2),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(5),e.Q6J("ngIf","new"===o.windowsMode),e.xp6(1),e.Q6J("ngIf","edit"===o.windowsMode&&o.selectedGModule),e.xp6(2),e.Q6J("ngIf","new"===o.windowsMode),e.xp6(1),e.Q6J("ngIf","new"!==o.windowsMode),e.xp6(3),e.Q6J("formGroup",o.gModuleForm)("autocomplete","off"),e.xp6(2),e.Q6J("expanded",!0),e.xp6(1),e.Q6J("collapsedHeight","56px"),e.xp6(9),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del m\xf3dulo"),e.xp6(1),e.Q6J("ngIf",o.gModuleForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.gModuleForm.get("name").hasError("maxlength")||o.gModuleForm.get("name").hasError("minlength")),e.xp6(7),e.Q6J("formControlName","cost"),e.xp6(1),e.Q6J("formControlName","uom"),e.xp6(2),e.hij(" / ",o.gModuleForm.get("uom").value," "),e.xp6(1),e.Q6J("value","empleado"),e.xp6(2),e.Q6J("value","mes"),e.xp6(2),e.Q6J("ngIf",o.gModuleForm.get("cost").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.gModuleForm.get("cost").hasError("min")),e.xp6(4),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===o.gModuleForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(6),e.Q6J("formControlName","cost"),e.xp6(1),e.Q6J("formControlName","uom"),e.xp6(2),e.hij(" / ",o.gModuleForm.get("uom").value," "),e.xp6(1),e.Q6J("value","empleado"),e.xp6(2),e.Q6J("value","mes"),e.xp6(2),e.Q6J("ngIf",o.gModuleForm.get("cost").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.gModuleForm.get("cost").hasError("min")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("minlength",5)("maxlength",1e3),e.xp6(2),e.Q6J("ngIf",o.gModuleForm.get("description").hasError("minlength")),e.xp6(2),e.hij("Total de caracteres ",i.value.length," / 1000"),e.xp6(1),e.Q6J("color","primary")("formControlName","mandatory"),e.xp6(5),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===o.gModuleForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(2),e.Q6J("collapsedHeight","56px"),e.xp6(5),e.Q6J("ngForOf",o.gModuleForm.get("features").controls)("ngForTrackBy",o.trackByFn),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:plus-circle"),e.xp6(4),e.Q6J("collapsedHeight","56px"),e.xp6(7),e.Q6J("ngForOf",o.mPermissions),e.xp6(3),e.Q6J("ngIf","new"===o.windowsMode),e.xp6(1),e.Q6J("ngIf","new"!==o.windowsMode)}},dependencies:[f.yS,p.mk,p.sg,p.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.qQ,s.Fd,s.oH,s.sg,s.u,B.PQ,w.ey,q.lW,_.oG,v.pp,v.ib,v.yz,v.yK,u.Hw,m.TO,m.KE,m.bx,m.hX,m.qo,m.R9,Z.Nt,b.gD,b.$L,N.Rr,ae.gM],encapsulation:2,changeDetection:0}),n})();var G=c(86087),D=c(84847),re=c(86428),O=c(39646),se=c(56451),ee=c(78372),te=c(68675),P=c(63900),M=c(54004),le=c(63844),y=c(48966),he=c(20773);function ze(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",42),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function je(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",43),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function He(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",44),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(),l=r.$implicit,d=r.index,C=e.oxw(4);return e.KtG(C.updateGModuleStatus(i,l,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function Ke(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",45),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}const Ve=function(){return[""]},We=function(n){return[n]};function Xe(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",33)(2,"div",34),e._uU(3),e.qZA(),e.TgZ(4,"div",34),e._uU(5),e.qZA(),e.TgZ(6,"div",35),e._uU(7),e.ALo(8,"currency"),e.qZA(),e.TgZ(9,"div",36),e.YNc(10,ze,2,1,"ng-container",21),e.YNc(11,je,2,1,"ng-container",21),e.qZA(),e.TgZ(12,"div",37),e.YNc(13,He,2,2,"ng-container",21),e.YNc(14,Ke,2,2,"ng-container",21),e.qZA(),e.TgZ(15,"div",38)(16,"button",39),e._UZ(17,"mat-icon",40),e.qZA(),e.TgZ(18,"button",41),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.deleteGModule(r))}),e._UZ(19,"mat-icon",40),e.qZA()()(),e.BQk()}if(2&n){const t=a.$implicit,o=a.index,i=e.oxw(4);e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.AsE(" ",e.xi3(8,11,t.cost,e.DdM(14,Ve))," ","CUP"," "),e.xp6(3),e.Q6J("ngIf",t.mandatory),e.xp6(1),e.Q6J("ngIf",!t.mandatory),e.xp6(2),e.Q6J("ngIf",!(i.isLoading&&i.selectedSlide===o)),e.xp6(1),e.Q6J("ngIf",i.isLoading&&i.selectedSlide===o),e.xp6(2),e.Q6J("routerLink",e.VKq(15,We,t.id)),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function et(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Xe,20,17,"ng-container",32),e.BQk()),2&n){const t=a.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function tt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",25)(2,"div",26)(3,"div",27),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",28),e._uU(6," Descripci\xf3n "),e.qZA(),e.TgZ(7,"div",29),e._uU(8," Costo "),e.qZA(),e.TgZ(9,"div",30)(10,"span"),e._uU(11," Obligatorio"),e.qZA()(),e.TgZ(12,"div",30)(13,"span"),e._uU(14,"Activo"),e.qZA()(),e.TgZ(15,"div",31),e._uU(16," Acciones "),e.qZA()(),e.YNc(17,et,2,2,"ng-container",21),e.ALo(18,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(4),e.Q6J("mat-sort-header","cost"),e.xp6(2),e.Q6J("mat-sort-header","mandatory"),e.xp6(3),e.Q6J("mat-sort-header","active"),e.xp6(5),e.Q6J("ngIf",e.lcZ(18,5,t.modules$))}}function nt(n,a){if(1&n&&(e.ynx(0),e.YNc(1,tt,19,7,"ng-container",24),e.BQk()),2&n){const t=a.ngIf;e.oxw();const o=e.MAs(33);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function ot(n,a){if(1&n&&(e.TgZ(0,"div",46),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.searchInputControl.value?"\xa1No se han encontrado m\xf3dulos!":"\xa1No se ha creado ning\xfan m\xf3dulo a\xfan!","")}}const it=function(n){return{"pointer-events-none":n}},at=function(){return[10,25,50,100]};function rt(n,a){if(1&n&&e._UZ(0,"mat-paginator",47),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,it,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(8,at))("showFirstLastButtons",!0)}}const st=function(){return["new"]};let lt=(()=>{class n{constructor(t,o,i,r,l,d){this._changeDetectorRef=t,this._fuseConfirmationService=o,this._snackBar=i,this.dialog=r,this._moduleService=l,this.store=d,this.searchInputControl=new s.NI(null),this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new h.x}ngOnInit(){this.modules$=this.store.select(W.Fm),this.store.select(re.B).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,g.R)(this._unsubscribeAll),(0,ee.b)(300),(0,te.O)(null),(0,P.w)(t=>null!==t?(this.isLoading=!0,this._moduleService.getGModules(0,10,"name","asc",t)):(0,O.of)()),(0,M.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,g.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,se.T)(this._sort.sortChange,this._paginator.page).pipe((0,P.w)(()=>(this.isLoading=!0,this._moduleService.getGModules(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,M.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}updateGModuleStatus(t,o,i){this.isLoading=!0,this.selectedSlide=i,this._moduleService.updateGModuleStatus({id:o.id,active:t.checked}).pipe((0,g.R)(this._unsubscribeAll)).subscribe(r=>{r&&(this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1),this._changeDetectorRef.markForCheck()})}deleteGModule(t){this._fuseConfirmationService.open({title:"Eliminar m\xf3dulo",message:`\xbfEst\xe1 seguro que desea eliminar el m\xf3dulo ${t.name}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._moduleService.removeGModule(t.id,this.pagination.page,this.pagination.size,"name","desc").pipe((0,g.R)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.paginatedRemoveGModule.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})})}trackByFn(t,o){return o.id||t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(U.R),e.Y36(J.ux),e.Y36(y.uw),e.Y36(L.C),e.Y36(k.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["settings-g-module"]],viewQuery:function(t,o){if(1&t&&(e.Gf(G.NW,5),e.Gf(D.YE,5)),2&t){let i;e.iGM(i=e.CRH())&&(o._paginator=i.first),e.iGM(i=e.CRH())&&(o._sort=i.first)}},decls:36,vars:16,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","flex-wrap","items-center","mt-2","sm:mt-0","shrink-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"routerLink"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-col","flex-auto"],[4,"ngIf"],["noGModules",""],["class","z-10 border-b sm:inset-x-0 sm:bottom-0 sm:border-t sm:border-b-0 bg-gray-50 dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","g-modules-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,""],[1,"flex","justify-end",3,"mat-sort-header"],[1,"flex","items-center","justify-center",3,"mat-sort-header"],[1,"pr-1","text-right"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","g-modules-table","md:px-8"],[1,"truncate"],[1,"mr-4","text-right"],[1,"mr-4","text-center"],[1,"flex","justify-center","mr-4","text-center"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"routerLink"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"M\xf3dulos"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," Gesti\xf3n de m\xf3dulos "),e.qZA()()(),e.TgZ(20,"div",13)(21,"mat-form-field",14),e._UZ(22,"mat-icon",15)(23,"input",16),e.qZA(),e.TgZ(24,"button",17),e._UZ(25,"mat-icon",18),e.TgZ(26,"span",19),e._uU(27,"Nuevo"),e.qZA()()()(),e.TgZ(28,"div",20)(29,"div",20),e.YNc(30,nt,2,2,"ng-container",21),e.ALo(31,"async"),e.YNc(32,ot,2,1,"ng-template",null,22,e.W1O),e.qZA(),e.YNc(34,rt,1,9,"mat-paginator",23),e.ALo(35,"async"),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar m\xf3dulo"),e.xp6(1),e.Q6J("routerLink",e.DdM(15,st)),e.xp6(1),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(31,11,o.modules$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(35,13,o.modules$).length>0))},dependencies:[f.rH,f.yS,p.mk,p.sg,p.O5,s.Fj,s.JJ,s.oH,B.PQ,q.lW,u.Hw,m.KE,m.qo,Z.Nt,G.NW,he.Ou,N.Rr,D.YE,D.nU,p.Ov,p.H9],encapsulation:2,data:{animation:le.L},changeDetection:0}),n})();var ct=c(20449),mt=c(28258),R=c(90149),dt=c(1468),fe=c(91159),gt=c(74800),pt=c(61135),ce=c(95698),ut=c(92340),_t=c(40520);const ne=ut.N.API_URL;let me=(()=>{class n{constructor(t,o){this.store=t,this._httpClient=o,this.dataChange=new pt.X([])}get data$(){return this.dataChange.asObservable()}getRootNavigationNodes(){return this._httpClient.get(`${ne}/navigation/tree`).pipe((0,M.U)(t=>(this.dataChange.next(t.dataArr),t)))}createNavigation(t){return this.data$.pipe((0,ce.q)(1),(0,P.w)(o=>this._httpClient.post(`${ne}/navigation`,t).pipe((0,M.U)(i=>{if(i.data.parentId){for(const r of o)if(this.addChildren(r,i.data))break}else{for(let l=i.data.position;l<o.length;l++)o[l].item.position++;o.push({item:i.data,children:[]}),o.sort((l,d)=>l.item.position-d.item.position)}return this.dataChange.next(o),i}))))}updateNavigation(t){return this.data$.pipe((0,ce.q)(1),(0,P.w)(o=>this._httpClient.patch(`${ne}/navigation/${t.id}`,t).pipe((0,M.U)(i=>(this.updateChildren(o,i.data),this.dataChange.next(o),i)))))}removeNavigation(t){return this.data$.pipe((0,ce.q)(1),(0,P.w)(o=>this._httpClient.delete(`${ne}/navigation/${t}`).pipe((0,M.U)(i=>{let r=!1;for(const l of o)if(this.removeChildrenNode(l,t)){r=!0;break}if(!r)for(let l=0;l<o.length;l++)o[l].item.id===t&&o.splice(l,1);return this.dataChange.next(o),i}))))}addChildren(t,o){if(t.item.id===o.parentId){const i={item:o,children:[]};for(let r=o.position;r<t.children.length;r++)t.children[r].item.position++;return t.children.push(i),t.children.sort((r,l)=>r.item.position-l.item.position),!0}for(const i of t.children)if(this.addChildren(i,o))return!0;return!1}addChildrenNode(t,o){if(t.item.id===o.item.parentId){for(let i=o.item.position;i<t.children.length;i++)t.children[i].item.position++;return t.children.push(o),t.children.sort((i,r)=>i.item.position-r.item.position),!0}for(const i of t.children)if(this.addChildrenNode(i,o))return!0;return!1}updateChildren(t,o){let i=null;for(const l of t)if(i=this.removeChildrenNode(l,o.id),i){i.item=o;break}let r=!1;if(i)for(const l of t)if(this.addChildrenNode(l,i)){r=!0;break}if(!r){for(let l=0;l<t.length;l++)t[l].item.id===o.id&&(i=t[l],i.item=o,t.splice(l,1));if(i)for(const l of t)if(this.addChildrenNode(l,i)){r=!0;break}if(!r){for(let l=o.position;l<t.length;l++)t[l].item.position++;t.push(i),t.sort((l,d)=>l.item.position-d.item.position)}}}removeChildrenNode(t,o){for(let i=0;i<t.children.length;i++){const r=t.children[i];if(r.item.id===o){const d=t.children[i];t.children.splice(i,1);for(let C=0;C<t.children.length;C++)t.children[C].item.position=C;return d}const l=this.removeChildrenNode(r,o);if(l)return l}return null}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(k.yh),e.LFG(_t.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var xe=c(94880),ve=c(91079),oe=c(26688);function ht(n,a){if(1&n&&(e.TgZ(0,"h2",6),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Agregar este elemento a ",t.parentNavigation.title,"")}}function ft(n,a){1&n&&(e.TgZ(0,"h2",6),e._uU(1,"Agregar elemento"),e.qZA())}function xt(n,a){1&n&&(e.TgZ(0,"h2",6),e._uU(1,"Editar elemento"),e.qZA())}const vt=function(n){return{"text-center":n}};function bt(n,a){if(1&n&&(e.TgZ(0,"mat-option",22),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("ngClass",e.VKq(3,vt,"root"===t.id))("value",t.id),e.xp6(1),e.hij(" ",t.title," ")}}function Ct(n,a){1&n&&(e.TgZ(0,"mat-option",20),e._uU(1," Aside "),e.qZA()),2&n&&e.Q6J("value","aside")}function Zt(n,a){1&n&&(e.TgZ(0,"mat-option",20),e._uU(1," Group "),e.qZA()),2&n&&e.Q6J("value","group")}function Nt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el tipo de elemento de navegaci\xf3n. "),e.qZA())}function Tt(n,a){if(1&n&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t+1," ")}}function yt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el orden del elemento de navegaci\xf3n. "),e.qZA())}function It(n,a){if(1&n&&(e.TgZ(0,"mat-form-field",16)(1,"mat-label"),e._uU(2,"Orden"),e.qZA(),e.TgZ(3,"mat-select",23),e.YNc(4,Tt,2,2,"mat-option",24),e.qZA(),e.YNc(5,yt,2,0,"mat-error",5),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("formControlName","position")("placeholder","Orden"),e.xp6(1),e.Q6J("ngForOf",t.positions),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("position").hasError("required"))}}function At(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El t\xedtulo del elemento de navegaci\xf3n es obligatorio. "),e.qZA())}function kt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El t\xedtulo del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.qZA())}function Mt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-form-field",16)(2,"mat-label"),e._uU(3,"T\xedtulo"),e.qZA(),e._UZ(4,"input",25),e.YNc(5,At,2,0,"mat-error",5),e.YNc(6,kt,2,0,"mat-error",5),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("formControlName","title")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("title").hasError("required")),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("title").hasError("maxLength")||t.navigationForm.get("title").hasError("minLength"))}}function Ft(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El subt\xedtulo no debe superar los 255 caracteres. "),e.qZA())}function Qt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-form-field",16)(2,"mat-label"),e._uU(3,"SubT\xedtulo"),e.qZA(),e._UZ(4,"input",26),e.YNc(5,Ft,2,0,"mat-error",5),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("formControlName","subtitle")("placeholder","SubT\xedtulo")("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("title").hasError("maxLength"))}}function Ut(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Tooltip no debe superar los 255 caracteres. "),e.qZA())}function Jt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-form-field",16)(2,"mat-label"),e._uU(3,"Tooltip"),e.qZA(),e._UZ(4,"input",27),e.YNc(5,Ut,2,0,"mat-error",5),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("formControlName","tooltip")("placeholder","Tooltip")("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("tooltip").hasError("maxLength"))}}function wt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El \xcdcono no debe superar los 255 caracteres. "),e.qZA())}function qt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-form-field",16)(2,"mat-label"),e._uU(3,"\xcdcono"),e.qZA(),e._UZ(4,"input",26),e.YNc(5,wt,2,0,"mat-error",5),e.TgZ(6,"mat-hint"),e._uU(7,"Ejemplo: heroicons_solid:information-circle"),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("formControlName","icon")("placeholder","SVG \xcdcono")("maxLength",1e3),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("icon").hasError("maxLength"))}}function Pt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El enlace no debe superar los 1000 caracteres. "),e.qZA())}function Dt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-form-field",16)(2,"mat-label"),e._uU(3,"Enlace"),e.qZA(),e._UZ(4,"input",26),e.YNc(5,Pt,2,0,"mat-error",5),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("formControlName","link")("placeholder","Enlace - ruta")("maxLength",1e3),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("link").hasError("maxLength"))}}function Et(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El enlace no debe superar los 1000 caracteres. "),e.qZA())}function St(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"mat-form-field",16)(2,"mat-label"),e._uU(3,"Enlace 2"),e.qZA(),e._UZ(4,"input",26),e.YNc(5,Et,2,0,"mat-error",5),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("formControlName","link2")("placeholder","Enlace - ruta")("maxLength",1e3),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("link2").hasError("maxLength"))}}function Lt(n,a){1&n&&(e.TgZ(0,"mat-form-field",34)(1,"mat-select",35)(2,"mat-option",20),e._uU(3," Blank "),e.qZA(),e.TgZ(4,"mat-option",20),e._uU(5," Self "),e.qZA(),e.TgZ(6,"mat-option",20),e._uU(7," Parent "),e.qZA(),e.TgZ(8,"mat-option",20),e._uU(9," Top "),e.qZA()()()),2&n&&(e.xp6(1),e.Q6J("formControlName","target")("placeholder","Target"),e.xp6(1),e.Q6J("value","_blank"),e.xp6(2),e.Q6J("value","_self"),e.xp6(2),e.Q6J("value","_parent"),e.xp6(2),e.Q6J("value","_top"))}function Rt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"span",29),e._uU(3),e.qZA(),e.TgZ(4,"div",30),e._UZ(5,"mat-checkbox",31,32),e.YNc(7,Lt,10,6,"mat-form-field",33),e.qZA()(),e.BQk()),2&n){const t=e.MAs(6);e.xp6(3),e.Oqu(t.checked?"Target":"Enlace externo?"),e.xp6(2),e.Q6J("color","primary")("formControlName","externalLink"),e.xp6(2),e.Q6J("ngIf",t.checked)}}function Yt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Las clases del t\xedtulo del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.qZA())}function Bt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Las clases del subt\xedtulo del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.qZA())}function Gt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Las clases del \xedcono del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.qZA())}function Ot(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Las clases del wrapper del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.qZA())}function $t(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"form",39)(2,"mat-form-field",16)(3,"mat-label"),e._uU(4,"T\xedtulo"),e.qZA(),e._UZ(5,"input",40),e.YNc(6,Yt,2,0,"mat-error",5),e.qZA(),e.TgZ(7,"mat-form-field",16)(8,"mat-label"),e._uU(9,"SubT\xedtulo"),e.qZA(),e._UZ(10,"input",40),e.YNc(11,Bt,2,0,"mat-error",5),e.qZA(),e.TgZ(12,"mat-form-field",16)(13,"mat-label"),e._uU(14,"Icono"),e.qZA(),e._UZ(15,"input",40),e.YNc(16,Gt,2,0,"mat-error",5),e.qZA(),e.TgZ(17,"mat-form-field",16)(18,"mat-label"),e._uU(19,"Wrapper"),e.qZA(),e._UZ(20,"input",40),e.YNc(21,Ot,2,0,"mat-error",5),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("formGroupName","classes"),e.xp6(4),e.Q6J("formControlName","title")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("classes").get("title").hasError("maxLength")||t.navigationForm.get("classes").get("title").hasError("minLength")),e.xp6(4),e.Q6J("formControlName","subtitle")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("classes").get("subtitle").hasError("maxLength")||t.navigationForm.get("classes").get("subtitle").hasError("minLength")),e.xp6(4),e.Q6J("formControlName","icon")("type","text")("placeholder","Icono")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("classes").get("icon").hasError("maxLength")||t.navigationForm.get("classes").get("icon").hasError("minLength")),e.xp6(4),e.Q6J("formControlName","wrapper")("type","text")("placeholder","Wrapper")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("classes").get("wrapper").hasError("maxLength")||t.navigationForm.get("classes").get("wrapper").hasError("minLength"))}}function zt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",36),e._UZ(2,"mat-checkbox",37,38),e.TgZ(4,"span",29),e._uU(5),e.qZA(),e.YNc(6,$t,22,25,"ng-container",5),e.qZA(),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw(2);e.xp6(2),e.Q6J("color","primary")("checked",o.selectedNavigation&&o.selectedNavigation.classes&&(o.selectedNavigation.classes.title||o.selectedNavigation.classes.subtitle||o.selectedNavigation.classes.icon||o.selectedNavigation.classes.wrapper)),e.xp6(3),e.Oqu(t.checked?"Clases":"Agregar clases css ?"),e.xp6(1),e.Q6J("ngIf",t.checked)}}function jt(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Las clases del t\xedtulo del elemento de navegaci\xf3n debe poseer entre 1 y 255 caracteres. "),e.qZA())}function Ht(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Las clases del subt\xedtulo del elemento de navegaci\xf3n debe poseer entre 3 y 255 caracteres. "),e.qZA())}function Kt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"form",39)(2,"mat-form-field",16)(3,"mat-label"),e._uU(4,"T\xedtulo"),e.qZA(),e._UZ(5,"input",40),e.YNc(6,jt,2,0,"mat-error",5),e.qZA(),e.TgZ(7,"mat-form-field",16)(8,"mat-label"),e._uU(9,"Clases"),e.qZA(),e._UZ(10,"input",40),e.YNc(11,Ht,2,0,"mat-error",5),e.qZA()(),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("formGroupName","badge"),e.xp6(4),e.Q6J("formControlName","title")("type","text")("placeholder","T\xedtulo")("minLength",1)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("badge").get("title").hasError("maxLength")||t.navigationForm.get("badge").get("title").hasError("minLength")),e.xp6(4),e.Q6J("formControlName","classes")("type","text")("placeholder","Classes")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",t.navigationForm.get("badge").get("classes").hasError("maxLength")||t.navigationForm.get("badge").get("classes").hasError("minLength"))}}function Vt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",36),e._UZ(2,"mat-checkbox",37,38),e.TgZ(4,"span",29),e._uU(5),e.qZA(),e.YNc(6,Kt,12,13,"ng-container",5),e.qZA(),e.BQk()),2&n){const t=e.MAs(3),o=e.oxw(2);e.xp6(2),e.Q6J("color","primary")("checked",o.selectedNavigation&&o.selectedNavigation.badge&&(o.selectedNavigation.badge.title||o.selectedNavigation.classes.classes)),e.xp6(3),e.Oqu(t.checked?"Badge":"Agregar badge ?"),e.xp6(1),e.Q6J("ngIf",t.checked)}}function Wt(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"span",29),e._uU(3,"ExactMatch"),e.qZA(),e._UZ(4,"mat-slide-toggle",41),e.qZA(),e.BQk()),2&n&&(e.xp6(4),e.Q6J("formControlName","exactMatch")("color","primary"))}function Xt(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"span",29),e._uU(3,"Estado"),e.qZA(),e.TgZ(4,"mat-slide-toggle",41),e._uU(5),e.qZA()(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.navigationForm.get("active").value?"Activo":"Inactivo"," ")}}function en(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"span",29),e._uU(3,"Deshabilitado"),e.qZA(),e._UZ(4,"mat-slide-toggle",41),e.qZA(),e.BQk()),2&n&&(e.xp6(4),e.Q6J("formControlName","disabled")("color","primary"))}function tn(n,a){1&n&&(e.ynx(0),e.TgZ(1,"div",28)(2,"span",29),e._uU(3,"P\xfablico"),e.qZA(),e._UZ(4,"mat-slide-toggle",41),e.qZA(),e.BQk()),2&n&&(e.xp6(4),e.Q6J("formControlName","public")("color","primary"))}function nn(n,a){if(1&n&&(e.TgZ(0,"mat-option",20),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function on(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-chip",49),e.NdJ("removed",function(){const r=e.CHM(t).$implicit,l=e.oxw(3);return e.KtG(l.removePermission(r))}),e.TgZ(1,"div",50),e._uU(2),e.qZA(),e.TgZ(3,"button",51),e._UZ(4,"mat-icon",52),e.qZA()()}if(2&n){const t=a.$implicit;e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("aria-label","Eliminar "+t.name),e.xp6(1),e.Q6J("svgIcon","mat_solid:cancel")}}function an(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-form-field",42)(2,"mat-label"),e._uU(3,"Permisos"),e.qZA(),e._UZ(4,"input",43),e.TgZ(5,"mat-autocomplete",44,45),e.NdJ("optionSelected",function(i){e.CHM(t);const r=e.oxw(2);return e.KtG(r.addMPermission(i.option.value))}),e.YNc(7,nn,2,2,"mat-option",24),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"mat-chip-list",46,47),e.YNc(11,on,5,3,"mat-chip",48),e.qZA()(),e.BQk()}if(2&n){const t=e.MAs(6),o=e.MAs(10),i=e.oxw(2);e.xp6(4),e.Q6J("formControl",i.searchMPermissionControl)("matChipInputFor",o)("matChipInputSeparatorKeyCodes",i.separatorKeysCodes)("matAutocomplete",t),e.xp6(3),e.Q6J("ngForOf",e.lcZ(8,6,i.filteredMPermissions)),e.xp6(4),e.Q6J("ngForOf",i.selectedMPermissions)}}function rn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"form",9)(3,"div",10)(4,"mat-form-field",11)(5,"mat-label"),e._uU(6,"Padre"),e.qZA(),e._UZ(7,"input",12),e.TgZ(8,"mat-autocomplete",13,14),e.NdJ("optionSelected",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedNavigationOption(i))}),e.YNc(10,bt,2,5,"mat-option",15),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"mat-hint"),e._uU(13,"Si se especifica un padre este elemento se agregar\xe1 en la ra\xedz"),e.qZA()(),e.TgZ(14,"mat-form-field",16)(15,"mat-label"),e._uU(16,"Tipo"),e.qZA(),e.TgZ(17,"mat-select",17,18),e.NdJ("selectionChange",function(i){e.CHM(t);const r=e.oxw();return e.KtG(r.navigationTypeChange(i.value))}),e.YNc(19,Ct,2,1,"mat-option",19),e.TgZ(20,"mat-option",20),e._uU(21," Basic "),e.qZA(),e.TgZ(22,"mat-option",20),e._uU(23," Collapsable "),e.qZA(),e.TgZ(24,"mat-option",20),e._uU(25," Divider "),e.qZA(),e.YNc(26,Zt,2,1,"mat-option",19),e.TgZ(27,"mat-option",20),e._uU(28," Spacer "),e.qZA()(),e.YNc(29,Nt,2,0,"mat-error",5),e.qZA(),e.YNc(30,It,6,4,"mat-form-field",21),e.YNc(31,Mt,7,7,"ng-container",5),e.YNc(32,Qt,6,4,"ng-container",5),e.YNc(33,Jt,6,4,"ng-container",5),e.YNc(34,qt,8,4,"ng-container",5),e.YNc(35,Dt,6,4,"ng-container",5),e.YNc(36,St,6,4,"ng-container",5),e.YNc(37,Rt,8,4,"ng-container",5),e.YNc(38,zt,7,4,"ng-container",5),e.YNc(39,Vt,7,4,"ng-container",5),e.YNc(40,Wt,5,2,"ng-container",5),e.YNc(41,Xt,6,3,"ng-container",5),e.YNc(42,en,5,2,"ng-container",5),e.YNc(43,tn,5,2,"ng-container",5),e.YNc(44,an,12,8,"ng-container",5),e.qZA()()()()}if(2&n){const t=e.MAs(9),o=e.MAs(18),i=e.oxw();e.xp6(2),e.Q6J("formGroup",i.navigationForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","parentId")("type","text")("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",i.displayFn.bind(i)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(11,31,i.filteredNavigations)),e.xp6(7),e.Q6J("formControlName","type")("placeholder","Tipo"),e.xp6(2),e.Q6J("ngIf",null===i.parentNavigation),e.xp6(1),e.Q6J("value","basic"),e.xp6(2),e.Q6J("value","collapsable"),e.xp6(2),e.Q6J("value","divider"),e.xp6(2),e.Q6J("ngIf",null===i.parentNavigation),e.xp6(1),e.Q6J("value","spacer"),e.xp6(2),e.Q6J("ngIf",i.navigationForm.get("type").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.positions.length>1),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value&&"collapsable"!==o.value),e.xp6(1),e.Q6J("ngIf","collapsable"===o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","divider"!==o.value&&"spacer"!==o.value),e.xp6(1),e.Q6J("ngIf","basic"===o.value),e.xp6(1),e.Q6J("ngIf","basic"===i.navigationForm.get("type").value&&!0!==i.navigationForm.get("public").value)}}const be=function(n){return{"cursor-not-allowed":n}};function sn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",55),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.updateNavigation())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.navigationForm.invalid)("ngClass",e.VKq(3,be,t.navigationForm.invalid))}}function ln(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",55),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.createNavigation())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.navigationForm.invalid)("ngClass",e.VKq(3,be,t.navigationForm.invalid))}}function cn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",53),e.ynx(2),e.TgZ(3,"button",54),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,sn,3,5,"ng-container",5),e.YNc(6,ln,3,5,"ng-container",5),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let mn=(()=>{class n{constructor(t,o,i,r,l,d,C,E,pe){this.data=t,this._changeDetectorRef=o,this._dialogRef=i,this._formBuilder=r,this._athConfirmationService=l,this._navigationService=d,this._fuseMediaWatcherService=C,this._snackBar=E,this.store=pe,this.navigations=[],this.allNavigations=[],this.positions=[],this.position=0,this.mPermissions=[],this.selectedMPermissions=[],this.searchMPermissionControl=new s.NI,this.separatorKeysCodes=[fe.K5,fe.OC],this.selectedNavigationType="",this._unsubscribeAll=new h.x,this.dialogMode=t.dialogMode,this.selectedNavigation=t.navigation,this.parentNavigation=t.parentNavigation}ngOnInit(){this.store.select(gt.YA).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.allNavigations=[...t],this.filterNavigation(t),this.calcPositions(!1)}),this.store.select(H).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.mPermissions=t}),this.navigationForm=this._formBuilder.group({id:[null],position:[this.position,[s.kI.required]],title:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(255)]],subtitle:[null,[s.kI.maxLength(255)]],type:["basic",[s.kI.required,s.kI.minLength(5),s.kI.maxLength(255)]],tooltip:[null,[s.kI.maxLength(255)]],link:[null,s.kI.maxLength(1e3)],link2:[null,s.kI.maxLength(1e3)],externalLink:[!1],target:[null,[s.kI.minLength(4),s.kI.maxLength(255)]],level:[0,[s.kI.required]],icon:[null,[s.kI.maxLength(255)]],parentId:[null,[s.kI.required]],classes:this._formBuilder.group({title:["",[s.kI.minLength(3),s.kI.maxLength(255)]],subtitle:["",[s.kI.maxLength(255)]],icon:["",[s.kI.maxLength(255)]],wrapper:["",[s.kI.maxLength(255)]]}),badge:this._formBuilder.group({title:["",[s.kI.minLength(1),s.kI.maxLength(255)]],classes:["",s.kI.maxLength(1e3)]}),active:[!0],disabled:[!1],exactMatch:[!1],public:[!1]}),this.filteredNavigations=this.navigationForm.get("parentId").valueChanges.pipe((0,g.R)(this._unsubscribeAll),(0,ee.b)(100),(0,te.O)(" "),(0,P.w)(t=>(0,O.of)(t?this.navigations.filter(o=>o.title.toLocaleLowerCase().includes(t.toLocaleLowerCase())):this.navigations))),this.filteredMPermissions=this.searchMPermissionControl.valueChanges.pipe((0,te.O)(""),(0,ee.b)(400),(0,P.w)(t=>(0,O.of)(this.mPermissions.filter("string"==typeof t&&t?o=>o.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())&&!this.selectedMPermissions.some(i=>i.id===o.id):o=>!this.selectedMPermissions.some(i=>i.id===o.id))))),this._fuseMediaWatcherService.onMediaChange$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.isScreenSmall=!t.includes("md"),this._changeDetectorRef.detectChanges()}),this._fillNavigationData()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectedNavigationOption(t){const o=t.option.value;this.parentNavigation=this.navigations.find(i=>i.id===o),"root"===this.parentNavigation.id&&(this.parentNavigation=null),this.filterNavigation(this.allNavigations),this.calcPositions(!0),this.navigationForm.get("position").setValue(this.position),this._changeDetectorRef.markForCheck()}navigationTypeChange(t){"divider"===t||"spacer"===t?(this.navigationForm.reset(),this.navigationForm.get("title").setValue(t.toUpperCase()),this.navigationForm.get("type").setValue(t),this.navigationForm.get("position").setValue(this.position),this.navigationForm.get("active").setValue(!0),this.navigationForm.get("disabled").setValue(!1),this.navigationForm.get("level").setValue(this.parentNavigation?this.parentNavigation.level+1:0),this.parentNavigation?this.navigationForm.get("parentId").setValue(this.parentNavigation.id):this.navigationForm.get("parentId").setValue("root")):("divider"===this.selectedNavigationType||"spacer"===this.selectedNavigationType)&&(this.navigationForm.get("level").setValue(this.parentNavigation?this.parentNavigation.level+1:0),this._fillNavigationData()),this._changeDetectorRef.markForCheck(),this.selectedNavigationType=t}createNavigation(){const t=this.navigationForm.getRawValue();delete t.id,this.parentNavigation&&"root"!==this.parentNavigation.id?t.level=this.parentNavigation.level+1:t.parentId=null,t.permissionsId=t.public?[]:this.selectedMPermissions.map(i=>i.id),!t.classes.title&&!t.classes.subtitle&&!t.classes.icon&&!t.classes.wrapper&&delete t.classes,!t.badge.title&&!t.badge.classes&&delete t.badge,this._athConfirmationService.open({title:"Crear elemento navigational",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._navigationService.createNavigation(t).subscribe(r=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog()})})}updateNavigation(){const t=this.navigationForm.getRawValue();this.parentNavigation&&"root"!==this.parentNavigation.id?t.level=this.parentNavigation.level+1:t.parentId=null,!t.classes.title&&!t.classes.subtitle&&!t.classes.icon&&!t.classes.wrapper&&(t.classes=null),!t.badge.title&&!t.badge.classes&&(t.badge=null),t.permissionsId=t.public?[]:this.selectedMPermissions.map(i=>i.id),this._athConfirmationService.open({title:"Actualizar elemento navigational",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._navigationService.updateNavigation(t).subscribe(r=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog()})})}addMPermission(t){this.searchMPermissionControl.setValue(""),this.selectedMPermissions.push(t),this._changeDetectorRef.markForCheck()}removePermission(t){const o=this.selectedMPermissions.indexOf(t);o>=0&&this.selectedMPermissions.splice(o,1)}displayFn(t){const o=this.navigations.find(i=>i.id===t);return o?o.title:""}closeDialog(){this._dialogRef.close()}_fillNavigationData(){if("edit"===this.dialogMode){this.navigationForm.patchValue(this.selectedNavigation);for(const t of this.selectedNavigation.permissionsId){const o=this.mPermissions.find(i=>i.id===t);o&&this.selectedMPermissions.push(o)}this.selectedNavigationType=this.selectedNavigation.type,this.parentNavigation||this.navigationForm.get("parentId").setValue("root")}"add"===this.dialogMode&&(this.parentNavigation&&this.navigationForm.get("parentId").setValue(this.parentNavigation.id),this.parentNavigation||this.navigationForm.get("parentId").setValue("root"),this.selectedNavigationType=this.navigationForm.get("type").value)}filterNavigation(t){return this.selectedNavigation?"edit"===this.dialogMode&&(this.navigations=[...t.filter(o=>this.selectedNavigation.id!==o.id&&"basic"!==o.type&&"divider"!==o.type&&"spacer"!==o.type)]):this.navigations=[...t.filter(o=>"basic"!==o.type&&"divider"!==o.type&&"spacer"!==o.type)],this.navigations.push({level:-1,id:"root",type:"group",title:"----Principal----"}),this.navigations.sort((o,i)=>o.level-i.level)}calcPositions(t){if(this.positions=[],this.position=0,this.parentNavigation&&this.parentNavigation.children&&this.parentNavigation.children.length>0){for(let o=0;o<this.parentNavigation.children.length;o++)this.positions.push(o);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):t&&this.positions.push(this.positions.length)}if(!this.parentNavigation){const o=this.allNavigations.filter(i=>null===i.parentId);for(let i=0;i<o.length;i++)this.positions.push(i);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):t&&this.positions.push(this.positions.length)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.WI),e.Y36(e.sBO),e.Y36(y.so),e.Y36(s.QS),e.Y36(U.R),e.Y36(me),e.Y36(xe.T),e.Y36(J.ux),e.Y36(k.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["navigation-dialog"]],decls:10,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],["mat-dialog-title",""],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2","md:grid-cols-3"],[1,"fuse-mat-no-subscript"],["matInput","","placeholder","Elemento padre","aria-label","Number",3,"formControlName","type","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"ngClass","value",4,"ngFor","ngForOf"],[1,"w-full"],["required","",3,"formControlName","placeholder","selectionChange"],["typeOptions",""],[3,"value",4,"ngIf"],[3,"value"],["class","w-full ",4,"ngIf"],[3,"ngClass","value"],["required","",3,"formControlName","placeholder"],[3,"value",4,"ngFor","ngForOf"],["matInput","","required","",3,"formControlName","type","placeholder","minLength","maxLength"],["matInput","",3,"formControlName","placeholder","maxLength"],["matInput","","require","",3,"formControlName","placeholder","maxLength"],[1,"flex","flex-col"],[1,"font-medium"],[1,"flex","flex-row"],[1,"mt-1","sm:mt-2",3,"color","formControlName"],["externalLink",""],["class","w-full mt-1",4,"ngIf"],[1,"w-full","mt-1"],[3,"formControlName","placeholder"],[1,"items-center","sm:col-span-2","md:col-span-3"],[1,"mb-1",3,"color","checked"],["addClasses",""],[1,"grid","grid-cols-1","gap-2","py-4","mt-2","border-y","gap-x-4","sm:grid-cols-2","md:grid-cols-3",3,"formGroupName"],["matInput","",3,"formControlName","type","placeholder","minLength","maxLength"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],["appearance","fill",1,"w-full","mt-2","sm:col-span-2","md:col-span-3","fuse-mat-no-subscript"],["placeholder","Agregar permiso...",1,"w-full",3,"formControl","matChipInputFor","matChipInputSeparatorKeyCodes","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],["autoP","matAutocomplete"],["aria-label","Agregar permiso"],["permissionsChipGrid",""],[3,"removed",4,"ngFor","ngForOf"],[3,"removed"],[1,"truncate","max-w-16","sm:max-w-24"],["matChipRemove","",1,"w-5","h-5",3,"aria-label"],[1,"icon-size-5",3,"svgIcon"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","ngClass","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,ht,2,1,"h2",2),e.YNc(4,ft,2,0,"h2",2),e.YNc(5,xt,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,rn,45,33,"div",4),e.BQk(),e.qZA(),e.YNc(9,cn,7,3,"ng-container",5),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.dialogMode&&o.parentNavigation),e.xp6(1),e.Q6J("ngIf","add"===o.dialogMode&&!o.parentNavigation),e.xp6(1),e.Q6J("ngIf","edit"===o.dialogMode),e.xp6(3),e.Q6J("ngIf","view"!==o.dialogMode),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[p.mk,p.sg,p.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.F,s.oH,s.sg,s.u,s.x0,ve.XC,ve.ZL,w.ey,q.lW,_.oG,oe.qn,oe.HS,oe.oH,oe.qH,y.ZT,y.uh,u.Hw,m.TO,m.KE,m.bx,m.hX,Z.Nt,b.gD,N.Rr,p.Ov],encapsulation:2,changeDetection:0}),n})();class dn{}var gn=c(85178),pn=c(29551);function un(n,a){if(1&n&&e._UZ(0,"mat-icon",47),2&n){const t=e.oxw().$implicit;e.Q6J("svgIcon",t.item.icon)}}const Ce=function(n,a){return{"bg-gray-800 dark:bg-white":n,"bg-gray-700 dark:bg-neutral-50":a}},_n=function(n,a){return{"bg-gray-400":n,"bg-primary-500":a}};function hn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tree-node",39),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.mouseEnterLeave(r.item.id))})("mouseleave",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.mouseEnterLeave(r.item.id))})("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.mouseOver(r.item.id))}),e.TgZ(1,"div",40)(2,"div",41),e._UZ(3,"div",42),e.qZA(),e.TgZ(4,"span",43),e._uU(5),e.qZA()(),e.TgZ(6,"div",34),e.YNc(7,un,1,1,"mat-icon",44),e.qZA(),e.TgZ(8,"span",34),e._uU(9),e.qZA(),e._UZ(10,"span"),e.TgZ(11,"div",45)(12,"button",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.createNavigation(r))}),e._UZ(13,"mat-icon",47),e.qZA(),e.TgZ(14,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.editNavigation(r))}),e._UZ(15,"mat-icon",47),e.qZA(),e.TgZ(16,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteNavigation(l.flatNodeMap.get(r)))}),e._UZ(17,"mat-icon",47),e.qZA()()()}if(2&n){const t=a.$implicit,o=e.oxw(2);e.Q6J("ngClass",e.WLB(9,Ce,t.item.id===o.selectedNavigationId,t.item.id===o.overNavigationId)),e.xp6(3),e.Q6J("ngClass",e.WLB(12,_n,"spacer"===t.item.type||"divider"===t.item.type,"spacer"!==t.item.type&&"divider"!==t.item.type)),e.xp6(2),e.Oqu(t.item.title),e.xp6(2),e.Q6J("ngIf",t.item.icon),e.xp6(2),e.Oqu(t.item.type),e.xp6(3),e.Q6J("disabled","basic"===t.item.type||"divider"===t.item.type||"spacer"===t.item.type),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function fn(n,a){if(1&n&&e._UZ(0,"mat-icon",47),2&n){const t=e.oxw().$implicit;e.Q6J("svgIcon",t.item.icon)}}function xn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tree-node",39),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.mouseEnterLeave(r.item.id))})("mouseleave",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.mouseEnterLeave(r.item.id))})("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.mouseOver(r.item.id))})("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.dobleClick(r))}),e.TgZ(1,"div",40)(2,"button",49),e._UZ(3,"mat-icon",47),e.qZA(),e.TgZ(4,"span",50),e._uU(5),e.qZA()(),e.TgZ(6,"div",34),e.YNc(7,fn,1,1,"mat-icon",44),e.qZA(),e.TgZ(8,"span",34),e._uU(9),e.qZA(),e.TgZ(10,"span",34),e._uU(11),e.qZA(),e.TgZ(12,"div",51),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.dobleClick(r))}),e.TgZ(13,"button",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.createNavigation(r))}),e._UZ(14,"mat-icon",47),e.qZA(),e.TgZ(15,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.editNavigation(r))}),e._UZ(16,"mat-icon",47),e.qZA(),e.TgZ(17,"button",48),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteNavigation(l.flatNodeMap.get(r)))}),e._UZ(18,"mat-icon",47),e.qZA()()()}if(2&n){const t=a.$implicit,o=e.oxw(2);e.Q6J("ngClass",e.WLB(11,Ce,t.item.id===o.selectedNavigationId,t.item.id===o.overNavigationId)),e.xp6(2),e.uIk("aria-label","Expandir "+t.item.title),e.xp6(1),e.Q6J("svgIcon",o.treeControl.isExpanded(t)?"heroicons_outline:chevron-down":"heroicons_outline:chevron-right"),e.xp6(2),e.Oqu(t.item.title),e.xp6(2),e.Q6J("ngIf",t.item.icon),e.xp6(2),e.Oqu(t.item.type),e.xp6(2),e.Oqu(o.flatNodeMap.get(t).children.length),e.xp6(2),e.Q6J("disabled","basic"===t.item.type||"divider"===t.item.type||"spacer"===t.item.type),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:plus"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function vn(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",32)(2,"div",33),e._uU(3," T\xedtulo "),e.qZA(),e.TgZ(4,"div",34),e._uU(5," Icono "),e.qZA(),e.TgZ(6,"div",34),e._uU(7," Tipo "),e.qZA(),e.TgZ(8,"div",34),e._uU(9," #.Elementos "),e.qZA(),e.TgZ(10,"div",35),e._uU(11," Acciones "),e.qZA()(),e.TgZ(12,"mat-tree",36),e.YNc(13,hn,18,15,"mat-tree-node",37),e.YNc(14,xn,19,14,"mat-tree-node",38),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(12),e.Q6J("dataSource",t.dataSource)("treeControl",t.treeControl),e.xp6(2),e.Q6J("matTreeNodeDefWhen",t.hasChild)}}function bn(n,a){1&n&&(e.TgZ(0,"div",52),e._uU(1," \xa1No se ha creado ning\xfan elemento a\xfan!"),e.qZA())}function Cn(n,a){if(1&n&&(e.TgZ(0,"div",52),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.searchInputControl.value?"\xa1No se han encontrado facturas!":"\xa1No se ha generado ninguna factuna suscripci\xf3n a\xfan!","")}}const Zn=function(n,a){return{dark:n,"bg-white":a}};let Nn=(()=>{class n{constructor(t,o,i,r,l,d,C,E,pe){this.store=t,this.dialog=o,this._snackBar=i,this._navigationService=r,this._fuseConfigService=l,this._changeDetectorRef=d,this._fuseNavigationService=C,this._fuseConfirmationService=E,this._fuseMediaWatcherService=pe,this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.checklistSelection=new ct.Ov(!0),this._unsubscribeAll=new h.x,this.getLevel=I=>I.level,this.isExpandable=I=>I.expandable,this.getChildren=I=>I.children,this.hasChild=(I,S)=>S.expandable||"collapsable"===S.item.type||"group"===S.item.type||"aside"===S.item.type,this.hasNoContent=(I,S)=>""===S.item.title,this.transformer=(I,S)=>{var ue;const _e=this.nestedNodeMap.get(I),j=_e&&_e.item===I.item?_e:new dn;return j.item=I.item,j.level=S,j.expandable=!(null===(ue=I.children)||void 0===ue||!ue.length),this.flatNodeMap.set(j,I),this.nestedNodeMap.set(I,j),j},this.treeFlattener=new R.JZ(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new mt.C2(this.getLevel,this.isExpandable),this.dataSource=new R.kc(this.treeControl,this.treeFlattener)}ngOnInit(){this._navigationService.data$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.dataSource.data=t;const i={children:[],type:"aside"};this.transformToFuseNavigationFormat({item:null,children:t},i);const r=this.getNavigations(i,[]);this.navigations=r,this.fuseNavigationItems=i.children,this.store.dispatch((0,dt.gd)({navigations:r})),this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.isScreenSmall=!t.includes("md")}),this._fuseConfigService.config$.pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.config=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}descendantsAllSelected(t){const o=this.treeControl.getDescendants(t);return o.length>0&&o.every(r=>this.checklistSelection.isSelected(r))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(r=>this.checklistSelection.isSelected(r))&&!this.descendantsAllSelected(t)}mouseEnterLeave(t){this.selectedNavigationId=t===this.selectedNavigationId?"":t}mouseOver(t){this.overNavigationId=t===this.overNavigationId?"":t}dobleClick(t){this.treeControl.isExpanded(t)?this.treeControl.collapse(t):this.treeControl.expand(t)}createNavigation(t){if(t){const o={item:t.item,children:this.flatNodeMap.get(t).children},i=Object.assign(Object.assign({},t.item),{children:[]});this.transformToFuseNavigationFormat(o,i),this._openDialog(i,null,"add")}else this._openDialog(null,null,"add")}editNavigation(t){let o=this.navigations.find(i=>i.id===t.item.parentId);o=void 0===o?null:o,this._openDialog(o,t.item,"edit")}deleteNavigation(t){this._fuseConfirmationService.open({title:"Eliminar Elemento",message:`\xbfEst\xe1 seguro que desea eliminar a ${t.item.title}? ${t.children.length>0?"Este elemento posee otros elementos":""}.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._navigationService.removeNavigation(t.item.id).subscribe(r=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})})}toggleNavigation(t){const o=this._fuseNavigationService.getComponent(t);o&&o.toggle()}expandAll(){this.treeControl.expandAll()}collapseAll(){this.treeControl.collapseAll()}_openDialog(t,o,i){this.dialog.open(mn,{data:{parentNavigation:t,navigation:o,dialogMode:i},disableClose:!0,panelClass:"ath-payment-method-dialog-panel"})}transformToFuseNavigationFormat(t,o){for(const i of t.children){const r=Object.assign({},i.item);i.children&&i.children.length>0&&(r.children=[],this.transformToFuseNavigationFormat(i,r)),o.children.push(r)}}getNavigations(t,o){for(const i of t.children)i.active=!1,i.children&&i.children.length>0&&this.getNavigations(i,o),o.push(Object.assign({},i));return o.sort((i,r)=>i.level-r.level)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(k.yh),e.Y36(y.uw),e.Y36(J.ux),e.Y36(me),e.Y36(gn.m),e.Y36(e.sBO),e.Y36(T.Jf),e.Y36(U.R),e.Y36(xe.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["settings-navigation"]],decls:47,vars:20,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-row","justify-between","w-full","min-w-0","overflow-x-hidden","overflow-y-hidden","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-auto","overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-20"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight"],[1,"flex","my-2","sm:hidden"],["mat-icon-button","",1,"",3,"click"],[3,"svgIcon"],[1,"flex","flex-row-reverse","flex-wrap","items-center","justify-end","mt-2","sm:flex-row","sm:mt-0","shrink-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["mat-stroked-button","",1,"ml-4",3,"click"],["svgIcon","mat_outline:close_fullscreen"],[1,"hidden","ml-2","mr-1","sm:block"],["mat-stroked-button","",1,"ml-0","sm:ml-4",3,"click"],["svgIcon","mat_outline:expand"],["mat-icon-button","",1,"hidden","ml-6","sm:flex",3,"click"],[1,"flex","flex-col","flex-auto"],[1,"grid"],[4,"ngIf","ngIfElse"],["noNavigations",""],["noSubscriptions",""],[1,"h-full","min-h-full","overflow-x-auto","border","print:hidden",3,"ngClass","mode","name","opened","autoCollapse","inner","transparentOverlay","position","navigation"],[1,"sticky","top-0","z-10","grid","gap-4","px-0","py-4","font-semibold","shadow","navigation-tree-table","xl:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"ml-6","xl:ml-0"],[1,"text-center"],[1,"pr-4","mr-6","text-right","xl:mr-0"],[3,"dataSource","treeControl"],["class","grid navigation-tree-table  gap-4 relative py-1.5  border-b rounded-md bg-opacity-5 dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef"],["class","grid navigation-tree-table gap-4 relative  py-1.5 border-b rounded-md bg-opacity-5 dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef","matTreeNodeDefWhen"],[1,"grid","navigation-tree-table","gap-4","relative","py-1.5","border-b","rounded-md","bg-opacity-5","dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","items-center"],["matTreeNodeToggle","","mat-icon-button","","color","primary",1,"flex","items-center","justify-center","w-10","h-10"],[1,"w-2","h-2","rounded-full",3,"ngClass"],[1,"cursor-default","whitespace-nowrap","line-clamp-1"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],[1,"flex","flex-row","justify-end","gap-2","pr-2","text-right"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"disabled","click"],[1,"icon-size-5",3,"svgIcon"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],["mat-icon-button","","matTreeNodeToggle","","color","primary"],[1,"cursor-default","whitespace-nowrap"],[1,"flex","flex-row","justify-end","gap-2","pr-2","text-right",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4)(6,"div",5)(7,"a",6),e._uU(8,"Inicio"),e.qZA()(),e.TgZ(9,"div",5),e._UZ(10,"mat-icon",7),e.TgZ(11,"a",8),e._uU(12,"Navegaci\xf3n"),e.qZA()()(),e.TgZ(13,"div",9)(14,"a",10),e._UZ(15,"mat-icon",7),e.TgZ(16,"span",11),e._uU(17,"Regresar"),e.qZA()()()(),e.TgZ(18,"div",12)(19,"div",13),e._uU(20," Gesti\xf3n de navegaci\xf3n "),e.qZA()()(),e.TgZ(21,"div",14)(22,"button",15),e.NdJ("click",function(){return o.toggleNavigation("settingNavigation")}),e._UZ(23,"mat-icon",16),e.qZA()(),e.TgZ(24,"div",17)(25,"button",18),e.NdJ("click",function(){return o.createNavigation(null)}),e._UZ(26,"mat-icon",16),e.TgZ(27,"span",19),e._uU(28,"Nuevo"),e.qZA()(),e.TgZ(29,"button",20),e.NdJ("click",function(){return o.collapseAll()}),e._UZ(30,"mat-icon",21),e.TgZ(31,"span",22),e._uU(32,"Contraer"),e.qZA()(),e.TgZ(33,"button",23),e.NdJ("click",function(){return o.expandAll()}),e._UZ(34,"mat-icon",24),e.TgZ(35,"span",22),e._uU(36,"Expandir"),e.qZA()(),e.TgZ(37,"button",25),e.NdJ("click",function(){return o.toggleNavigation("settingNavigation")}),e._UZ(38,"mat-icon",16),e.qZA()()(),e.TgZ(39,"div",26)(40,"div",27),e.YNc(41,vn,15,3,"ng-container",28),e.YNc(42,bn,2,0,"ng-template",null,29,e.W1O),e.YNc(44,Cn,2,1,"ng-template",null,30,e.W1O),e.qZA()()(),e._UZ(46,"fuse-vertical-navigation",31),e.qZA()),2&t){const i=e.MAs(43);e.xp6(10),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:menu"),e.xp6(3),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(12),e.Q6J("svgIcon","heroicons_outline:menu"),e.xp6(3),e.Q6J("ngIf",o.dataSource.data.length>0)("ngIfElse",i),e.xp6(5),e.Q6J("ngClass",e.WLB(17,Zn,"dark"===o.config.scheme,"dark"!==o.config.scheme))("mode",o.isScreenSmall?"over":"side")("name","settingNavigation")("opened",!o.isScreenSmall)("autoCollapse",!0)("inner",!1)("transparentOverlay",!0)("position","left")("navigation",o.fuseNavigationItems)}},dependencies:[f.yS,p.mk,p.O5,B.PQ,q.lW,u.Hw,R.fQ,R.ah,R.eu,R.gi,R.uo,pn.j],encapsulation:2,data:{animation:le.L},changeDetection:0}),n})();var $=c(18505),Ze=c(75714),z=c(49709),Y=c(33921);const Tn=Y.Ps`
    query MPermissions {
        mPermissions {
            id
            name
            description
            mandatory
        }
    }
`,yn=Y.Ps`
    query PaginatedMPermissions($page: Int, $size: Int, $sort: String, $order: Order, $search: String ) {
        paginatedMPermissions(page: $page, size: $size, sort: $sort, order: $order, search: $search ) {

        ok
        message

        pagination {
            length
            size
            page
            lastPage
            startIndex
            endIndex
        }

        items {
            id
            parentId
            name
            level
            slug
            description
            mandatory

            permissions {
                id
                name
                slug
                description
            }
        }
        }
    }
`,In=Y.Ps`
    query PermissionsNinModules {
        permissionsNinModules {
            id
            name
            description
            mandatory
        }
    }
`,An=Y.Ps`
    mutation CreateMPermissions($createMPermissionInput: CreateMPermissionInput!, $createMPermissionsInput: [CreateMPermissionInput!]) {
        createMPermissions(createMPermissionInput: $createMPermissionInput, createMPermissionsInput: $createMPermissionsInput ) {
            ok
            message

            permission {
                id
                parentId
                name
                level
                slug
                description
                mandatory

                permissions {
                    id
                    name
                    slug
                    description
                }
            }
        }
    }
`,kn=Y.Ps`
    mutation UpdateMPermissions($updateMPermissionInput: UpdateMPermissionInput!, $updateMPermissionsInput: [UpdateMPermissionInput!]) {
        updateMPermissions(updateMPermissionInput: $updateMPermissionInput, updateMPermissionsInput: $updateMPermissionsInput) {

            ok
            message

            permission {
                id
                parentId
                name
                level
                slug
                description
                mandatory

                permissions {
                    id
                    name
                    slug
                    description
                }
            }
        }
    }
`,Mn=Y.Ps`
    mutation PaginatedRemoveMPermission($removeMPermissionById: Float!, $page: Int, $size: Int, $sort: String, $order: Order, $search: String ) {
        paginatedRemoveMPermission(id: $removeMPermissionById, page: $page, size: $size, sort: $sort, order: $order, search: $search ) {

            ok
            message

            pagination {
                length
                size
                page
                lastPage
                startIndex
                endIndex
            }

            items {
                id
                parentId
                name
                level
                slug
                description
                mandatory

                permissions {
                    id
                    name
                    slug
                    description
            }
            }
        }
    }
`;let K=(()=>{class n{constructor(t,o){this.apolloProvider=t,this.store=o,this._apollo=this.apolloProvider.use("BALANC")}createMPermission(t,o){return this._apollo.mutate({mutation:An,variables:{createMPermissionInput:t,createMPermissionsInput:o},errorPolicy:"all"}).pipe((0,M.U)(({data:i})=>i?i.createMPermissions:null),(0,$.b)(i=>{i&&this.store.dispatch((0,z.jL)({permission:i.permission}))}))}getPaginatedMPermissions(t=0,o=10,i="name",r="desc",l=null){return this._apollo.query({query:yn,errorPolicy:"all",variables:{page:t,size:o,sort:i,order:r,search:l}}).pipe((0,$.b)(({data:d})=>{d&&(this.store.dispatch((0,Ze.Jr)({pagination:d.paginatedMPermissions.pagination})),this.store.dispatch((0,z.g$)({permissions:d.paginatedMPermissions.items})))}))}getMPermissions(){return this._apollo.query({query:Tn,errorPolicy:"all"}).pipe((0,$.b)(({data:t})=>{t&&this.store.dispatch((0,z.g$)({permissions:t.mPermissions}))}))}getPermissionsNinModules(){return this._apollo.query({query:In,errorPolicy:"all"}).pipe((0,$.b)(({data:t})=>{t&&this.store.dispatch((0,z.g$)({permissions:t.permissionsNinModules}))}))}updatePermission(t,o){return this._apollo.mutate({mutation:kn,variables:{updateMPermissionInput:t,updateMPermissionsInput:o},errorPolicy:"all"}).pipe((0,M.U)(({data:i})=>i?i.updateMPermissions:null),(0,$.b)(i=>{i&&this.store.dispatch((0,z.kY)({permission:i.permission}))}))}removePermission(t,o=0,i=10,r="name",l="desc",d=null){return this._apollo.mutate({mutation:Mn,variables:{removeMPermissionById:t,page:o,size:i,sort:r,order:l,search:d},errorPolicy:"all"}).pipe((0,$.b)(({data:C})=>{C&&(this.store.dispatch((0,Ze.Jr)({pagination:C.paginatedRemoveMPermission.pagination})),this.store.dispatch((0,z.$x)({id:t})))}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(Y._M),e.LFG(k.yh))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Fn(n,a){1&n&&(e.TgZ(0,"h2",7),e._uU(1,"Agregar subm\xf3dulo"),e.qZA())}function Qn(n,a){1&n&&(e.TgZ(0,"h2",7),e._uU(1,"Editar subm\xf3dulo"),e.qZA())}function Un(n,a){1&n&&(e.TgZ(0,"h2",7),e._uU(1,"Detalles del subm\xf3dulo"),e.qZA())}function Jn(n,a){1&n&&e._UZ(0,"div",8)}function wn(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del subm\xf3dulo es obligatorio. "),e.qZA())}function qn(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre del subm\xf3dulo debe contener entre 3 y 255 caracteres. "),e.qZA())}function Pn(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," La descripci\xf3n debe contener al menos 5 caracteres. "),e.qZA())}function Dn(n,a){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10)(2,"form",11)(3,"mat-form-field",12)(4,"mat-label"),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",13),e.YNc(7,wn,2,0,"mat-error",6),e.YNc(8,qn,2,0,"mat-error",6),e.qZA(),e.TgZ(9,"div",14)(10,"mat-form-field",15)(11,"mat-label"),e._uU(12,"Descripci\xf3n"),e.qZA(),e._UZ(13,"mat-icon",16)(14,"textarea",17,18),e.YNc(16,Pn,2,0,"mat-error",6),e.TgZ(17,"mat-hint",19),e._uU(18),e.qZA()()(),e.TgZ(19,"mat-checkbox",20),e._uU(20," Obligatorio"),e.qZA()()()()),2&n){const t=e.MAs(15),o=e.oxw();e.xp6(2),e.Q6J("formGroup",o.mPermissionForm)("autocomplete","off"),e.xp6(4),e.Q6J("type","text")("formControlName","name")("minlength",3)("maxlength",255)("placeholder","Nombre del subm\xf3dulo"),e.xp6(1),e.Q6J("ngIf",o.mPermissionForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",o.mPermissionForm.get("name").hasError("maxlength")||o.mPermissionForm.get("name").hasError("minlength")),e.xp6(5),e.Q6J("svgIcon","heroicons_solid:menu-alt-2"),e.xp6(1),e.Q6J("formControlName","description")("rows",3)("spellcheck",!1)("minlength",5)("maxlength",1e3),e.xp6(2),e.Q6J("ngIf",o.mPermissionForm.get("description").hasError("minlength")),e.xp6(2),e.hij("Total de caracteres ",t.value.length," / 1000"),e.xp6(1),e.Q6J("color","primary")("formControlName","mandatory")}}const Ne=function(n){return{"cursor-not-allowed":n}};function En(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.updatePermission())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.mPermissionForm.invalid)("ngClass",e.VKq(3,Ne,t.mPermissionForm.invalid))}}function Sn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.createMPermission())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.mPermissionForm.invalid)("ngClass",e.VKq(3,Ne,t.mPermissionForm.invalid))}}function Ln(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",21),e.ynx(2),e.TgZ(3,"button",22),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,En,3,5,"ng-container",6),e.YNc(6,Sn,3,5,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Rn=(()=>{class n{constructor(t,o,i,r,l,d,C){this.data=t,this._dialogRef=o,this._changeDetectorRef=i,this._formBuilder=r,this._fuseConfirmationService=l,this._mPermissionsService=d,this._snackBar=C,this.dialogMode="view",this._unsubscribeAll=new h.x,this.selectedMPermission=t.mPermission,this.dialogMode=t.dialogMode}ngOnInit(){this.mPermissionForm=this._formBuilder.group({id:[null],parentId:[null],name:["",[s.kI.required,s.kI.minLength(3),s.kI.maxLength(255)]],mandatory:[!1],description:["",[s.kI.minLength(5),s.kI.maxLength(1e3)]]}),this._fillMPermissionData()}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createMPermission(){const t=this.mPermissionForm.getRawValue();delete t.id,delete t.parentId,this._fuseConfirmationService.open({title:"Crear Subm\xf3dulo",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._mPermissionsService.createMPermission(t,null).subscribe(r=>{r&&(this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}updatePermission(){const t=this.mPermissionForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Subm\xf3dulo",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._mPermissionsService.updatePermission(t,null).subscribe(r=>{r&&(this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}trackByFn(t,o){return o.id||t}closeDialog(){this._dialogRef.close()}_fillMPermissionData(){"edit"===this.dialogMode&&this.mPermissionForm.patchValue(this.selectedMPermission)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.WI),e.Y36(y.so),e.Y36(e.sBO),e.Y36(s.qu),e.Y36(U.R),e.Y36(K),e.Y36(J.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["m-permission-dialog"]],decls:12,vars:6,consts:[[1,"relative","flex","flex-col","w-full","h-full"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"w-full","overflow-hidden"],[1,"flex"],[1,"flex","flex-col","w-full","mt-6",3,"formGroup","autocomplete"],[1,""],["matInput","","required","",3,"type","formControlName","minlength","maxlength","placeholder"],[1,"pt-2","sm:col-span-2"],[1,"flex-auto","w-full","fuse-mat-textarea"],["matPrefix","",1,"hidden","sm:flex","icon-size-5",3,"svgIcon"],["matInput","","matTextareaAutosize","",3,"formControlName","rows","spellcheck","minlength","maxlength"],["desc",""],[1,"text-right"],[1,"mt-6","mb-0",3,"color","formControlName"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","ngClass","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Fn,2,0,"h2",2),e.YNc(4,Qn,2,0,"h2",2),e.YNc(5,Un,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,Jn,1,0,"div",4),e.BQk(),e.ynx(9),e.YNc(10,Dn,21,19,"div",5),e.BQk(),e.qZA(),e.YNc(11,Ln,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf",o.data.mPermission&&o.data.mPermission.id&&"edit"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf",o.data.mPermission&&o.data.mPermission.id&&"view"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[p.mk,p.O5,s._Y,s.Fj,s.JJ,s.JL,s.Q7,s.wO,s.nD,s.sg,s.u,q.lW,_.oG,y.ZT,u.Hw,m.TO,m.KE,m.bx,m.hX,m.qo,Z.Nt],encapsulation:2,changeDetection:0}),n})();function Yn(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",38),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:check"))}function Bn(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-icon",39),e.BQk()),2&n&&(e.xp6(1),e.Q6J("svgIcon","heroicons_solid:x"))}function Gn(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",32)(2,"div",33),e._uU(3),e.qZA(),e.TgZ(4,"div",33),e._uU(5),e.qZA(),e.TgZ(6,"div",33),e._uU(7),e.qZA(),e.TgZ(8,"div",34),e.YNc(9,Yn,2,1,"ng-container",21),e.YNc(10,Bn,2,1,"ng-container",21),e.qZA(),e.TgZ(11,"div",35)(12,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.editMPermission(r))}),e._UZ(13,"mat-icon",37),e.qZA(),e.TgZ(14,"button",36),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.deleteMPermission(r))}),e._UZ(15,"mat-icon",37),e.qZA()()(),e.BQk()}if(2&n){const t=a.$implicit;e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.slug," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.Q6J("ngIf",t.mandatory),e.xp6(1),e.Q6J("ngIf",!t.mandatory),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function On(n,a){if(1&n&&(e.ynx(0),e.YNc(1,Gn,16,7,"ng-container",31),e.BQk()),2&n){const t=a.ngIf,o=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",o.trackByFn)}}function $n(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",25)(2,"div",26)(3,"div",27),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",27),e._uU(6," Slug "),e.qZA(),e.TgZ(7,"div",28),e._uU(8," Descripci\xf3n "),e.qZA(),e.TgZ(9,"div",29),e._uU(10," Obligatorio "),e.qZA(),e.TgZ(11,"div",30),e._uU(12," Acciones "),e.qZA()(),e.YNc(13,On,2,2,"ng-container",21),e.ALo(14,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","slug"),e.xp6(4),e.Q6J("mat-sort-header","mandatory"),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,4,t.modules$))}}function zn(n,a){if(1&n&&(e.ynx(0),e.YNc(1,$n,15,6,"ng-container",24),e.BQk()),2&n){const t=a.ngIf;e.oxw();const o=e.MAs(33);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",o)}}function jn(n,a){if(1&n&&(e.TgZ(0,"div",40),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.searchInputControl.value?"\xa1No se han encontrado grupos!":"\xa1No se ha creado ning\xfan grupo a\xfan!","")}}const Hn=function(n){return{"pointer-events-none":n}},Kn=function(){return[10,25,50,100]};function Vn(n,a){if(1&n&&e._UZ(0,"mat-paginator",41),2&n){const t=e.oxw();e.Q6J("ngClass",e.VKq(6,Hn,t.isLoading))("length",t.pagination.length)("pageIndex",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(8,Kn))("showFirstLastButtons",!0)}}let Wn=(()=>{class n{constructor(t,o,i,r,l,d){this._changeDetectorRef=t,this._fuseConfirmationService=o,this._snackBar=i,this.dialog=r,this._moduleService=l,this.store=d,this.searchInputControl=new s.NI(null),this.isLoading=!1,this._unsubscribeAll=new h.x}ngOnInit(){this.modules$=this.store.select(H),this.store.select(re.B).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,g.R)(this._unsubscribeAll),(0,ee.b)(300),(0,te.O)(null),(0,P.w)(t=>null!==t?(this.isLoading=!0,this._moduleService.getPaginatedMPermissions(0,10,"name","asc",t)):(0,O.of)()),(0,M.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,g.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,se.T)(this._sort.sortChange,this._paginator.page).pipe((0,P.w)(()=>(this.isLoading=!0,this._moduleService.getPaginatedMPermissions(this._paginator.pageIndex,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,M.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createMPermission(){this._openDialog(null,"add")}editMPermission(t){this._openDialog(t,"edit")}deleteMPermission(t){this._fuseConfirmationService.open({title:"Eliminar Submodule",message:`\xbfEst\xe1 seguro que desea eliminar el grupo ${t.name}? Perder\xe1 el acceso a todos los datos asociados al mismo.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._moduleService.removePermission(t.id,this.pagination.page,this.pagination.size,"name","desc").subscribe(({errors:r,data:l})=>{r||this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:l.paginatedRemoveMPermission.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})})}trackByFn(t,o){return o.id||t}_openDialog(t,o){this.dialog.open(Rn,{data:{mPermission:t,dialogMode:o},disableClose:!0,panelClass:"ath-payment-method-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(U.R),e.Y36(J.ux),e.Y36(y.uw),e.Y36(K),e.Y36(k.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["settings-m-permissions"]],viewQuery:function(t,o){if(1&t&&(e.Gf(G.NW,5),e.Gf(D.YE,5)),2&t){let i;e.iGM(i=e.CRH())&&(o._paginator=i.first),e.iGM(i=e.CRH())&&(o._sort=i.first)}},decls:36,vars:14,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","flex-auto","min-w-0","overflow-x-auto","overflow-y-auto","bg-card","dark:bg-transparent","lg:overflow-x-hidden"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-2xl","font-extrabold","leading-tight","tracking-tight","sm:text-2xl"],[1,"flex","flex-wrap","items-center","mt-2","sm:mt-0","shrink-0","sm:ml-4"],[1,"mt-4","mr-4","sm:mt-0","fuse-mat-dense","fuse-mat-no-subscript","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"mt-4","text-white","sm:mt-0","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-col","flex-auto"],[4,"ngIf"],["noMPermissions",""],["class","z-10 border-b sm:inset-x-0 sm:bottom-0 sm:border-t sm:border-b-0 bg-gray-50 dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons",4,"ngIf"],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","m-permissions-table","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[3,"mat-sort-header"],[1,""],[1,"",3,"mat-sort-header"],[1,"pr-4","text-right"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","m-permissions-table","md:px-8"],[1,"truncate"],[1,"mr-4","text-center"],[1,"flex","flex-row","justify-end","gap-2"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"text-green-400","icon-size-5",3,"svgIcon"],[1,"text-red-400","icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"],[1,"z-10","border-b","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"div",3)(5,"div",4)(6,"a",5),e._uU(7,"Inicio"),e.qZA()(),e.TgZ(8,"div",4),e._UZ(9,"mat-icon",6),e.TgZ(10,"a",7),e._uU(11,"Subm\xf3dulos"),e.qZA()()(),e.TgZ(12,"div",8)(13,"a",9),e._UZ(14,"mat-icon",6),e.TgZ(15,"span",10),e._uU(16,"Regresar"),e.qZA()()()(),e.TgZ(17,"div",11)(18,"div",12),e._uU(19," Gesti\xf3n de subm\xf3dulos "),e.qZA()()(),e.TgZ(20,"div",13)(21,"mat-form-field",14),e._UZ(22,"mat-icon",15)(23,"input",16),e.qZA(),e.TgZ(24,"button",17),e.NdJ("click",function(){return o.createMPermission()}),e._UZ(25,"mat-icon",18),e.TgZ(26,"span",19),e._uU(27,"Nuevo"),e.qZA()()()(),e.TgZ(28,"div",20)(29,"div",20),e.YNc(30,zn,2,2,"ng-container",21),e.ALo(31,"async"),e.YNc(32,jn,2,1,"ng-template",null,22,e.W1O),e.qZA(),e.YNc(34,Vn,1,9,"mat-paginator",23),e.ALo(35,"async"),e.qZA()()),2&t&&(e.xp6(9),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_solid:search"),e.xp6(1),e.Q6J("formControl",o.searchInputControl)("autocomplete","off")("placeholder","Buscar subm\xf3dulo"),e.xp6(2),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(5),e.Q6J("ngIf",e.lcZ(31,10,o.modules$)),e.xp6(4),e.Q6J("ngIf",e.lcZ(35,12,o.modules$).length>0))},dependencies:[f.yS,p.mk,p.sg,p.O5,s.Fj,s.JJ,s.oH,B.PQ,q.lW,u.Hw,m.KE,m.qo,Z.Nt,G.NW,D.YE,D.nU,p.Ov],encapsulation:2,data:{animation:le.L},changeDetection:0}),n})();var Xn=c(65359),eo=c(99987),Te=c(98157),de=c(86856);function to(n,a){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar tasa de cambio "),e.qZA())}function no(n,a){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar tasa de cambio "),e.qZA())}function oo(n,a){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.rate.name||"Sin nombre")}}function io(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El nombre de la tasa es obligatorio "),e.qZA())}function ao(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha de la tasa es obligatoria "),e.qZA())}function ro(n,a){if(1&n&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.iso," ")}}function so(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," La moneda de referencia es obligatoria "),e.qZA())}function lo(n,a){if(1&n&&(e.TgZ(0,"mat-option",26),e._uU(1),e.qZA()),2&n){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.iso," ")}}function co(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," La moneda base es obligatoria "),e.qZA())}function mo(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El valor de la tasa es obligatorio "),e.qZA())}function go(n,a){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"mat-form-field",18)(4,"mat-label"),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",19),e.TgZ(7,"mat-hint"),e._uU(8,"Ejemplo: USD/CUP"),e.qZA(),e.YNc(9,io,2,0,"mat-error",6),e.qZA(),e.TgZ(10,"mat-form-field",18)(11,"mat-label"),e._uU(12,"Fecha de la tasa"),e.qZA(),e._UZ(13,"input",20),e.TgZ(14,"mat-hint"),e._uU(15,"DD/MM/YYYY"),e.qZA(),e._UZ(16,"mat-datepicker-toggle",21)(17,"mat-datepicker",null,22),e.YNc(19,ao,2,0,"mat-error",6),e.qZA(),e.TgZ(20,"mat-form-field",18)(21,"mat-label"),e._uU(22,"Moneda de referencia"),e.qZA(),e.TgZ(23,"mat-select",23),e.YNc(24,ro,2,2,"mat-option",24),e.qZA(),e.YNc(25,so,2,0,"mat-error",6),e.TgZ(26,"mat-hint"),e._uU(27,"La moneda de referencia es la primera en el par."),e.qZA()(),e.TgZ(28,"mat-form-field",18)(29,"mat-label"),e._uU(30,"Moneda base"),e.qZA(),e.TgZ(31,"mat-select",23),e.YNc(32,lo,2,2,"mat-option",24),e.qZA(),e.YNc(33,co,2,0,"mat-error",6),e.TgZ(34,"mat-hint"),e._uU(35,"La moneda base es la segunda en el par."),e.qZA()(),e.TgZ(36,"mat-form-field",18)(37,"mat-label"),e._uU(38,"Valor"),e.qZA(),e._UZ(39,"input",25),e.YNc(40,mo,2,0,"mat-error",6),e.qZA()()()()),2&n){const t=e.MAs(18),o=e.oxw();e.xp6(2),e.Q6J("formGroup",o.rateForm)("autocomplete","off"),e.xp6(4),e.Q6J("formControlName","name")("placeholder","Ejemplo: USD/CUP"),e.xp6(3),e.Q6J("ngIf",o.rateForm.get("name").hasError("required")),e.xp6(4),e.Q6J("matDatepicker",t)("formControlName","date")("max",o.maxDate)("required",!0),e.xp6(3),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",o.rateForm.get("date").hasError("required")),e.xp6(4),e.Q6J("formControlName","currencyRefId")("required",!0),e.xp6(1),e.Q6J("ngForOf",o.currencies),e.xp6(1),e.Q6J("ngIf",o.rateForm.get("currencyRefId").hasError("required")),e.xp6(6),e.Q6J("formControlName","currencyBaseId")("required",!0),e.xp6(1),e.Q6J("ngForOf",o.currencies),e.xp6(1),e.Q6J("ngIf",o.rateForm.get("currencyBaseId").hasError("required")),e.xp6(6),e.Q6J("formControlName","value")("placeholder","1.000000"),e.xp6(1),e.Q6J("ngIf",o.rateForm.get("value").hasError("required"))}}function po(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.updateRate())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.rateForm.invalid)("matDialogClose","confirmed")}}function uo(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",29),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.createRate())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.rateForm.invalid)("matDialogClose","confirmed")}}function _o(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",27),e.ynx(2),e.TgZ(3,"button",28),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,po,3,3,"ng-container",6),e.YNc(6,uo,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let ho=(()=>{class n{constructor(t,o,i,r,l,d,C,E){this.data=t,this._ratesService=o,this._changeDetectorRef=i,this._formBuilder=r,this._fuseConfirmationService=l,this._dialogRef=d,this._snackBar=C,this.store=E,this.currencies=[],this.maxDate=new Date,this.dialogMode="view",this._unsubscribeAll=new h.x,this.dialogMode=t.dialogMode,this.rate=t.rate}ngOnInit(){this.rateForm=this._formBuilder.group({id:new s.NI(null),name:new s.NI(null,[s.kI.maxLength(100)]),date:new s.NI(new Date),value:new s.NI(1,[s.kI.min(1)]),currencyRefId:new s.NI(null,[s.kI.maxLength(100)]),currencyBaseId:new s.NI(null,[s.kI.maxLength(100)])}),"edit"===this.dialogMode&&this.rateForm.patchValue(this.rate),this.store.select(eo.zd).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.currencies=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createRate(){let t=this.rateForm.getRawValue();t=(0,Q.Z)(t,["id"]),this._fuseConfirmationService.open({title:"Crear tasa de cambio",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._ratesService.createRate(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.createRate.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateRate(){const t=this.rateForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar tasa de cambio",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(i=>{"confirmed"===i&&this._ratesService.updateRate(t).pipe((0,g.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateRate.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(y.WI),e.Y36(Te.m),e.Y36(e.sBO),e.Y36(s.qu),e.Y36(U.R),e.Y36(y.so),e.Y36(J.ux),e.Y36(k.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["settings-rate-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"grid","grid-cols-1","sm:grid-cols-2","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full","fuse-mat-dense"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["matInput","",3,"matDatepicker","formControlName","max","required"],["matIconSuffix","",3,"for"],["offerDate",""],[3,"formControlName","required"],[3,"value",4,"ngFor","ngForOf"],["matInput","","type","number","required","","min","1",3,"formControlName","placeholder"],[3,"value"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,to,2,0,"h2",2),e.YNc(4,no,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,oo,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,go,41,22,"div",5),e.BQk(),e.qZA(),e.YNc(10,_o,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===o.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===o.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===o.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===o.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==o.data.dialogMode))},dependencies:[p.sg,p.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.nD,s.qQ,s.sg,s.u,w.ey,q.lW,de.Mq,de.hl,de.nW,y.ZT,m.TO,m.KE,m.bx,m.hX,Z.Nt,b.gD],encapsulation:2}),n})();class fo{}function xo(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",31),e.NdJ("change",function(i){e.CHM(t);const r=e.oxw(),l=r.$implicit,d=r.index,C=e.oxw(2);return e.KtG(C.updateRateStatus(i,l,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function vo(n,a){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",32),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function bo(n,a){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",26)(2,"div",20),e._uU(3),e.qZA(),e.TgZ(4,"div",23),e._uU(5),e.qZA(),e.TgZ(6,"div",22),e._uU(7),e.qZA(),e.TgZ(8,"div",22),e._uU(9),e.qZA(),e.TgZ(10,"div",22),e._uU(11),e.ALo(12,"number"),e.qZA(),e.TgZ(13,"div",22),e.YNc(14,xo,2,2,"ng-container",27),e.YNc(15,vo,2,2,"ng-container",27),e.qZA(),e.TgZ(16,"div",28)(17,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.openDialog(r,"edit","80%"))}),e._UZ(18,"mat-icon",30),e.qZA(),e.TgZ(19,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,l=e.oxw(2);return e.KtG(l.deleteRate(r))}),e._UZ(20,"mat-icon",30),e.qZA()()(),e.BQk()}if(2&n){const t=a.$implicit,o=a.index,i=e.oxw(2);e.xp6(3),e.hij(" ",o+1," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.currencyRef.iso," "),e.xp6(2),e.hij(" ",t.currencyBase.iso," "),e.xp6(2),e.hij(" ",e.xi3(12,9,t.value,"1.1-5")," "),e.xp6(3),e.Q6J("ngIf",!(i.isSlideLoading&&i.selectedSlide===o)),e.xp6(1),e.Q6J("ngIf",i.isSlideLoading&&i.selectedSlide===o),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}const Co=function(n){return{"pointer-events-none":n}},Zo=function(){return[5,10,25,100]};function No(n,a){if(1&n&&(e.ynx(0),e.TgZ(1,"div",18)(2,"div",19),e._UZ(3,"div",20),e.TgZ(4,"div",21),e._uU(5," Nombre "),e.qZA(),e.TgZ(6,"div",22),e._uU(7," Referencia "),e.qZA(),e.TgZ(8,"div",22),e._uU(9," Base "),e.qZA(),e.TgZ(10,"div",22),e._uU(11," Valor "),e.qZA(),e.TgZ(12,"div",22),e._uU(13," Activo "),e.qZA(),e.TgZ(14,"div",23),e._uU(15," Acciones "),e.qZA()(),e.YNc(16,bo,21,12,"ng-container",24),e._UZ(17,"mat-paginator",25),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(12),e.Q6J("ngForOf",t.rates)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("ngClass",e.VKq(9,Co,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(11,Zo))("showFirstLastButtons",!0)}}function To(n,a){1&n&&(e.TgZ(0,"div",33),e._uU(1," \xa1No hay tasas de cambio creadas para el negocio!"),e.qZA())}let yo=(()=>{class n{constructor(t,o,i,r,l,d){this._ratesService=t,this._changeDetectorRef=o,this._dialog=i,this._fuseConfirmationService=r,this._snackBar=l,this.store=d,this.rate=new fo,this.rates=[],this.isLoading=!1,this.isSlideLoading=!1,this.searchInputControl=new s.NI,this.selectedSlide=null,this._unsubscribeAll=new h.x}ngOnInit(){this.store.select(Xn.I).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.rates=t,this._changeDetectorRef.markForCheck()}),this.store.select(re.B).pipe((0,g.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"code",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,g.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,se.T)(this._sort.sortChange,this._paginator.page).pipe((0,P.w)(()=>(this.isLoading=!0,this._ratesService.getRates(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,M.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteRate(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la tasa de cambio: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,g.R)(this._unsubscribeAll)).subscribe(i=>{"confirmed"===i&&this._ratesService.removeRate(t.id).pipe((0,g.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.removeRate.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateRateStatus(t,o,i){this.isSlideLoading=!0,this.selectedSlide=i,this._ratesService.updateRateStatus({id:o.id,active:t.checked}).subscribe(({data:r})=>{this._snackBar.openFromComponent(x.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateRateStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,o){return o.id||t}openDialog(t,o){this._dialog.open(ho,{data:{rate:t,dialogMode:o},width:"90%",panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Te.m),e.Y36(e.sBO),e.Y36(y.uw),e.Y36(U.R),e.Y36(J.ux),e.Y36(k.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["settings-rates"]],viewQuery:function(t,o){if(1&t&&(e.Gf(G.NW,5),e.Gf(D.YE,5)),2&t){let i;e.iGM(i=e.CRH())&&(o._paginator=i.first),e.iGM(i=e.CRH())&&(o._sort=i.first)}},decls:28,vars:5,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noRates",""],[1,"grid","overflow-auto"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","rates-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"text-left"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","rates-grid","md:px-8"],[4,"ngIf"],[1,"flex","items-center","justify-start","gap-1","flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ajustes"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Tasas"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Tasas de cambio "),e.qZA()()(),e.TgZ(18,"div",10)(19,"button",11),e.NdJ("click",function(){return o.openDialog(o.rate,"add")}),e._UZ(20,"mat-icon",12),e.TgZ(21,"span",13),e._uU(22,"Agregar"),e.qZA()()()(),e.TgZ(23,"div",14)(24,"div",15),e.YNc(25,No,18,12,"ng-container",16),e.YNc(26,To,2,0,"ng-template",null,17,e.W1O),e.qZA()()()),2&t){const i=e.MAs(27);e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",o.rates.length>0)("ngIfElse",i)}},dependencies:[f.yS,p.mk,p.sg,p.O5,q.lW,u.Hw,G.NW,he.Ou,N.Rr,D.YE,D.nU,p.JJ],encapsulation:2,changeDetection:0}),n})();var ge=c(50199);let Io=(()=>{class n{constructor(t){this._moduleService=t}resolve(t,o){return this._moduleService.getPaginatedMPermissions()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(K))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ao=(()=>{class n{constructor(t){this._moduleService=t}resolve(t,o){return this._moduleService.getMPermissions()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(K))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ko=(()=>{class n{constructor(t){this._moduleService=t}resolve(t,o){return this._moduleService.getPermissionsNinModules()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(K))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mo=(()=>{class n{constructor(t){this._navigationService=t}resolve(t,o){return this._navigationService.getRootNavigationNodes()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(me))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Fo=c(90810),Qo=c(24213);const Uo=[{path:"g-modules",component:lt,resolve:{modules:ge.WM}},{path:"g-modules/:gModuleId",component:$e,resolve:{permissions:ko,gModule:ge.pT}},{path:"m-permissions",component:Wn,resolve:{mPermissions:Io}},{path:"navigations",component:Nn,resolve:{navigation:Mo,gModule:ge.V,mPermissions:Ao}},{path:"rates",component:yo,resolve:{currencies:Fo.Y,rates:Qo.L}},{path:"merchants",loadChildren:()=>Promise.all([c.e(5507),c.e(768),c.e(8592),c.e(781)]).then(c.bind(c,60781)).then(n=>n.MerchantsModule),title:"BALANC - Mi Negocio"},{path:"roles",loadChildren:()=>Promise.all([c.e(8592),c.e(2356)]).then(c.bind(c,92356)).then(n=>n.RolesModule),title:"BALANC - Gesti\xf3n Roles y Permisos"}];let Jo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[f.Bz.forChild(Uo),A.m,T.PU]}),n})()}}]);