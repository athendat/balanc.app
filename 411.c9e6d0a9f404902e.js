"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[411],{90810:(ee,P,l)=>{l.d(P,{Y:()=>D});var y=l(5e3),J=l(63334);let D=(()=>{class Q{constructor(N){this._currenciesService=N}resolve(N,b){return this._currenciesService.getCurrencies()}}return Q.\u0275fac=function(N){return new(N||Q)(y.LFG(J.t))},Q.\u0275prov=y.Yz7({token:Q,factory:Q.\u0275fac,providedIn:"root"}),Q})()},99987:(ee,P,l)=>{l.d(P,{zd:()=>Q});var y=l(85094);const J=e=>e.currencies,Q=((0,y.P1)(J,e=>e.currency),(0,y.P1)(J,e=>e.currencies))},63334:(ee,P,l)=>{l.d(P,{t:()=>p});var y=l(95698),J=l(63900),D=l(18505),Q=l(45840),e=l(60230),N=l(99987),b=l(59784),_=l(33921);const L=_.Ps`
    mutation CreateCurrency($createCurrencyInput: CreateCurrencyInput!) {
        createCurrency(createCurrencyInput: $createCurrencyInput) {

            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }

        }
    }
`,T=_.Ps`
mutation UpdateCurrency($updateCurrencyInput: UpdateCurrencyInput!) {
    updateCurrency(updateCurrencyInput: $updateCurrencyInput) {
        ok
        message

        currency {
            id
            active
            name
            iso
            symbol
        }
    }
}
`,m=_.Ps`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateCurrencyStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }
    }
`,te=_.Ps`
mutation RemoveCurrency($removeCurrencyId: String!) {
    removeCurrency(id: $removeCurrencyId) {
        ok,
        message
    }
}
`,a=_.Ps`
    query FindAllCurrencies {
        findAllCurrencies {
            ok
            message

            currencies {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`,g=_.Ps`
    query FindCurrencyById($findCurrencyByIdId: String!) {
        findCurrencyById(id: $findCurrencyByIdId) {
            ok
            message

            currency {
                id
                active
                name
                iso
                symbol
            }
        }
    }
`;var U=l(5e3),W=l(57261),Z=l(85094);let p=(()=>{class v{constructor(u,w,C){this.apolloProvider=u,this._snackBar=w,this.store=C,this._apollo=this.apolloProvider.use("BALANC")}createCurrency(u){return this.store.select(N.zd).pipe((0,y.q)(1),(0,J.w)(w=>this._apollo.mutate({mutation:L,variables:{createCurrencyInput:u},errorPolicy:"all"}).pipe((0,D.b)(({errors:C,data:I})=>{if(C){let k="";C.forEach(M=>k+=`\n ${M.message}.`),this._snackBar.openFromComponent(b.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:k,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const F=(0,Q.Z)(w);F.push(I.createCurrency.currency),this.store.dispatch((0,e.HC)({currencies:F}))}))))}getCurrencies(){return this._apollo.query({query:a,errorPolicy:"all"}).pipe((0,D.b)(({errors:u,data:w})=>{if(u){let C="";u.forEach(I=>C+=`\n ${I.message}.`),this._snackBar.openFromComponent(b.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:C,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,e.HC)({currencies:w.findAllCurrencies.currencies}))}))}getCurrencyById(u){return this._apollo.query({query:g,variables:{findCurrencyByIdId:u},errorPolicy:"all"}).pipe((0,D.b)(({errors:w,data:C})=>{if(w){let I="";w.forEach(F=>I+=`\n ${F.message}.`),this._snackBar.openFromComponent(b.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:I,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,e.NW)({currency:C.findCurrencyById.currency}))}))}updateCurrency(u){return this.store.select(N.zd).pipe((0,y.q)(1),(0,J.w)(w=>this._apollo.mutate({mutation:T,variables:{updateCurrencyInput:u},errorPolicy:"all"}).pipe((0,D.b)(({errors:C,data:I})=>{if(C){let M="";C.forEach(ne=>M+=`\n ${ne.message}.`),this._snackBar.openFromComponent(b.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:M,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const F=(0,Q.Z)(w);F[w.findIndex(M=>M.id===u.id)]=I.updateCurrency.currency,this.store.dispatch((0,e.HC)({currencies:F}))}))))}updateCurrencyStatus(u){return this.store.select(N.zd).pipe((0,y.q)(1),(0,J.w)(w=>this._apollo.mutate({mutation:m,variables:{updateEntityStatusInput:u},errorPolicy:"all"}).pipe((0,D.b)(({errors:C})=>{if(C){let k="";C.forEach(M=>k+=`\n ${M.message}.`),this._snackBar.openFromComponent(b.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:k,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const I=(0,Q.Z)(w);I[w.findIndex(k=>k.id===u.id)].active=u.active,this.store.dispatch((0,e.HC)({currencies:I}))}))))}removeCurrency(u){return this.store.select(N.zd).pipe((0,y.q)(1),(0,J.w)(w=>this._apollo.mutate({mutation:te,variables:{removeCurrencyId:u},errorPolicy:"all"}).pipe((0,D.b)(({errors:C})=>{if(C){let k="";C.forEach(M=>k+=`\n ${M.message}.`),this._snackBar.openFromComponent(b.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:k,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const I=(0,Q.Z)(w),F=w.findIndex(k=>k.id===u);I.splice(F,1),this.store.dispatch((0,e.HC)({currencies:I}))}))))}}return v.\u0275fac=function(u){return new(u||v)(U.LFG(_._M),U.LFG(W.ux),U.LFG(Z.yh))},v.\u0275prov=U.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},80411:(ee,P,l)=>{l.r(P),l.d(P,{ListsModule:()=>fo});var y=l(35357),J=l(83877),D=l(8314),Q=l(17460),e=l(5e3);let N=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-lists"]],decls:1,vars:0,template:function(t,i){1&t&&e._UZ(0,"router-outlet")},dependencies:[y.lC],encapsulation:2}),n})();var b=l(86087),_=l(84847),L=l(39646),T=l(77579),m=l(82722),te=l(99987),a=l(93075),g=l(48966),U=l(89116),W=l(63334),Z=l(71683),p=l(69808),v=l(47423),h=l(67322),u=l(98833);function w(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Moneda "),e.qZA())}function C(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar Moneda "),e.qZA())}function I(n,s){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.currency.name||"Sin nombre")}}function F(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"mat-form-field",18)(4,"mat-label"),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",19),e.qZA(),e.TgZ(7,"mat-form-field",18)(8,"mat-label"),e._uU(9,"Nombre en el Versat"),e.qZA(),e._UZ(10,"input",20),e.qZA(),e.TgZ(11,"mat-form-field",18)(12,"mat-label"),e._uU(13,"ISO"),e.qZA(),e._UZ(14,"input",21),e.qZA(),e.TgZ(15,"mat-form-field",18)(16,"mat-label"),e._uU(17,"S\xedmbolo"),e.qZA(),e._UZ(18,"input",22),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.currencyForm)("autocomplete","off"),e.xp6(4),e.Q6J("formControlName","name")("placeholder","Ejemplo: D\xf3lar Estadounidense"),e.xp6(4),e.Q6J("formControlName","namev")("placeholder","Ejemplo: D\xf3lar Estadounidense"),e.xp6(4),e.Q6J("formControlName","iso")("placeholder","Ejemplo: USD"),e.xp6(4),e.Q6J("formControlName","symbol")("placeholder","Ejemplo: $")}}function k(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateCurrency())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.currencyForm.invalid)("matDialogClose","confirmed")}}function M(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createCurrency())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.currencyForm.invalid)("matDialogClose","confirmed")}}function ne(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",23),e.ynx(2),e.TgZ(3,"button",24),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,k,3,3,"ng-container",6),e.YNc(6,M,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let he=(()=>{class n{constructor(t,i,o,r,c,d){this.data=t,this._currenciesService=i,this._changeDetectorRef=o,this._formBuilder=r,this._fuseConfirmationService=c,this._dialogRef=d,this.dialogMode="view",this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.currency=t.currency}ngOnInit(){this.currencyForm=this._formBuilder.group({id:new a.NI(null),name:new a.NI(null,[a.kI.maxLength(50)]),namev:new a.NI(null,[a.kI.maxLength(50)]),iso:new a.NI(null,[a.kI.maxLength(5)]),symbol:new a.NI(null,[a.kI.maxLength(5)])}),"edit"===this.dialogMode&&this.currencyForm.patchValue(this.currency)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createCurrency(){let t=this.currencyForm.getRawValue();t=(0,U.Z)(t,["id"]),this._fuseConfirmationService.open({title:"Crear Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._currenciesService.createCurrency(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda creada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateCurrency(){const t=this.currencyForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._currenciesService.updateCurrency(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda actualizada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.WI),e.Y36(W.t),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(Z.R),e.Y36(g.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-currency-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],["matInput","","type","text","maxlength","50",3,"formControlName","placeholder"],["matInput","","type","text","required","","maxlength","5",3,"formControlName","placeholder"],["matInput","","type","text","maxlength","5",3,"formControlName","placeholder"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,w,2,0,"h2",2),e.YNc(4,C,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,I,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,F,19,10,"div",5),e.BQk(),e.qZA(),e.YNc(10,ne,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,v.lW,g.ZT,h.KE,h.hX,u.Nt],encapsulation:2}),n})();var f=l(59784);class xe{}var S=l(57261),Y=l(85094),q=l(25245),O=l(20773),B=l(32368);function ve(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",30),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(),c=r.$implicit,d=r.index,x=e.oxw(4);return e.KtG(x.updateCurrencyStatus(o,c,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function ye(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",31),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function be(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",24)(2,"div",25),e._uU(3),e.qZA(),e.TgZ(4,"div",25),e._uU(5),e.qZA(),e.TgZ(6,"div",25),e._uU(7),e.qZA(),e.TgZ(8,"div",25),e._uU(9),e.qZA(),e.TgZ(10,"div",26),e.YNc(11,ve,2,2,"ng-container",16),e.YNc(12,ye,2,2,"ng-container",16),e.qZA(),e.TgZ(13,"div",27)(14,"button",28),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.openDialog(r,"edit","80%"))}),e._UZ(15,"mat-icon",29),e.qZA(),e.TgZ(16,"button",28),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteCurrency(r))}),e._UZ(17,"mat-icon",29),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(4);e.xp6(3),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.namev," "),e.xp6(2),e.hij(" ",t.iso," "),e.xp6(2),e.hij(" ",t.symbol," "),e.xp6(2),e.Q6J("ngIf",!(o.isLoading&&o.selectedSlide===i)),e.xp6(1),e.Q6J("ngIf",o.isLoading&&o.selectedSlide===i),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function Ce(n,s){if(1&n&&(e.ynx(0),e.YNc(1,be,18,8,"ng-container",23),e.BQk()),2&n){const t=s.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function Te(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19)(2,"div",20)(3,"div",21),e._uU(4," Nombre "),e.qZA(),e.TgZ(5,"div",21),e._uU(6," Nombre en el Versat "),e.qZA(),e.TgZ(7,"div"),e._uU(8," ISO "),e.qZA(),e.TgZ(9,"div"),e._uU(10," S\xedmbolo "),e.qZA(),e.TgZ(11,"div",22),e._uU(12," Activo "),e.qZA(),e.TgZ(13,"div",22),e._uU(14," Acciones "),e.qZA()(),e.YNc(15,Ce,2,2,"ng-container",16),e.ALo(16,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","name"),e.xp6(2),e.Q6J("mat-sort-header","namev"),e.xp6(10),e.Q6J("ngIf",e.lcZ(16,3,t.currencies$))}}function Ze(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Te,17,5,"ng-container",18),e.BQk()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(28);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function we(n,s){1&n&&(e.TgZ(0,"div",32),e._uU(1," \xa1No hay monedas creadas para la tienda!"),e.qZA())}let ke=(()=>{class n{constructor(t,i,o,r,c,d){this._currenciesService=t,this._changeDetectorRef=i,this._dialog=o,this._fuseConfirmationService=r,this._snackBar=c,this.store=d,this.currencies$=(0,L.of)([]),this.currency=new xe,this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new T.x}ngOnInit(){this.currencies$=this.store.select(te.zd)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteCurrency(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la moneda: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._currenciesService.removeCurrency(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Moneda eliminada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}updateCurrencyStatus(t,i,o){this.isLoading=!0,this.selectedSlide=o,this._currenciesService.updateCurrencyStatus({id:i.id,active:t.checked}).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateCurrency.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,i){return i.id||t}openDialog(t,i){this._dialog.open(he,{data:{currency:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(W.t),e.Y36(e.sBO),e.Y36(g.uw),e.Y36(Z.R),e.Y36(S.ux),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-currencies"]],viewQuery:function(t,i){if(1&t&&(e.Gf(b.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:29,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noCurrencies",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","currencies-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","currencies-grid","md:px-8"],[1,"truncate"],[1,"hidden","text-center","sm:block"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ajustes"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Monedas"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Monedas "),e.qZA()()(),e.TgZ(18,"div",10)(19,"button",11),e.NdJ("click",function(){return i.openDialog(i.currency,"add")}),e._UZ(20,"mat-icon",12),e.TgZ(21,"span",13),e._uU(22,"Agregar"),e.qZA()()()(),e.TgZ(23,"div",14)(24,"div",15),e.YNc(25,Ze,2,2,"ng-container",16),e.ALo(26,"async"),e.YNc(27,we,2,0,"ng-template",null,17,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(26,4,i.currencies$)))},dependencies:[y.yS,p.sg,p.O5,v.lW,q.Hw,O.Ou,B.Rr,_.YE,_.nU,p.Ov],encapsulation:2,changeDetection:0}),n})();var G=l(56451),H=l(78372),X=l(68675),R=l(63900),E=l(54004),Ae=l(96008),re=l(50123),ae=l(7903),ce=l(97231),ie=l(90508);function Ie(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar m\xe9todo de pago "),e.qZA())}function Le(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar m\xe9todo de pago "),e.qZA())}function Qe(n,s){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.paymentMethod.name||"Sin nombre")}}function Fe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"input",28,29),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.openCropperDialog(o))}),e.qZA(),e.TgZ(3,"label",30),e._UZ(4,"mat-icon",31),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","mat_solid:photo_camera"))}function Me(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",32)(1,"button",33),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.removeImage())}),e._UZ(2,"mat-icon",34),e.qZA()()}2&n&&(e.xp6(2),e.Q6J("svgIcon","mat_solid:delete"))}function Se(n,s){if(1&n&&e._UZ(0,"img",35),2&n){const t=e.oxw(2);e.Q6J("src",t.paymentMethodForm.get("logo").value,e.LSH)}}const Je=function(n){return{"bg-gray-200 mt-8":n}};function De(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()(),e.TgZ(8,"div",21)(9,"span",22),e._uU(10,"Estado"),e.qZA(),e.TgZ(11,"mat-slide-toggle",23),e._uU(12),e.qZA()(),e.TgZ(13,"div",24)(14,"div",25),e.YNc(15,Fe,5,3,"div",6),e.YNc(16,Me,3,1,"div",26),e.qZA(),e.YNc(17,Se,1,1,"img",27),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.paymentMethodForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Ejemplo: Transferencia"),e.xp6(4),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===t.paymentMethodForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(1),e.Q6J("ngClass",e.VKq(11,Je,!t.paymentMethodForm.get("logo").value)),e.xp6(2),e.Q6J("ngIf",!t.paymentMethodForm.get("logo").value),e.xp6(1),e.Q6J("ngIf",t.paymentMethodForm.get("logo").value),e.xp6(1),e.Q6J("ngIf",t.paymentMethodForm.get("logo").value)}}function Ne(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updatePaymentMethod())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.paymentMethodForm.invalid)("matDialogClose","confirmed")}}function Ue(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",38),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createPaymentMethod())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.paymentMethodForm.invalid)("matDialogClose","confirmed")}}function qe(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",36),e.ynx(2),e.TgZ(3,"button",37),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Ne,3,3,"ng-container",6),e.YNc(6,Ue,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Be=(()=>{class n{constructor(t,i,o,r,c,d,x,K,A){this.data=t,this._paymentMethodsService=i,this._changeDetectorRef=o,this._formBuilder=r,this._fuseConfirmationService=c,this._dialogRef=d,this._dialog=x,this._imagesService=K,this._snackBar=A,this.dialogMode="view",this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.paymentMethod=Object.assign({},t.paymentMethod),delete this.paymentMethod.__typename}ngOnInit(){this.paymentMethodForm=this._formBuilder.group({id:new a.NI(null),name:new a.NI(null,[a.kI.maxLength(50)]),active:[!1],logo:[null]}),"edit"===this.dialogMode&&this.paymentMethodForm.patchValue(this.paymentMethod)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createPaymentMethod(){const t=this.paymentMethodForm.getRawValue();delete t.id,this._fuseConfirmationService.open({title:"Crear m\xe9todo de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._paymentMethodsService.createPaymentMethod(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.createPaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updatePaymentMethod(){const t=this.paymentMethodForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar m\xe9todo de pago",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._paymentMethodsService.updatePaymentMethod(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updatePaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}openCropperDialog(t){this._dialog.open(re.u,{data:{image:t},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(o=>{o.size/1024/1024>1?this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"Tama\xf1o demasiado grande. La imagen no debe superar a 1MB",title:"Confirmaci\xf3n",type:"error",svgIcon:"heroicons_solid:check"}}):this._imagesService.uploadImage("List",o).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this.paymentMethodForm.get("logo").setValue(r.imageUrl),this.paymentMethod.logo=r.imageUrl,"edit"===this.dialogMode?this._paymentMethodsService.updatePaymentMethod(this.paymentMethod).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:c})=>{c&&(this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.updatePaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck())}):this._changeDetectorRef.markForCheck()},r=>{console.warn(r)})})}removeImage(){const t=this.paymentMethodForm.get("logo").value;this._fuseConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar la imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._imagesService.removeImage(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this.paymentMethodForm.get("logo").setValue(null),this.paymentMethod.logo=null,"edit"===this.dialogMode&&this._paymentMethodsService.updatePaymentMethod(this.paymentMethod).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:c})=>{c&&this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.WI),e.Y36(ae.o),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(Z.R),e.Y36(g.so),e.Y36(g.uw),e.Y36(ce.C),e.Y36(S.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-payment-method-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","h-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","255",3,"formControlName","placeholder"],[1,"flex","flex-col","mt-4"],[1,"mb-4","font-medium"],[3,"formControlName","color"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-md","dark:bg-gray-600","ring-4","ring-bg-card",3,"ngClass"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["class","self-end",4,"ngIf"],["class","object-contain w-full h-full",3,"src",4,"ngIf"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["thumbnailFileInput",""],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-primary",3,"svgIcon"],[1,"self-end"],["mat-icon-button","",3,"click"],[1,"text-red-700",3,"svgIcon"],[1,"object-contain","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Ie,2,0,"h2",2),e.YNc(4,Le,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Qe,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,De,18,13,"div",5),e.BQk(),e.qZA(),e.YNc(10,qe,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[p.mk,p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,v.lW,g.ZT,q.Hw,h.KE,h.hX,u.Nt,ie.wG,B.Rr],encapsulation:2}),n})();class Ye{}var j=l(86428);function Re(n,s){if(1&n&&e._UZ(0,"img",39),2&n){const t=e.oxw().$implicit;e.Q6J("alt","PM Logo")("src",t.logo,e.LSH)}}function Oe(n,s){1&n&&(e.TgZ(0,"div",40),e._uU(1," SIN LOGO "),e.qZA())}function Ee(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",41),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(),c=r.$implicit,d=r.index,x=e.oxw(4);return e.KtG(x.updatePaymentMethodStatus(o,c,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function Pe(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",42),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function ze(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29)(2,"div",30)(3,"div",31),e.YNc(4,Re,1,2,"img",32),e.YNc(5,Oe,2,0,"div",33),e.qZA()(),e.TgZ(6,"div",34),e._uU(7),e.qZA(),e.TgZ(8,"div",35),e.YNc(9,Ee,2,2,"ng-container",19),e.YNc(10,Pe,2,2,"ng-container",19),e.qZA(),e.TgZ(11,"div",36)(12,"button",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.openDialog(r,"edit","80%"))}),e._UZ(13,"mat-icon",38),e.qZA(),e.TgZ(14,"button",37),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deletePaymentMethod(r))}),e._UZ(15,"mat-icon",38),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(4);e.xp6(4),e.Q6J("ngIf",t.logo),e.xp6(1),e.Q6J("ngIf",!t.logo),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",!(o.isLoading&&o.selectedSlide===i)),e.xp6(1),e.Q6J("ngIf",o.isLoading&&o.selectedSlide===i),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function $e(n,s){if(1&n&&(e.ynx(0),e.YNc(1,ze,16,7,"ng-container",28),e.BQk()),2&n){const t=s.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const Ge=function(n){return{"pointer-events-none":n}},je=function(){return[5,10,25,100]};function Ve(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23),e._UZ(3,"div"),e.TgZ(4,"div",24),e._uU(5," Nombre "),e.qZA(),e.TgZ(6,"div",25),e._uU(7," Activo "),e.qZA(),e.TgZ(8,"div",26),e._uU(9," Acciones "),e.qZA()(),e.YNc(10,$e,2,2,"ng-container",19),e.ALo(11,"async"),e._UZ(12,"mat-paginator",27),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(6),e.Q6J("ngIf",e.lcZ(11,8,t.paymentMethods$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Ge,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,je))("showFirstLastButtons",!0)}}function He(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Ve,13,13,"ng-container",21),e.BQk()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Ke(n,s){1&n&&(e.TgZ(0,"div",43),e._uU(1," \xa1No hay m\xe9todos de pago creadas para la tienda!"),e.qZA())}let We=(()=>{class n{constructor(t,i,o,r,c,d){this._changeDetectorRef=t,this._dialog=i,this._fuseConfirmationService=o,this._paymentMethodsService=r,this._snackBar=c,this.store=d,this.isLoading=!1,this.paymentMethod=new Ye,this.paymentMethods$=(0,L.of)([]),this.searchInputControl=new a.NI(null),this.selectedSlide=null,this._unsubscribeAll=new T.x}ngOnInit(){this.paymentMethods$=this.store.select(Ae.VS),this.store.select(j.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,H.b)(300),(0,X.O)(null),(0,R.w)(t=>null!==t?(this.isLoading=!0,this._paymentMethodsService.getPaymentMethods(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t)):(0,L.of)()),(0,E.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,R.w)(()=>(this.isLoading=!0,this._paymentMethodsService.getPaymentMethods(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deletePaymentMethod(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el m\xe9todo de pago: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._paymentMethodsService.removePaymentMethod(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.removePaymentMethod.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updatePaymentMethodStatus(t,i,o){this.isLoading=!0,this.selectedSlide=o,this._paymentMethodsService.updatePaymentMethodStatus({id:i.id,active:t.checked}).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{r&&(this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updatePaymentMethodStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this._changeDetectorRef.markForCheck())})}trackByFn(t,i){return i.id||t}openDialog(t,i){this._dialog.open(Be,{data:{paymentMethod:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(g.uw),e.Y36(Z.R),e.Y36(ae.o),e.Y36(S.ux),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-payment-methods"]],viewQuery:function(t,i){if(1&t&&(e.Gf(b.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noPaymentMethods",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","small-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","small-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],[1,"flex","justify-center","mr-4","text-center"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Nomencladores"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"M\xe9todos de pago"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," M\xe9todos de pago "),e.qZA()()(),e.TgZ(18,"div",10)(19,"mat-form-field",11),e._UZ(20,"mat-icon",12)(21,"input",13),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return i.openDialog(i.paymentMethod,"add")}),e._UZ(23,"mat-icon",15),e.TgZ(24,"span",16),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",18),e.YNc(28,He,2,2,"ng-container",19),e.ALo(29,"async"),e.YNc(30,Ke,2,0,"ng-template",null,20,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:search"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.xp6(2),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,i.paymentMethods$)))},dependencies:[y.yS,p.mk,p.sg,p.O5,a.Fj,a.JJ,a.oH,v.lW,q.Hw,h.KE,h.qo,u.Nt,b.NW,O.Ou,B.Rr,_.YE,_.nU,p.Ov],encapsulation:2,changeDetection:0}),n})();var Xe=l(66592),le=l(34875);function et(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar tipo de comprobante "),e.qZA())}function tt(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar tipo de comprobante "),e.qZA())}function nt(n,s){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.voucher.name||"Sin nombre")}}function it(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.voucherForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Ejemplo: Transferencia")}}function ot(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateVoucher())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.voucherForm.invalid)("matDialogClose","confirmed")}}function st(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createVoucher())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.voucherForm.invalid)("matDialogClose","confirmed")}}function rt(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",21),e.ynx(2),e.TgZ(3,"button",22),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,ot,3,3,"ng-container",6),e.YNc(6,st,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let at=(()=>{class n{constructor(t,i,o,r,c,d){this.data=t,this._VouchersService=i,this._changeDetectorRef=o,this._formBuilder=r,this._fuseConfirmationService=c,this._dialogRef=d,this.dialogMode="view",this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.voucher=t.voucher}ngOnInit(){this.voucherForm=this._formBuilder.group({id:new a.NI(null),name:new a.NI(null,[a.kI.maxLength(50)])}),"edit"===this.dialogMode&&this.voucherForm.patchValue(this.voucher)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createVoucher(){let t=this.voucherForm.getRawValue();t=(0,U.Z)(t,["id"]),this._fuseConfirmationService.open({title:"Crear tipo de comprobante",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._VouchersService.createVoucher(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Tipo de comprobante creado correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateVoucher(){const t=this.voucherForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar tipo de comprobante",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._VouchersService.updateVoucher(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Tipo de comprobante actualizado correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.WI),e.Y36(le.S),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(Z.R),e.Y36(g.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-voucher-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","255",3,"formControlName","placeholder"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,et,2,0,"h2",2),e.YNc(4,tt,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,nt,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,it,8,4,"div",5),e.BQk(),e.qZA(),e.YNc(10,rt,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,v.lW,g.ZT,h.KE,h.hX,u.Nt],encapsulation:2}),n})();class ct{}function lt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",31),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(),c=r.$implicit,d=r.index,x=e.oxw(4);return e.KtG(x.updateVoucherStatus(o,c,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function mt(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",32),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function dt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",25)(2,"div",26),e._uU(3),e.qZA(),e.TgZ(4,"div",26),e._uU(5),e.qZA(),e.TgZ(6,"div",27),e.YNc(7,lt,2,2,"ng-container",16),e.YNc(8,mt,2,2,"ng-container",16),e.qZA(),e.TgZ(9,"div",28)(10,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.openDialog(r,"edit","80%"))}),e._UZ(11,"mat-icon",30),e.qZA(),e.TgZ(12,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteVoucher(r))}),e._UZ(13,"mat-icon",30),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(4);e.xp6(3),e.hij(" ",i+1," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",!(o.isLoading&&o.selectedSlide===i)),e.xp6(1),e.Q6J("ngIf",o.isLoading&&o.selectedSlide===i),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function pt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,dt,14,6,"ng-container",24),e.BQk()),2&n){const t=s.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}function gt(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19)(2,"div",20),e._UZ(3,"div"),e.TgZ(4,"div",21),e._uU(5," Nombre "),e.qZA(),e.TgZ(6,"div",22),e._uU(7," Activo "),e.qZA(),e.TgZ(8,"div",23),e._uU(9," Acciones "),e.qZA()(),e.YNc(10,pt,2,2,"ng-container",16),e.ALo(11,"async"),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(6),e.Q6J("ngIf",e.lcZ(11,2,t.vouchers$))}}function _t(n,s){if(1&n&&(e.ynx(0),e.YNc(1,gt,12,4,"ng-container",18),e.BQk()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(28);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function ut(n,s){1&n&&(e.TgZ(0,"div",33),e._uU(1," \xa1No hay tipos de comprobantes creados para la tienda!"),e.qZA())}let ft=(()=>{class n{constructor(t,i,o,r,c,d){this._changeDetectorRef=t,this._dialog=i,this._fuseConfirmationService=o,this._vouchersService=r,this._snackBar=c,this.store=d,this.vouchers$=(0,L.of)([]),this.voucher=new ct,this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new T.x}ngOnInit(){this.vouchers$=this.store.select(Xe.a)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteVoucher(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el tipo de comprobante: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._vouchersService.removeVoucher(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.removeVoucher.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}updateVoucherStatus(t,i,o){this.isLoading=!0,this.selectedSlide=o,this._vouchersService.updateVoucherStatus({id:i.id,active:t.checked}).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateVoucherStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,i){return i.id||t}openDialog(t,i){this._dialog.open(at,{data:{voucher:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(g.uw),e.Y36(Z.R),e.Y36(le.S),e.Y36(S.ux),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-vouchers"]],viewQuery:function(t,i){if(1&t&&(e.Gf(b.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:29,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noVouchers",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","small-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","small-grid","md:px-8"],[1,"truncate"],[1,"flex","justify-center"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ajustes"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Tipos de comprobantes"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Tipos de comprobantes "),e.qZA()()(),e.TgZ(18,"div",10)(19,"button",11),e.NdJ("click",function(){return i.openDialog(i.voucher,"add")}),e._UZ(20,"mat-icon",12),e.TgZ(21,"span",13),e._uU(22,"Agregar"),e.qZA()()()(),e.TgZ(23,"div",14)(24,"div",15),e.YNc(25,_t,2,2,"ng-container",16),e.ALo(26,"async"),e.YNc(27,ut,2,0,"ng-template",null,17,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(26,4,i.vouchers$)))},dependencies:[y.yS,p.sg,p.O5,v.lW,q.Hw,O.Ou,B.Rr,_.YE,_.nU,p.Ov],encapsulation:2,changeDetection:0}),n})();var ht=l(31366),xt=l(92690),me=l(14023);function vt(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Combustible "),e.qZA())}function yt(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar Combustible "),e.qZA())}function bt(n,s){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.fuel.name||"Sin nombre")}}function Ct(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"mat-form-field",18)(4,"mat-label"),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",19),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.fuelForm)("autocomplete","off"),e.xp6(4),e.Q6J("formControlName","name")("placeholder","Ejemplo: Gasolina")}}function Tt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateFuel())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.fuelForm.invalid)("matDialogClose","confirmed")}}function Zt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createFuel())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.fuelForm.invalid)("matDialogClose","confirmed")}}function wt(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",20),e.ynx(2),e.TgZ(3,"button",21),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Tt,3,3,"ng-container",6),e.YNc(6,Zt,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let kt=(()=>{class n{constructor(t,i,o,r,c,d){this.data=t,this._fuelsService=i,this._changeDetectorRef=o,this._formBuilder=r,this._fuseConfirmationService=c,this._dialogRef=d,this.dialogMode="view",this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.fuel=t.fuel}ngOnInit(){this.fuelForm=this._formBuilder.group({id:new a.NI(null),name:new a.NI(null,[a.kI.maxLength(100)])}),"edit"===this.dialogMode&&this.fuelForm.patchValue(this.fuel)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createFuel(){let t=this.fuelForm.getRawValue();t=(0,U.Z)(t,["id"]),this._fuseConfirmationService.open({title:"Crear combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._fuelsService.createFuel(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.createFuel.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateFuel(){const t=this.fuelForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._fuelsService.updateFuel(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.updateFuel.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.WI),e.Y36(me.f),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(Z.R),e.Y36(g.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-fuel-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,vt,2,0,"h2",2),e.YNc(4,yt,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,bt,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,Ct,7,4,"div",5),e.BQk(),e.qZA(),e.YNc(10,wt,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,v.lW,g.ZT,h.KE,h.hX,u.Nt],encapsulation:2}),n})();class At{}function It(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",31),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(),c=r.$implicit,d=r.index,x=e.oxw(4);return e.KtG(x.updateFuelStatus(o,c,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function Lt(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",32),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function Qt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",26)(2,"div",21),e._uU(3),e.qZA(),e.TgZ(4,"div",27),e._uU(5),e.qZA(),e.TgZ(6,"div",23),e.YNc(7,It,2,2,"ng-container",16),e.YNc(8,Lt,2,2,"ng-container",16),e.qZA(),e.TgZ(9,"div",28)(10,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.openDialog(r,"edit","80%"))}),e._UZ(11,"mat-icon",30),e.qZA(),e.TgZ(12,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteFuel(r))}),e._UZ(13,"mat-icon",30),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(4);e.xp6(3),e.hij(" ",i+1," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",!(o.isLoading&&o.selectedSlide===i)),e.xp6(1),e.Q6J("ngIf",o.isLoading&&o.selectedSlide===i),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function Ft(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Qt,14,6,"ng-container",25),e.BQk()),2&n){const t=s.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const Mt=function(n){return{"pointer-events-none":n}},St=function(){return[5,10,25,100]};function Jt(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19)(2,"div",20),e._UZ(3,"div",21),e.TgZ(4,"div",22),e._uU(5," Nombre "),e.qZA(),e.TgZ(6,"div",23),e._uU(7," Activo "),e.qZA(),e.TgZ(8,"div",23),e._uU(9," Acciones "),e.qZA()(),e.YNc(10,Ft,2,2,"ng-container",16),e.ALo(11,"async"),e._UZ(12,"mat-paginator",24),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(6),e.Q6J("ngIf",e.lcZ(11,8,t.fuels$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Mt,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,St))("showFirstLastButtons",!0)}}function Dt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Jt,13,13,"ng-container",18),e.BQk()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(28);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Nt(n,s){1&n&&(e.TgZ(0,"div",33),e._uU(1," \xa1No hay combustibles creados para el negocio!"),e.qZA())}let Ut=(()=>{class n{constructor(t,i,o,r,c,d){this._fuelsService=t,this._changeDetectorRef=i,this._dialog=o,this._fuseConfirmationService=r,this._snackBar=c,this.store=d,this.fuel=new At,this.fuels$=(0,L.of)([]),this.isLoading=!1,this.searchInputControl=new a.NI(null),this.selectedSlide=null,this._unsubscribeAll=new T.x}ngOnInit(){this.fuels$=this.store.select(xt.zt),this.store.select(j.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"code",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,R.w)(()=>(this.isLoading=!0,this._fuelsService.getFuels(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteFuel(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la combustible: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._fuelsService.removeFuel(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.removeFuel.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateFuelStatus(t,i,o){this.isLoading=!0,this.selectedSlide=o,this._fuelsService.updateFuelStatus({id:i.id,active:t.checked}).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateFuelStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,i){return i.id||t}openDialog(t,i){this._dialog.open(kt,{data:{fuel:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(me.f),e.Y36(e.sBO),e.Y36(g.uw),e.Y36(Z.R),e.Y36(S.ux),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-fuels"]],viewQuery:function(t,i){if(1&t&&(e.Gf(b.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:29,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noFuels",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","overflow-auto","border-b","lists-grid","md:px-8"],[1,"truncate"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ajustes"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Combustibles"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Combustibles "),e.qZA()()(),e.TgZ(18,"div",10)(19,"button",11),e.NdJ("click",function(){return i.openDialog(i.fuel,"add")}),e._UZ(20,"mat-icon",12),e.TgZ(21,"span",13),e._uU(22,"Agregar"),e.qZA()()()(),e.TgZ(23,"div",14)(24,"div",15),e.YNc(25,Dt,2,2,"ng-container",16),e.ALo(26,"async"),e.YNc(27,Nt,2,0,"ng-template",null,17,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(26,4,i.fuels$)))},dependencies:[y.yS,p.mk,p.sg,p.O5,v.lW,q.Hw,b.NW,O.Ou,B.Rr,_.YE,_.nU,p.Ov],encapsulation:2,changeDetection:0}),n})();var qt=l(6062),de=l(15978);function Bt(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Multiplicador "),e.qZA())}function Yt(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar Multiplicador "),e.qZA())}function Rt(n,s){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"valor"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.multiplier.value||"Sin valor")}}function Ot(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"mat-form-field",18)(4,"mat-label"),e._uU(5,"valor"),e.qZA(),e._UZ(6,"input",19),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.multiplierForm)("autocomplete","off"),e.xp6(4),e.Q6J("formControlName","value")("placeholder","Ejemplo: 3.5")}}function Et(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateMultiplier())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.multiplierForm.invalid)("matDialogClose","confirmed")}}function Pt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createMultiplier())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.multiplierForm.invalid)("matDialogClose","confirmed")}}function zt(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",20),e.ynx(2),e.TgZ(3,"button",21),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Et,3,3,"ng-container",6),e.YNc(6,Pt,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let $t=(()=>{class n{constructor(t,i,o,r,c,d,x){this.data=t,this._multipliersService=i,this._changeDetectorRef=o,this._formBuilder=r,this._fuseConfirmationService=c,this._dialogRef=d,this._snackBar=x,this.dialogMode="view",this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.multiplier=t.multiplier}ngOnInit(){this.multiplierForm=this._formBuilder.group({id:new a.NI(null),value:new a.NI(null,[a.kI.min(1)])}),"edit"===this.dialogMode&&this.multiplierForm.patchValue(this.multiplier)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createMultiplier(){let t=this.multiplierForm.getRawValue();t=(0,U.Z)(t,["id"]),this._fuseConfirmationService.open({title:"Crear multiplicador",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._multipliersService.createMultiplier(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.createMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateMultiplier(){const t=this.multiplierForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar multiplicador",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._multipliersService.updateMultiplier(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.WI),e.Y36(de.e),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(Z.R),e.Y36(g.so),e.Y36(S.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-multiplier-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","number","required","","maxlength","50",3,"formControlName","placeholder"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Bt,2,0,"h2",2),e.YNc(4,Yt,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Rt,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,Ot,7,4,"div",5),e.BQk(),e.qZA(),e.YNc(10,zt,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[p.O5,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,v.lW,g.ZT,h.KE,h.hX,u.Nt],encapsulation:2}),n})();class Gt{}function jt(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",31),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(),c=r.$implicit,d=r.index,x=e.oxw(4);return e.KtG(x.updateMultiplierStatus(o,c,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function Vt(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",32),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function Ht(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",26)(2,"div",21),e._uU(3),e.qZA(),e.TgZ(4,"div",27),e._uU(5),e.qZA(),e.TgZ(6,"div",23),e.YNc(7,jt,2,2,"ng-container",16),e.YNc(8,Vt,2,2,"ng-container",16),e.qZA(),e.TgZ(9,"div",28)(10,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.openDialog(r,"edit","80%"))}),e._UZ(11,"mat-icon",30),e.qZA(),e.TgZ(12,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteMultiplier(r))}),e._UZ(13,"mat-icon",30),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(4);e.xp6(3),e.hij(" ",i+1," "),e.xp6(2),e.hij(" x",t.value," "),e.xp6(2),e.Q6J("ngIf",!(o.isSlideLoading&&o.selectedSlide===i)),e.xp6(1),e.Q6J("ngIf",o.isSlideLoading&&o.selectedSlide===i),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function Kt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Ht,14,6,"ng-container",25),e.BQk()),2&n){const t=s.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const Wt=function(n){return{"pointer-events-none":n}},Xt=function(){return[5,10,25,100]};function en(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19)(2,"div",20),e._UZ(3,"div",21),e.TgZ(4,"div",22),e._uU(5," Valor "),e.qZA(),e.TgZ(6,"div",23),e._uU(7," Activo "),e.qZA(),e.TgZ(8,"div",23),e._uU(9," Acciones "),e.qZA()(),e.YNc(10,Kt,2,2,"ng-container",16),e.ALo(11,"async"),e._UZ(12,"mat-paginator",24),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","value"),e.xp6(6),e.Q6J("ngIf",e.lcZ(11,8,t.multipliers$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Wt,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,Xt))("showFirstLastButtons",!0)}}function tn(n,s){if(1&n&&(e.ynx(0),e.YNc(1,en,13,13,"ng-container",18),e.BQk()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(28);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function nn(n,s){1&n&&(e.TgZ(0,"div",33),e._uU(1," \xa1No hay multiplicadores creados para el negocio!"),e.qZA())}let on=(()=>{class n{constructor(t,i,o,r,c,d){this._multipliersService=t,this._changeDetectorRef=i,this._dialog=o,this._fuseConfirmationService=r,this._snackBar=c,this.store=d,this.multiplier=new Gt,this.multipliers$=(0,L.of)([]),this.isLoading=!1,this.isSlideLoading=!1,this.searchInputControl=new a.NI,this.selectedSlide=null,this._unsubscribeAll=new T.x}ngOnInit(){this.multipliers$=this.store.select(qt.Af),this.store.select(j.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"value",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,R.w)(()=>(this.isLoading=!0,this._multipliersService.getMultipliers(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteMultiplier(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la combustible: x${t.value}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._multipliersService.removeMultiplier(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.removeMultiplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateMultiplierStatus(t,i,o){this.isSlideLoading=!0,this.selectedSlide=o,this._multipliersService.updateMultiplierStatus({id:i.id,active:t.checked}).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateMultiplierStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,i){return i.id||t}openDialog(t,i){this._dialog.open($t,{data:{multiplier:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(de.e),e.Y36(e.sBO),e.Y36(g.uw),e.Y36(Z.R),e.Y36(S.ux),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-multipliers"]],viewQuery:function(t,i){if(1&t&&(e.Gf(b.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:29,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noMultipliers",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8","overflow-auto"],[1,""],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ajustes"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Multiplicadores"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Multiplicadores "),e.qZA()()(),e.TgZ(18,"div",10)(19,"button",11),e.NdJ("click",function(){return i.openDialog(i.multiplier,"add")}),e._UZ(20,"mat-icon",12),e.TgZ(21,"span",13),e._uU(22,"Agregar"),e.qZA()()()(),e.TgZ(23,"div",14)(24,"div",15),e.YNc(25,tn,2,2,"ng-container",16),e.ALo(26,"async"),e.YNc(27,nn,2,0,"ng-template",null,17,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(26,4,i.multipliers$)))},dependencies:[y.yS,p.mk,p.sg,p.O5,v.lW,q.Hw,b.NW,O.Ou,B.Rr,_.YE,_.nU,p.Ov],encapsulation:2,changeDetection:0}),n})();var sn=l(20449),rn=l(28258),z=l(90149),an=l(53402),cn=l(17489),ln=l(63844),mn=l(54206),pe=l(34617),ge=l(91079),dn=l(74107);function pn(n,s){if(1&n&&(e.TgZ(0,"h2",6),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij("Agregar esta categor\xeda a ",t.parentCategory.name,"")}}function gn(n,s){1&n&&(e.TgZ(0,"h2",6),e._uU(1,"Agregar categor\xeda"),e.qZA())}function _n(n,s){1&n&&(e.TgZ(0,"h2",6),e._uU(1,"Editar categor\xeda"),e.qZA())}const un=function(n){return{"text-center":n}};function fn(n,s){if(1&n&&(e.TgZ(0,"mat-option",27),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("ngClass",e.VKq(3,un,"root"===t.id))("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function hn(n,s){if(1&n&&(e.TgZ(0,"mat-option",30),e._uU(1),e.qZA()),2&n){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t+1," ")}}function xn(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Debe seleccionar el orden de la categor\xeda. "),e.qZA())}function vn(n,s){if(1&n&&(e.TgZ(0,"mat-form-field",17)(1,"mat-label"),e._uU(2,"Orden"),e.qZA(),e.TgZ(3,"mat-select",28),e.YNc(4,hn,2,2,"mat-option",29),e.qZA(),e.YNc(5,xn,2,0,"mat-error",5),e.qZA()),2&n){const t=e.oxw(2);e.xp6(3),e.Q6J("formControlName","position")("placeholder","Orden"),e.xp6(1),e.Q6J("ngForOf",t.positions),e.xp6(1),e.Q6J("ngIf",t.categoryForm.get("position").hasError("required"))}}function yn(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El t\xedtulo de la categor\xeda es obligatorio. "),e.qZA())}function bn(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El t\xedtulo del elemento de categor\xeda debe poseer entre 3 y 255 caracteres. "),e.qZA())}function Cn(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Tooltip no debe superar los 255 caracteres. "),e.qZA())}function Tn(n,s){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," El \xcdcono no debe superar los 255 caracteres. "),e.qZA())}function Zn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"input",31,32),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(2);return e.KtG(r.openCropperDialog(o))}),e.qZA(),e.TgZ(3,"label",33),e._UZ(4,"mat-icon",34),e.qZA()()}2&n&&(e.xp6(1),e.Q6J("multiple",!1)("accept","image/png, image/webp, image/jpeg, image/png"),e.xp6(3),e.Q6J("svgIcon","mat_solid:photo_camera"))}function wn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"button",35),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.removeImage())}),e._UZ(2,"mat-icon",34),e.qZA()()}2&n&&(e.xp6(2),e.Q6J("svgIcon","mat_solid:delete"))}function kn(n,s){if(1&n&&e._UZ(0,"img",36),2&n){const t=e.oxw(2);e.Q6J("src",t.categoryForm.get("imageUrl").value,e.LSH)}}const An=function(n){return{"bg-gray-200 mt-4":n}};function In(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"div",8)(2,"form",9)(3,"div",10)(4,"mat-form-field",11)(5,"mat-label"),e._uU(6,"Padre"),e.qZA(),e._UZ(7,"input",12),e.TgZ(8,"mat-autocomplete",13,14),e.NdJ("optionSelected",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.selectedCategoryOption(o))}),e.YNc(10,fn,2,5,"mat-option",15),e.ALo(11,"async"),e.qZA(),e.TgZ(12,"mat-hint"),e._uU(13,"Si se especifica un padre este elemento se agregar\xe1 en la ra\xedz"),e.qZA()(),e.YNc(14,vn,6,4,"mat-form-field",16),e.ynx(15),e.TgZ(16,"mat-form-field",17)(17,"mat-label"),e._uU(18,"Nombre"),e.qZA(),e._UZ(19,"input",18),e.YNc(20,yn,2,0,"mat-error",5),e.YNc(21,bn,2,0,"mat-error",5),e.qZA(),e.BQk(),e.ynx(22),e.TgZ(23,"mat-form-field",17)(24,"mat-label"),e._uU(25,"Tooltip"),e.qZA(),e._UZ(26,"input",19),e.YNc(27,Cn,2,0,"mat-error",5),e.qZA(),e.BQk(),e.ynx(28),e.TgZ(29,"mat-form-field",17)(30,"mat-label"),e._uU(31,"\xcdcono"),e.qZA(),e._UZ(32,"input",20),e.YNc(33,Tn,2,0,"mat-error",5),e.TgZ(34,"mat-hint"),e._uU(35,"Ejemplo: heroicons_solid:information-circle"),e.qZA()(),e.BQk(),e.ynx(36),e.TgZ(37,"div",21)(38,"span",22),e._uU(39,"Estado"),e.qZA(),e.TgZ(40,"mat-slide-toggle",23),e._uU(41),e.qZA()(),e.BQk(),e.TgZ(42,"div",24)(43,"div",25),e.YNc(44,Zn,5,3,"div",5),e.YNc(45,wn,3,1,"div",5),e.qZA(),e.YNc(46,kn,1,1,"img",26),e.qZA()()()()()}if(2&n){const t=e.MAs(9),i=e.oxw();e.xp6(2),e.Q6J("formGroup",i.categoryForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","parentId")("type","text")("matAutocomplete",t),e.xp6(1),e.Q6J("displayWith",i.displayFn.bind(i)),e.xp6(2),e.Q6J("ngForOf",e.lcZ(11,30,i.filteredCategories)),e.xp6(4),e.Q6J("ngIf",i.positions.length>1),e.xp6(5),e.Q6J("formControlName","name")("type","text")("placeholder","T\xedtulo")("minLength",3)("maxLength",255),e.xp6(1),e.Q6J("ngIf",i.categoryForm.get("name").hasError("required")),e.xp6(1),e.Q6J("ngIf",i.categoryForm.get("name").hasError("maxLength")||i.categoryForm.get("name").hasError("minLength")),e.xp6(5),e.Q6J("formControlName","tooltip")("placeholder","Tooltip")("maxLength",255),e.xp6(1),e.Q6J("ngIf",i.categoryForm.get("tooltip").hasError("maxLength")),e.xp6(5),e.Q6J("formControlName","icon")("placeholder","SVG \xcdcono")("maxLength",1e3),e.xp6(1),e.Q6J("ngIf",i.categoryForm.get("icon").hasError("maxLength")),e.xp6(7),e.Q6J("formControlName","active")("color","primary"),e.xp6(1),e.hij(" ",!0===i.categoryForm.get("active").value?"Activo":"Inactivo"," "),e.xp6(1),e.Q6J("ngClass",e.VKq(32,An,!i.categoryForm.get("imageUrl").value)),e.xp6(2),e.Q6J("ngIf",!i.categoryForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",i.categoryForm.get("imageUrl").value),e.xp6(1),e.Q6J("ngIf",i.categoryForm.get("imageUrl").value)}}const _e=function(n){return{"cursor-not-allowed":n}};function Ln(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateCategory())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.categoryForm.invalid)("ngClass",e.VKq(3,_e,t.categoryForm.invalid))}}function Qn(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createCategory())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.categoryForm.invalid)("ngClass",e.VKq(3,_e,t.categoryForm.invalid))}}function Fn(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",37),e.ynx(2),e.TgZ(3,"button",38),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Ln,3,5,"ng-container",5),e.YNc(6,Qn,3,5,"ng-container",5),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let Mn=(()=>{class n{constructor(t,i,o,r,c,d,x,K,A,$){this.data=t,this._changeDetectorRef=i,this._dialogRef=o,this._formBuilder=r,this._athConfirmationService=c,this._categoriesService=d,this._snackBar=x,this._imagesService=K,this._dialog=A,this.store=$,this.categories=[],this.allCategories=[],this.positions=[],this.position=0,this.searchMPermissionControl=new a.NI,this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.selectedCategory=t.category,this.parentCategory=t.parentCategory}ngOnInit(){this.store.select(mn.u).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.allCategories=[...t],this.filterCategory(t),this.calcPositions(!1)}),this.categoryForm=this._formBuilder.group({id:[null],position:[this.position,[a.kI.required]],name:["",[a.kI.required,a.kI.minLength(3),a.kI.maxLength(255)]],tooltip:[null,[a.kI.maxLength(255)]],level:[0,[a.kI.required]],icon:[null,[a.kI.maxLength(255)]],parentId:[null,[a.kI.required]],imageUrl:[null],active:[!0]}),this._fillCategoryData(),this.filteredCategories=this.categoryForm.get("parentId").valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,H.b)(100),(0,X.O)(""),(0,R.w)(t=>!t&&this.categoryForm.get("parentId").value?(0,L.of)([]):(0,L.of)(t?this.categories.filter(i=>i.name.toLocaleLowerCase().includes(t.toLocaleLowerCase())):this.categories)))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}selectedCategoryOption(t){const i=t.option.value;this.parentCategory=this.categories.find(o=>o.id===i),"root"===this.parentCategory.id&&(this.parentCategory=null),this.filterCategory(this.allCategories),this.calcPositions(!0),this.categoryForm.get("position").setValue(this.position),this._changeDetectorRef.markForCheck()}createCategory(){const t=this.categoryForm.getRawValue();delete t.id,this.parentCategory&&"root"!==this.parentCategory.id?t.level=this.parentCategory.level+1:t.parentId=null,this._athConfirmationService.open({title:"Crear categor\xeda",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._categoriesService.createCategory(t).subscribe(r=>{r&&(this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}updateCategory(){const t=this.categoryForm.getRawValue();this.parentCategory&&"root"!==this.parentCategory.id?t.level=this.parentCategory.level+1:t.parentId=null,this._athConfirmationService.open({title:"Actualizar categor\xeda",message:"\xbfEsta seguro que todos los datos son correctos?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._categoriesService.updateCategory(t).subscribe(r=>{r&&(this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill"}}),this._changeDetectorRef.markForCheck(),this.closeDialog())})})}openCropperDialog(t){this._dialog.open(re.u,{data:{image:t},panelClass:"ath-dialog-panel",minWidth:"200px",maxWidth:"500px",maxHeight:"90vh",disableClose:!0}).afterClosed().subscribe(o=>{o.size/1024/1024>1?this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:"Tama\xf1o demasiado grande. La imagen no debe superar a 1MB",title:"Confirmaci\xf3n",type:"error",svgIcon:"heroicons_solid:check"}}):this._imagesService.uploadImage("List",o).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this.categoryForm.get("imageUrl").setValue(r.imageUrl),"edit"===this.dialogMode?(this.selectedCategory.imageUrl=r.imageUrl,this.selectedCategory.imageCode=r.public_id,this._categoriesService.updateCategoryImage({id:this.selectedCategory.id,imageUrl:r.imageUrl,imageCode:r.public_id},this.selectedCategory).pipe((0,m.R)(this._unsubscribeAll)).subscribe(c=>{c&&(this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:c.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck())})):this._changeDetectorRef.markForCheck()},r=>{console.warn(r)})})}removeImage(){const t=this.categoryForm.get("imageUrl").value;this._athConfirmationService.open({title:"Cuidado",message:"\xbfEst\xe1 seguro que desea eliminar la imagen?",icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._imagesService.removeImage(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this.categoryForm.get("imageUrl").setValue(null),"edit"===this.dialogMode&&(this.selectedCategory.imageUrl=null,this.selectedCategory.imageCode=null,this._categoriesService.updateCategoryImage({id:this.selectedCategory.id,imageUrl:null,imageCode:null},this.selectedCategory).pipe((0,m.R)(this._unsubscribeAll)).subscribe(c=>{c&&this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()}))})})}displayFn(t){const i=this.categories.find(o=>o.id===t);return i?i.name:""}closeDialog(){this._dialogRef.close()}_fillCategoryData(){"edit"===this.dialogMode&&(this.categoryForm.patchValue(this.selectedCategory),this.parentCategory||this.categoryForm.get("parentId").setValue("root")),"add"===this.dialogMode&&(this.parentCategory&&this.categoryForm.get("parentId").setValue(this.parentCategory.id),this.parentCategory||this.categoryForm.get("parentId").setValue("root")),this._changeDetectorRef.markForCheck()}filterCategory(t){return this.selectedCategory?"edit"===this.dialogMode&&(this.categories=[...t.filter(i=>this.selectedCategory.id!==i.id)]):this.categories=[...t],this.categories.push({level:-1,id:"root",name:"----Principal----"}),this.categories.sort((i,o)=>i.level-o.level)}calcPositions(t){if(this.positions=[],this.position=0,this.parentCategory&&this.parentCategory.children&&this.parentCategory.children.length>0){for(let i=0;i<this.parentCategory.children.length;i++)this.positions.push(i);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):t&&this.positions.push(this.positions.length)}if(!this.parentCategory){const i=this.allCategories.filter(o=>null===o.parentId);for(let o=0;o<i.length;o++)this.positions.push(o);"add"===this.dialogMode?(this.position=this.positions.length,this.positions.push(this.positions.length)):this.positions.push(this.positions.length)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.WI),e.Y36(e.sBO),e.Y36(g.so),e.Y36(a.QS),e.Y36(Z.R),e.Y36(pe.H),e.Y36(S.ux),e.Y36(ce.C),e.Y36(g.uw),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["category-dialog"]],decls:10,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],["mat-dialog-title",""],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2","md:grid-cols-3"],[1,"fuse-mat-no-subscript"],["matInput","","placeholder","Elemento padre","aria-label","Number",3,"formControlName","type","matAutocomplete"],["autoActiveFirstOption","",3,"displayWith","optionSelected"],["auto","matAutocomplete"],[3,"ngClass","value",4,"ngFor","ngForOf"],["class","w-full ",4,"ngIf"],[1,"w-full"],["matInput","","required","",3,"formControlName","type","placeholder","minLength","maxLength"],["matInput","","require","",3,"formControlName","placeholder","maxLength"],["matInput","",3,"formControlName","placeholder","maxLength"],[1,"flex","flex-col"],[1,"font-medium"],[1,"mt-1","sm:mt-3",3,"formControlName","color"],[1,"relative","flex","items-center","justify-center","w-32","h-32","overflow-hidden","rounded-md","dark:bg-gray-600","ring-4","ring-bg-card",3,"ngClass"],[1,"absolute","inset-0","z-20","flex","items-center","justify-center"],["class","object-cover w-full h-full",3,"src",4,"ngIf"],[3,"ngClass","value"],["required","",3,"formControlName","placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["id","thumbnail-file-input","type","file",1,"absolute","invisible","w-0","h-0","opacity-0","pointer-events-none",3,"multiple","accept","change"],["thumbnailFileInput",""],["for","thumbnail-file-input","matRipple","",1,"flex","items-center","justify-center","w-10","h-10","rounded-full","cursor-pointer","hover:bg-hover"],[1,"text-primary",3,"svgIcon"],["mat-icon-button","",3,"click"],[1,"object-cover","w-full","h-full",3,"src"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","ngClass","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,pn,2,1,"h2",2),e.YNc(4,gn,2,0,"h2",2),e.YNc(5,_n,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(6,"div",3),e.ynx(7),e.YNc(8,In,47,34,"div",4),e.BQk(),e.qZA(),e.YNc(9,Fn,7,3,"ng-container",5),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===i.dialogMode&&i.parentCategory),e.xp6(1),e.Q6J("ngIf","add"===i.dialogMode&&!i.parentCategory),e.xp6(1),e.Q6J("ngIf","edit"===i.dialogMode),e.xp6(3),e.Q6J("ngIf","view"!==i.dialogMode),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[p.mk,p.sg,p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.sg,a.u,ge.XC,ge.ZL,ie.ey,v.lW,g.ZT,g.uh,q.Hw,h.TO,h.KE,h.bx,h.hX,u.Nt,ie.wG,dn.gD,B.Rr,p.Ov],encapsulation:2,changeDetection:0}),n})();class Sn{}var Jn=l(85178),Dn=l(94880),Nn=l(29071),Un=l(87238);function qn(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",48)(2,"div",49),e._UZ(3,"div",50),e.qZA(),e.TgZ(4,"span",51),e._uU(5),e.qZA()(),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(5),e.Oqu(t.item.name)}}function Bn(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",48)(2,"button",52),e._UZ(3,"mat-icon",47),e.qZA(),e.TgZ(4,"span",53),e._uU(5),e.qZA()(),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(2),e.uIk("aria-label","Expandir "+t.item.name),e.xp6(1),e.Q6J("svgIcon",i.treeControl.isExpanded(t)?"heroicons_outline:chevron-down":"heroicons_outline:chevron-right"),e.xp6(2),e.Oqu(t.item.name)}}function Yn(n,s){if(1&n&&e._UZ(0,"img",54),2&n){const t=e.oxw().$implicit;e.Q6J("alt","Foto")("src",t.item.imageUrl,e.LSH)}}function Rn(n,s){1&n&&e._UZ(0,"div",55)}function On(n,s){if(1&n&&e._UZ(0,"mat-icon",47),2&n){const t=e.oxw().$implicit;e.Q6J("svgIcon",t.item.icon)}}function En(n,s){1&n&&e._UZ(0,"span")}function Pn(n,s){if(1&n&&(e.TgZ(0,"span",32),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Oqu(i.flatNodeMap.get(t).children.length)}}function zn(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",56),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(2);return e.KtG(r.dobleClick(o))})("change",function(o){e.CHM(t);const r=e.oxw().$implicit,c=e.oxw(2);return e.KtG(c.updateCategoryStatus(o,r,r.item.id))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.item.active)("color","primary")}}function $n(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",57),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}const Gn=function(n,s){return{"bg-gray-800 dark:bg-white":n,"bg-gray-700 dark:bg-neutral-50":s}};function jn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"mat-tree-node",36),e.NdJ("mouseenter",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.mouseEnterLeave(r.item.id))})("mouseleave",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.mouseEnterLeave(r.item.id))})("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.mouseOver(r.item.id))})("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.dobleClick(r))}),e.YNc(1,qn,6,1,"ng-container",37),e.YNc(2,Bn,6,3,"ng-container",37),e.TgZ(3,"div",38)(4,"div",39),e.YNc(5,Yn,1,2,"img",40),e.YNc(6,Rn,1,0,"div",41),e.qZA()(),e.TgZ(7,"div",32),e.YNc(8,On,1,1,"mat-icon",42),e.qZA(),e.YNc(9,En,1,0,"span",37),e.YNc(10,Pn,2,1,"span",43),e.TgZ(11,"div",44),e.YNc(12,zn,2,2,"ng-container",37),e.YNc(13,$n,2,2,"ng-container",37),e.qZA(),e.TgZ(14,"div",45),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.dobleClick(r))}),e.TgZ(15,"button",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.createCategory(r))}),e._UZ(16,"mat-icon",47),e.qZA(),e.TgZ(17,"button",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.editCategory(r))}),e._UZ(18,"mat-icon",47),e.qZA(),e.TgZ(19,"button",46),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.deleteCategory(c.flatNodeMap.get(r)))}),e._UZ(20,"mat-icon",47),e.qZA()()()}if(2&n){const t=s.$implicit,i=e.oxw(2);e.Q6J("ngClass",e.WLB(13,Gn,t.item.id===i.selectedCategoryId,t.item.id===i.overCategoryId)),e.xp6(1),e.Q6J("ngIf",0===i.flatNodeMap.get(t).children.length),e.xp6(1),e.Q6J("ngIf",i.flatNodeMap.get(t).children.length>0),e.xp6(3),e.Q6J("ngIf",t.item.imageUrl),e.xp6(1),e.Q6J("ngIf",!t.item.imageUrl),e.xp6(2),e.Q6J("ngIf",t.item.icon),e.xp6(1),e.Q6J("ngIf",0===i.flatNodeMap.get(t).children.length),e.xp6(1),e.Q6J("ngIf",i.flatNodeMap.get(t).children.length>0),e.xp6(2),e.Q6J("ngIf",!(i.isLoading&&i.selectedSlide===t.item.id)),e.xp6(1),e.Q6J("ngIf",i.isLoading&&i.selectedSlide===t.item.id),e.xp6(3),e.Q6J("svgIcon","heroicons_solid:plus"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:pencil"),e.xp6(2),e.Q6J("svgIcon","heroicons_solid:trash")}}function Vn(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3," Nombre "),e.qZA(),e.TgZ(4,"div",32),e._uU(5," Imagen "),e.qZA(),e.TgZ(6,"div",32),e._uU(7," Icono "),e.qZA(),e.TgZ(8,"div",32),e._uU(9," #.Elementos "),e.qZA(),e.TgZ(10,"div",32),e._uU(11," Estado "),e.qZA(),e.TgZ(12,"div",33),e._uU(13," Acciones "),e.qZA()(),e.TgZ(14,"mat-tree",34),e.YNc(15,jn,21,16,"mat-tree-node",35),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(14),e.Q6J("dataSource",t.dataSource)("treeControl",t.treeControl)}}function Hn(n,s){1&n&&(e.TgZ(0,"div",58),e._uU(1," \xa1No se ha creado ning\xfan elemento a\xfan!"),e.qZA())}function Kn(n,s){if(1&n&&(e.TgZ(0,"div",58),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.hij(" ",t.searchInputControl.value?"\xa1No se han encontrado facturas!":"\xa1No se ha generado ninguna suscripci\xf3n a\xfan!","")}}let Wn=(()=>{class n{constructor(t,i,o,r,c,d,x,K){this.store=t,this.dialog=i,this._snackBar=o,this._categoryService=r,this._fuseConfigService=c,this._changeDetectorRef=d,this._fuseConfirmationService=x,this._fuseMediaWatcherService=K,this.categories=[],this.flatNodeMap=new Map,this.nestedNodeMap=new Map,this.selectedParent=null,this.checklistSelection=new sn.Ov(!0),this.isLoading=!1,this.selectedSlide=null,this._unsubscribeAll=new T.x,this.getLevel=A=>A.level,this.isExpandable=A=>A.expandable,this.getChildren=A=>A.children,this.hasChild=(A,$)=>$.expandable,this.hasNoContent=(A,$)=>""===$.item.name,this.transformer=(A,$)=>{var oe;const se=this.nestedNodeMap.get(A),V=se&&se.item===A.item?se:new Sn;return V.item=A.item,V.level=$,V.expandable=!(null===(oe=A.children)||void 0===oe||!oe.length),this.flatNodeMap.set(V,A),this.nestedNodeMap.set(A,V),V},this.treeFlattener=new z.JZ(this.transformer,this.getLevel,this.isExpandable,this.getChildren),this.treeControl=new rn.C2(this.getLevel,this.isExpandable),this.dataSource=new z.kc(this.treeControl,this.treeFlattener)}ngOnInit(){this._categoryService.data$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{if(this.previousTreeControl=(0,cn.cloneDeep)(this.treeControl),this.dataSource.data=t,this.previousTreeControl&&void 0!==this.previousTreeControl.dataNodes)for(const o of this.previousTreeControl.dataNodes)if(this.previousTreeControl.isExpanded(o)){const r=this.treeControl.dataNodes.find(c=>c.item.id===o.item.id);this.treeControl.expand(r)}const i={item:null,children:t};this.categories=[],this.getCategories(i),this.store.dispatch((0,an.DG)({categories:[...this.categories]})),this._changeDetectorRef.markForCheck()}),this._fuseMediaWatcherService.onMediaChange$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(({matchingAliases:t})=>{this.isScreenSmall=!t.includes("md")}),this._fuseConfigService.config$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.config=t,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}descendantsAllSelected(t){const i=this.treeControl.getDescendants(t);return i.length>0&&i.every(r=>this.checklistSelection.isSelected(r))}descendantsPartiallySelected(t){return this.treeControl.getDescendants(t).some(r=>this.checklistSelection.isSelected(r))&&!this.descendantsAllSelected(t)}mouseEnterLeave(t){this.selectedCategoryId=t===this.selectedCategoryId?"":t}mouseOver(t){this.overCategoryId=t===this.overCategoryId?"":t}dobleClick(t){this.treeControl.isExpanded(t)?this.treeControl.collapse(t):this.treeControl.expand(t)}refreshCategories(){this._categoryService.getRootCategoryNodes().pipe((0,m.R)(this._unsubscribeAll)).subscribe()}updateCategoryStatus(t,i,o){this.isLoading=!0,this.selectedSlide=o,this._categoryService.updateCategoryStatus({id:i.item.id,active:t.checked},i.item).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{r&&(this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck())})}createCategory(t){if(t){const i=this.categories.find(o=>o.id===t.item.id);this._openDialog(i,null,"add")}else this._openDialog(null,null,"add")}editCategory(t){let i=this.categories.find(o=>o.id===t.item.parentId);i=void 0===i?null:i,this._openDialog(i,t.item,"edit")}deleteCategory(t){this._fuseConfirmationService.open({title:"Eliminar Elemento",message:`\xbfEst\xe1 seguro que desea eliminar a ${t.item.name}? ${t.children.length>0?"Este elemento posee otros elementos":""}.`,icon:{show:!0,name:"heroicons_outline:question-mark-circle",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._categoryService.removeCategory(t.item.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{r&&this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",appearance:"fill",svgIcon:"heroicons_solid:check"}}),this._changeDetectorRef.markForCheck()})})}expandAll(){this.treeControl.expandAll()}collapseAll(){this.treeControl.collapseAll()}_openDialog(t,i,o){this.dialog.open(Mn,{data:{parentCategory:t,category:i,dialogMode:o},disableClose:!0,panelClass:"ath-payment-method-dialog-panel"})}getCategories(t){for(const i of t.children){const o=Object.assign({},i.item);o.children=[...i.children],this.categories.push(o),i.children&&i.children.length>0&&this.getCategories(i)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Y.yh),e.Y36(g.uw),e.Y36(S.ux),e.Y36(pe.H),e.Y36(Jn.m),e.Y36(e.sBO),e.Y36(Z.R),e.Y36(Dn.T))},n.\u0275cmp=e.Xpm({type:n,selectors:[["settings-category"]],decls:43,vars:7,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-row","justify-between","w-full","min-w-0","overflow-x-hidden","overflow-y-hidden","bg-card","dark:bg-transparent"],[1,"flex","flex-col","flex-auto","overflow-y-auto"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-20"],[1,"flex-wrap","items-center","hidden","font-medium","sm:flex"],[1,"flex","items-center","ml-1","whitespace-nowrap"],["routerLink","/desktop",1,"ml-1","text-primary-500","hover:underline"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"flex","sm:hidden"],[1,"inline-flex","items-center","-ml-1.5","text-secondary","font-medium",3,"routerLink"],[1,"ml-1"],[1,"mt-2"],[1,"mt-2","text-3xl","font-extrabold","leading-tight","tracking-tight"],[1,"flex","flex-row-reverse","flex-wrap","items-center","justify-end","mt-2","sm:flex-row","sm:mt-0","shrink-0","sm:ml-4"],["mat-raised-button","",1,"ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],["mat-stroked-button","",1,"ml-4",3,"click"],["svgIcon","mat_outline:close_fullscreen"],[1,"hidden","ml-2","mr-1","sm:block"],["mat-stroked-button","",1,"ml-0","sm:ml-4",3,"click"],["svgIcon","mat_outline:expand"],["mat-icon-button","","matTooltip","Refrescar",1,"ml-4","text-white","bg-gradient-to-r","from-primary-500","to-primary-600","hover:to-primary-900","hover:shadow-lg",3,"click"],[1,"text-white",3,"svgIcon"],[1,"flex","flex-col","flex-auto"],[1,"grid"],[4,"ngIf","ngIfElse"],["noCategories",""],["noSubscriptions",""],[1,"sticky","top-0","z-10","grid","gap-4","px-0","py-4","font-semibold","shadow","category-tree-table","xl:px-8","text-md","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"ml-6","xl:ml-0"],[1,"text-center"],[1,"pr-4","mr-6","text-right","xl:mr-0"],[3,"dataSource","treeControl"],["class","grid category-tree-table gap-4 relative  py-1.5 border-b rounded-md bg-opacity-5 dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click",4,"matTreeNodeDef"],[1,"grid","category-tree-table","gap-4","relative","py-1.5","border-b","rounded-md","bg-opacity-5","dark:bg-opacity-12",3,"ngClass","mouseenter","mouseleave","click"],[4,"ngIf"],[1,"flex","items-center","justify-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],["class","icon-size-5",3,"svgIcon",4,"ngIf"],["class","text-center",4,"ngIf"],[1,"flex","justify-center","mr-4","text-center"],[1,"flex","flex-row","justify-end","gap-2","pr-2","text-right",3,"click"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["matTreeNodePadding","","matTreeNodePaddingIndent","20",1,"flex","items-center"],["matTreeNodeToggle","","mat-icon-button","","color","primary",1,"flex","items-center","justify-center","w-10","h-10"],[1,"w-2","h-2","rounded-full","bg-primary-500"],[1,"cursor-default","whitespace-nowrap","line-clamp-1"],["mat-icon-button","","matTreeNodeToggle","","color","primary"],[1,"cursor-default","whitespace-nowrap"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[3,"checked","color","click","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"div",4)(6,"div",5)(7,"a",6),e._uU(8,"Inicio"),e.qZA()(),e.TgZ(9,"div",5),e._UZ(10,"mat-icon",7),e.TgZ(11,"a",8),e._uU(12,"Categor\xedas"),e.qZA()()(),e.TgZ(13,"div",9)(14,"a",10),e._UZ(15,"mat-icon",7),e.TgZ(16,"span",11),e._uU(17,"Regresar"),e.qZA()()()(),e.TgZ(18,"div",12)(19,"div",13),e._uU(20," Gesti\xf3n de Categor\xedas "),e.qZA()()(),e.TgZ(21,"div",14)(22,"button",15),e.NdJ("click",function(){return i.createCategory(null)}),e._UZ(23,"mat-icon",16),e.TgZ(24,"span",17),e._uU(25,"Nuevo"),e.qZA()(),e.TgZ(26,"button",18),e.NdJ("click",function(){return i.collapseAll()}),e._UZ(27,"mat-icon",19),e.TgZ(28,"span",20),e._uU(29,"Contraer"),e.qZA()(),e.TgZ(30,"button",21),e.NdJ("click",function(){return i.expandAll()}),e._UZ(31,"mat-icon",22),e.TgZ(32,"span",20),e._uU(33,"Expandir"),e.qZA()(),e.TgZ(34,"button",23),e.NdJ("click",function(){return i.refreshCategories()}),e._UZ(35,"mat-icon",24),e.qZA()()(),e.TgZ(36,"div",25)(37,"div",26),e.YNc(38,Vn,16,2,"ng-container",27),e.YNc(39,Hn,2,0,"ng-template",null,28,e.W1O),e.YNc(41,Kn,2,1,"ng-template",null,29,e.W1O),e.qZA()()()()),2&t){const o=e.MAs(40);e.xp6(10),e.Q6J("svgIcon","heroicons_solid:chevron-right"),e.xp6(4),e.Q6J("routerLink","./.."),e.xp6(1),e.Q6J("svgIcon","heroicons_solid:chevron-left"),e.xp6(8),e.Q6J("svgIcon","heroicons_outline:plus"),e.xp6(12),e.Q6J("svgIcon","heroicons_outline:refresh"),e.xp6(3),e.Q6J("ngIf",i.dataSource.data&&i.dataSource.data.length>0)("ngIfElse",o)}},dependencies:[y.yS,p.mk,p.O5,Nn.PQ,v.lW,q.Hw,O.Ou,B.Rr,Un.gM,z.fQ,z.ah,z.eu,z.gi,z.uo],encapsulation:2,data:{animation:ln.L},changeDetection:0}),n})();var Xn=l(23425),ei=l(54787),ti=l(22594),ni=l(68922),ii=l(36538),oi=l(40462);function si(n,s){if(1&n&&e._UZ(0,"img",42),2&n){const t=e.oxw().$implicit;e.Q6J("alt","Brand Logo")("src",t.logo,e.LSH)}}function ri(n,s){1&n&&(e.TgZ(0,"div",43),e._uU(1," SIN LOGO "),e.qZA())}function ai(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",44),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(),c=r.$implicit,d=r.index,x=e.oxw(4);return e.KtG(x.updateBrandStatus(o,c,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function ci(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",45),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function li(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const o=e.oxw().$implicit,r=e.oxw(4);return e.KtG(r.deleteBrand(o))}),e._UZ(1,"mat-icon",40),e.qZA()}2&n&&(e.xp6(1),e.Q6J("svgIcon","mat_solid:delete"))}function mi(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31)(3,"div",32),e.YNc(4,si,1,2,"img",33),e.YNc(5,ri,2,0,"div",34),e.qZA()(),e.TgZ(6,"div",35),e._uU(7),e.qZA(),e.TgZ(8,"div",36)(9,"div",37),e._uU(10),e.qZA()(),e.TgZ(11,"div",38),e.YNc(12,ai,2,2,"ng-container",19),e.YNc(13,ci,2,2,"ng-container",19),e.qZA(),e.TgZ(14,"div")(15,"button",39),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.updateBrand(r))}),e._UZ(16,"mat-icon",40),e.qZA(),e.YNc(17,li,2,1,"button",41),e.qZA()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(4);e.xp6(4),e.Q6J("ngIf",t.logo),e.xp6(1),e.Q6J("ngIf",!t.logo),e.xp6(2),e.hij(" ",t.name," "),e.xp6(3),e.Oqu(t.description),e.xp6(2),e.Q6J("ngIf",!(o.isLoading&&o.selectedSlide===i)),e.xp6(1),e.Q6J("ngIf",o.isLoading&&o.selectedSlide===i),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(1),e.Q6J("ngIf","Sin Marca"!==t.name)}}function di(n,s){if(1&n&&(e.ynx(0),e.YNc(1,mi,18,8,"ng-container",29),e.BQk()),2&n){const t=s.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const pi=function(n){return{"pointer-events-none":n}},gi=function(){return[5,10,25,100]};function _i(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23),e._UZ(3,"div"),e.TgZ(4,"div",24),e._uU(5,"Nombre"),e.qZA(),e.TgZ(6,"div",25),e._uU(7," Descripci\xf3n "),e.qZA(),e.TgZ(8,"div",26),e._uU(9," Activo "),e.qZA(),e.TgZ(10,"div",27),e._uU(11,"Acciones"),e.qZA()(),e.YNc(12,di,2,2,"ng-container",19),e.ALo(13,"async"),e.qZA(),e._UZ(14,"mat-paginator",28),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(8),e.Q6J("ngIf",e.lcZ(13,8,t.brands$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,pi,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,gi))("showFirstLastButtons",!0)}}function ui(n,s){if(1&n&&(e.ynx(0),e.YNc(1,_i,15,13,"ng-container",21),e.BQk()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function fi(n,s){1&n&&(e.TgZ(0,"div",47),e._uU(1,"\xa1No se ha creado ninguna marca!"),e.qZA())}let hi=(()=>{class n{constructor(t,i,o,r,c,d){this._brandsService=t,this._changeDetectorRef=i,this._dialog=o,this._fuseConfirmationService=r,this._snackBar=c,this.store=d,this.flashMessage=null,this.brands$=(0,L.of)([]),this.brands=[],this.merchantInputControl=new a.p4,this.isLoading=!1,this.searchInputControl=new a.p4,this.user=null,this.merchant=null,this.selectedSlide=null,this._unsubscribeAll=new T.x}ngOnInit(){this.store.select(ei.rk).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.user=t,this._changeDetectorRef.markForCheck()}),this.store.select(ti.Qs).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.merchant=t,this._changeDetectorRef.markForCheck()}),this.brands$=this.store.select(Xn.gg),this.brands$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.brands=t,this._changeDetectorRef.markForCheck()}),this.store.select(j.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,H.b)(300),(0,R.w)(t=>(this.isLoading=!0,this._brandsService.getBrands(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,E.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,R.w)(()=>(this.isLoading=!0,this._brandsService.getBrands(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}createBrand(){this._openDialog(new ii.H,"add")}updateBrand(t){this._openDialog(t,"edit")}updateBrandStatus(t,i,o){this.isLoading=!0,this.selectedSlide=o,this._brandsService.updateBrand(Object.assign(Object.assign({},i),{active:t.checked})).pipe((0,m.R)(this._unsubscribeAll)).subscribe(r=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=-1,this._changeDetectorRef.markForCheck()})}deleteBrand(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar la marca: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._brandsService.deleteBrand(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Marca eliminada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}trackByFn(t,i){return t||i.id}_openDialog(t,i){this._dialog.open(ni.C,{data:{brand:t,dialogMode:i},panelClass:"ath-dialog-panel",height:"90%"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(oi.G),e.Y36(e.sBO),e.Y36(g.uw),e.Y36(Z.R),e.Y36(S.ux),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-brands"]],viewQuery:function(t,i){if(1&t&&(e.Gf(b.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noBrands",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","brands-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","md:block"],[1,"hidden","lg:block"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","brands-grid","md:px-8"],[1,"flex","items-center"],[1,"relative","flex","items-center","justify-center","w-12","h-12","mr-6","overflow-hidden","border","rounded","flex-0"],["class","w-8",3,"alt","src",4,"ngIf"],["class","flex items-center justify-center w-full h-full text-xs font-semibold leading-none text-center uppercase",4,"ngIf"],[1,"truncate"],[1,"items-center","hidden","lg:flex"],[1,"min-w-4"],[1,"flex","justify-center","mr-4","text-center"],["mat-stroked-button","",1,"flex","flex-row","px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],["class","px-2 leading-6 min-w-10 min-h-7 h-7","mat-stroked-button","",3,"click",4,"ngIf"],[1,"w-8",3,"alt","src"],[1,"flex","items-center","justify-center","w-full","h-full","text-xs","font-semibold","leading-none","text-center","uppercase"],[3,"checked","color","change"],[3,"diameter","color"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Almac\xe9n"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Marcas"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Marcas "),e.qZA()()(),e.TgZ(18,"div",10)(19,"mat-form-field",11),e._UZ(20,"mat-icon",12)(21,"input",13),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return i.createBrand()}),e._UZ(23,"mat-icon",15),e.TgZ(24,"span",16),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",18),e.YNc(28,ui,2,2,"ng-container",19),e.ALo(29,"async"),e.YNc(30,fi,2,0,"ng-template",null,20,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:search"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.xp6(2),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,i.brands$)))},dependencies:[y.yS,p.mk,p.sg,p.O5,a.Fj,a.JJ,a.oH,v.lW,q.Hw,h.KE,h.qo,u.Nt,b.NW,O.Ou,B.Rr,_.YE,_.nU,p.Ov],styles:[".brands-grid{grid-template-columns:auto 40px}@media (min-width: 600px){.brands-grid{grid-template-columns:auto 112px 72px}}@media (min-width: 960px){.brands-grid{grid-template-columns:112px auto 112px 72px}}@media (min-width: 1280px){.brands-grid{grid-template-columns:72px auto 250px 150px 72px 72px}}\n"],encapsulation:2,changeDetection:0}),n})();var xi=l(87136),ue=l(63001);function vi(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar tipo de operaci\xf3n "),e.qZA())}function yi(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar tipo de operaci\xf3n "),e.qZA())}function bi(n,s){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.operationType.name||"Sin nombre")}}function Ci(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"div",18)(4,"mat-form-field",19)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",20),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.operationTypeForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name")("placeholder","Ejemplo: Transferencia")}}function Ti(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateOperationType())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.operationTypeForm.invalid)("matDialogClose","confirmed")}}function Zi(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createOperationType())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.operationTypeForm.invalid)("matDialogClose","confirmed")}}function wi(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",21),e.ynx(2),e.TgZ(3,"button",22),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Ti,3,3,"ng-container",6),e.YNc(6,Zi,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let ki=(()=>{class n{constructor(t,i,o,r,c,d){this.data=t,this._operationTypesService=i,this._changeDetectorRef=o,this._formBuilder=r,this._fuseConfirmationService=c,this._dialogRef=d,this.dialogMode="view",this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.operationType=t.operationType}ngOnInit(){this.operationTypeForm=this._formBuilder.group({id:new a.NI(null),name:new a.NI(null,[a.kI.maxLength(50)])}),"edit"===this.dialogMode&&this.operationTypeForm.patchValue(this.operationType)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createOperationType(){let t=this.operationTypeForm.getRawValue();t=(0,U.Z)(t,["id"]),this._fuseConfirmationService.open({title:"Crear Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._operationTypesService.createOperationType(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.createOperationType.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}updateOperationType(){const t=this.operationTypeForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar Moneda",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._operationTypesService.updateOperationType(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:r.updateOperationType.message,icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.WI),e.Y36(ue.X),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(Z.R),e.Y36(g.so))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-operation-type-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-1",3,"formGroup","autocomplete"],[1,"py-5"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","255",3,"formControlName","placeholder"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,vi,2,0,"h2",2),e.YNc(4,yi,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,bi,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,Ci,8,4,"div",5),e.BQk(),e.qZA(),e.YNc(10,wi,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,v.lW,g.ZT,h.KE,h.hX,u.Nt],encapsulation:2}),n})();class Ai{}function Ii(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",35),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(),c=r.$implicit,d=r.index,x=e.oxw(4);return e.KtG(x.updateOperationTypeStatus(o,c,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function Li(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",36),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function Qi(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",29)(2,"div",30),e._uU(3),e.qZA(),e.TgZ(4,"div",30),e._uU(5),e.qZA(),e.TgZ(6,"div",31),e.YNc(7,Ii,2,2,"ng-container",19),e.YNc(8,Li,2,2,"ng-container",19),e.qZA(),e.TgZ(9,"div",32)(10,"button",33),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.openDialog(r,"edit","80%"))}),e._UZ(11,"mat-icon",34),e.qZA(),e.TgZ(12,"button",33),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteOperationType(r))}),e._UZ(13,"mat-icon",34),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(4);e.xp6(3),e.hij(" ",i+1," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",!(o.isLoading&&o.selectedSlide===i)),e.xp6(1),e.Q6J("ngIf",o.isLoading&&o.selectedSlide===i),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function Fi(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Qi,14,6,"ng-container",28),e.BQk()),2&n){const t=s.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const Mi=function(n){return{"pointer-events-none":n}},Si=function(){return[5,10,25,100]};function Ji(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23),e._UZ(3,"div"),e.TgZ(4,"div",24),e._uU(5," Nombre "),e.qZA(),e.TgZ(6,"div",25),e._uU(7," Activo "),e.qZA(),e.TgZ(8,"div",26),e._uU(9," Acciones "),e.qZA()(),e.YNc(10,Fi,2,2,"ng-container",19),e.ALo(11,"async"),e._UZ(12,"mat-paginator",27),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(6),e.Q6J("ngIf",e.lcZ(11,8,t.operationTypes$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Mi,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,Si))("showFirstLastButtons",!0)}}function Di(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Ji,13,13,"ng-container",21),e.BQk()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function Ni(n,s){1&n&&(e.TgZ(0,"div",37),e._uU(1," \xa1No hay ning\xfan tipo de operaci\xf3n creado hasta el momento!"),e.qZA())}let Ui=(()=>{class n{constructor(t,i,o,r,c,d){this._changeDetectorRef=t,this._dialog=i,this._fuseConfirmationService=o,this._operationTypesService=r,this._snackBar=c,this.store=d,this.isLoading=!1,this.operationType=new Ai,this.operationTypes$=(0,L.of)([]),this.searchInputControl=new a.NI(null),this.selectedSlide=null,this._unsubscribeAll=new T.x}ngOnInit(){this.operationTypes$=this.store.select(xi.pU),this.store.select(j.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.searchInputControl.valueChanges.pipe((0,m.R)(this._unsubscribeAll),(0,H.b)(300),(0,X.O)(null),(0,R.w)(t=>null!==t?(this.isLoading=!0,this._operationTypesService.getOperationTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t)):(0,L.of)()),(0,E.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"name",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,R.w)(()=>(this.isLoading=!0,this._operationTypesService.getOperationTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction))),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteOperationType(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el m\xe9todo de pago: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._operationTypesService.removeOperationType(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"M\xe9todo de pago eliminado correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck()})})}updateOperationTypeStatus(t,i,o){this.isLoading=!0,this.selectedSlide=o,this._operationTypesService.updateOperationTypeStatus({id:i.id,active:t.checked}).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateOperationTypeStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,i){return i.id||t}openDialog(t,i){this._dialog.open(ki,{data:{operationType:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(g.uw),e.Y36(Z.R),e.Y36(ue.X),e.Y36(S.ux),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-operation-types"]],viewQuery:function(t,i){if(1&t&&(e.Gf(b.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-600",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noOperationTypes",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","small-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","small-grid","md:px-8"],[1,"truncate"],[1,"flex","justify-center"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Nomencladores"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Tipo de operaciones"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Tipos de operaciones "),e.qZA()()(),e.TgZ(18,"div",10)(19,"mat-form-field",11),e._UZ(20,"mat-icon",12)(21,"input",13),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return i.openDialog(i.operationType,"add")}),e._UZ(23,"mat-icon",15),e.TgZ(24,"span",16),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",18),e.YNc(28,Di,2,2,"ng-container",19),e.ALo(29,"async"),e.YNc(30,Ni,2,0,"ng-template",null,20,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:search"),e.xp6(1),e.Q6J("formControl",i.searchInputControl)("autocomplete","off")("placeholder","Escriba para filtrar..."),e.xp6(2),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,i.operationTypes$)))},dependencies:[y.yS,p.mk,p.sg,p.O5,a.Fj,a.JJ,a.oH,v.lW,q.Hw,h.KE,h.qo,u.Nt,b.NW,O.Ou,B.Rr,_.YE,_.nU,p.Ov],encapsulation:2}),n})();var qi=l(58066),fe=l(32121);function Bi(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Agregar Tipo de Servicio "),e.qZA())}function Yi(n,s){1&n&&(e.TgZ(0,"h2",7),e._uU(1," Editar Tipo de Servicio "),e.qZA())}function Ri(n,s){if(1&n&&(e.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"h6",13),e._uU(6,"Nombre"),e.qZA(),e.TgZ(7,"span",14),e._uU(8),e.qZA()()()()()()),2&n){const t=e.oxw();e.xp6(8),e.Oqu(t.data.serviceType.name||"Sin nombre")}}function Oi(n,s){if(1&n&&(e.TgZ(0,"div",15)(1,"div",16)(2,"form",17)(3,"mat-form-field",18)(4,"mat-label"),e._uU(5,"Nombre"),e.qZA(),e._UZ(6,"input",19),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.serviceTypeForm)("autocomplete","off"),e.xp6(4),e.Q6J("formControlName","name")("placeholder","Ejemplo: Gasolina")}}function Ei(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.updateServiceType())}),e._uU(2," Actualizar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.serviceTypeForm.invalid)("matDialogClose","confirmed")}}function Pi(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.createServiceType())}),e._uU(2," Agregar "),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("color","primary")("disabled",t.serviceTypeForm.invalid)("matDialogClose","confirmed")}}function zi(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",20),e.ynx(2),e.TgZ(3,"button",21),e._uU(4," Cancelar "),e.qZA(),e.BQk(),e.YNc(5,Ei,3,3,"ng-container",6),e.YNc(6,Pi,3,3,"ng-container",6),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("matDialogClose","cancelled"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let $i=(()=>{class n{constructor(t,i,o,r,c,d,x){this.data=t,this._serviceTypesService=i,this._changeDetectorRef=o,this._formBuilder=r,this._fuseConfirmationService=c,this._dialogRef=d,this._snackBar=x,this.dialogMode="view",this._unsubscribeAll=new T.x,this.dialogMode=t.dialogMode,this.serviceType=t.serviceType}ngOnInit(){this.serviceTypeForm=this._formBuilder.group({id:new a.NI(null),name:new a.NI(null,[a.kI.maxLength(100)])}),"edit"===this.dialogMode&&this.serviceTypeForm.patchValue(this.serviceType)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createServiceType(){let t=this.serviceTypeForm.getRawValue();t=(0,U.Z)(t,["id"]),this._fuseConfirmationService.open({title:"Crear combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._serviceTypesService.createServiceType(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.createServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}updateServiceType(){const t=this.serviceTypeForm.getRawValue();this._fuseConfirmationService.open({title:"Actualizar combustible",message:"\xbfEsta seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(o=>{"confirmed"===o&&this._serviceTypesService.updateServiceType(t).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updateServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.WI),e.Y36(fe.k),e.Y36(e.sBO),e.Y36(a.qu),e.Y36(Z.R),e.Y36(g.so),e.Y36(S.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-service-type-dialog"]],decls:11,vars:5,consts:[[1,"relative","flex","flex-col","w-full","max-h-screenl"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["class","text-2xl text-gray-400",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6","sm:flex-row","sm:items-start","sm:pb-8"],["class","flex-auto",4,"ngIf"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],[1,"text-2xl","text-gray-400"],[1,"flex-auto"],[1,"flex"],[1,"flex","flex-col","w-full","mt-5"],[1,"flex","flex-col","p-8","pb-0","sm:flex-row"],[1,"w-full","py-10","my-10"],[1,"mb-2","font-medium"],[1,"border-sm"],[1,"w-full","overflow-hidden"],[1,"flex","flex-col"],[1,"flex","flex-col","w-full","mt-3","gap-5",3,"formGroup","autocomplete"],[1,"w-full","fuse-mat-no-subscript"],["matInput","","type","text","required","","maxlength","50",3,"formControlName","placeholder"],[1,"flex","items-center","justify-center","px-6","py-4","space-x-3","sm:justify-end","bg-gray-50","dark:bg-black","dark:bg-opacity-10"],["mat-stroked-button","",3,"matDialogClose"],["mat-flat-button","",3,"color","disabled","matDialogClose","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,Bi,2,0,"h2",2),e.YNc(4,Yi,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Ri,9,1,"div",4),e.BQk(),e.ynx(8),e.YNc(9,Oi,7,4,"div",5),e.BQk(),e.qZA(),e.YNc(10,zi,7,3,"ng-container",6),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf","add"===i.data.dialogMode),e.xp6(1),e.Q6J("ngIf","edit"===i.data.dialogMode),e.xp6(3),e.Q6J("ngIf","view"===i.data.dialogMode),e.xp6(2),e.Q6J("ngIf","edit"===i.data.dialogMode||"add"),e.xp6(1),e.Q6J("ngIf","view"!==i.data.dialogMode))},dependencies:[p.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,v.lW,g.ZT,h.KE,h.hX,u.Nt],encapsulation:2}),n})();class Gi{}function ji(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",31),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw(),c=r.$implicit,d=r.index,x=e.oxw(4);return e.KtG(x.updateFuelStatus(o,c,d))}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function Vi(n,s){1&n&&(e.ynx(0),e._UZ(1,"mat-spinner",32),e.BQk()),2&n&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function Hi(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",26)(2,"div",21),e._uU(3),e.qZA(),e.TgZ(4,"div",27),e._uU(5),e.qZA(),e.TgZ(6,"div",23),e.YNc(7,ji,2,2,"ng-container",16),e.YNc(8,Vi,2,2,"ng-container",16),e.qZA(),e.TgZ(9,"div",28)(10,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.openDialog(r,"edit","80%"))}),e._UZ(11,"mat-icon",30),e.qZA(),e.TgZ(12,"button",29),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw(4);return e.KtG(c.deleteServiceType(r))}),e._UZ(13,"mat-icon",30),e.qZA()()(),e.BQk()}if(2&n){const t=s.$implicit,i=s.index,o=e.oxw(4);e.xp6(3),e.hij(" ",i+1," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.Q6J("ngIf",!(o.isLoading&&o.selectedSlide===i)),e.xp6(1),e.Q6J("ngIf",o.isLoading&&o.selectedSlide===i),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function Ki(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Hi,14,6,"ng-container",25),e.BQk()),2&n){const t=s.ngIf,i=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const Wi=function(n){return{"pointer-events-none":n}},Xi=function(){return[5,10,25,100]};function eo(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",19)(2,"div",20),e._UZ(3,"div",21),e.TgZ(4,"div",22),e._uU(5," Nombre "),e.qZA(),e.TgZ(6,"div",23),e._uU(7," Activo "),e.qZA(),e.TgZ(8,"div",23),e._uU(9," Acciones "),e.qZA()(),e.YNc(10,Ki,2,2,"ng-container",16),e.ALo(11,"async"),e._UZ(12,"mat-paginator",24),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(4),e.Q6J("mat-sort-header","name"),e.xp6(6),e.Q6J("ngIf",e.lcZ(11,8,t.serviceTypes$)),e.xp6(2),e.Q6J("ngClass",e.VKq(10,Wi,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(12,Xi))("showFirstLastButtons",!0)}}function to(n,s){if(1&n&&(e.ynx(0),e.YNc(1,eo,13,13,"ng-container",18),e.BQk()),2&n){const t=s.ngIf;e.oxw();const i=e.MAs(28);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function no(n,s){1&n&&(e.TgZ(0,"div",33),e._uU(1," \xa1No hay combustibles creados para el negocio!"),e.qZA())}let io=(()=>{class n{constructor(t,i,o,r,c,d){this._serviceTypesService=t,this._changeDetectorRef=i,this._dialog=o,this._fuseConfirmationService=r,this._snackBar=c,this.store=d,this.serviceType=new Gi,this.serviceTypes$=(0,L.of)([]),this.isLoading=!1,this.searchInputControl=new a.NI(null),this.selectedSlide=null,this._unsubscribeAll=new T.x}ngOnInit(){this.serviceTypes$=this.store.select(qi.Fr),this.store.select(j.B).pipe((0,m.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"code",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,m.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,G.T)(this._sort.sortChange,this._paginator.page).pipe((0,m.R)(this._unsubscribeAll),(0,H.b)(300),(0,X.O)(null),(0,R.w)(t=>null!==t?(this.isLoading=!0,this._serviceTypesService.getServiceTypes(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value)):(0,L.of)()),(0,E.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}deleteServiceType(t){this._fuseConfirmationService.open({title:"Cuidado",message:`\xbfEst\xe1 seguro que desea eliminar el tipo de servicio: ${t.name}?`,icon:{show:!0,name:"mat_solid:question_mark",color:"warning"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{"confirmed"===o&&this._serviceTypesService.removeServiceType(t.id).pipe((0,m.R)(this._unsubscribeAll)).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.removeServiceType.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck()})})}updateServiceTypeStatus(t,i,o){this.isLoading=!0,this.selectedSlide=o,this._serviceTypesService.updateServiceTypeStatus({id:i.id,active:t.checked}).subscribe(({data:r})=>{this._snackBar.openFromComponent(f.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:r.updatePaymentMethodStatus.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}trackByFn(t,i){return i.id||t}openDialog(t,i){this._dialog.open($i,{data:{serviceType:t,dialogMode:i},panelClass:"ath-dialog-panel"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(fe.k),e.Y36(e.sBO),e.Y36(g.uw),e.Y36(Z.R),e.Y36(S.ux),e.Y36(Y.yh))},n.\u0275cmp=e.Xpm({type:n,selectors:[["lists-service-types"]],viewQuery:function(t,i){if(1&t&&(e.Gf(b.NW,5),e.Gf(_.YE,5)),2&t){let o;e.iGM(o=e.CRH())&&(i._paginator=o.first),e.iGM(o=e.CRH())&&(i._sort=o.first)}},decls:29,vars:6,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noFuels",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","overflow-x-auto","font-semibold","shadow","lists-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block"],[3,"mat-sort-header"],[1,"text-center"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","lists-grid","md:px-8","overflow-auto"],[1,"truncate"],[1,"flex","flex-col","items-center","justify-center","gap-1","md:flex-row"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Ajustes"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Tipo de servicio"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Tipo de servicio "),e.qZA()()(),e.TgZ(18,"div",10)(19,"button",11),e.NdJ("click",function(){return i.openDialog(i.serviceType,"add")}),e._UZ(20,"mat-icon",12),e.TgZ(21,"span",13),e._uU(22,"Agregar"),e.qZA()()()(),e.TgZ(23,"div",14)(24,"div",15),e.YNc(25,to,2,2,"ng-container",16),e.ALo(26,"async"),e.YNc(27,no,2,0,"ng-template",null,17,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(26,4,i.serviceTypes$)))},dependencies:[y.yS,p.mk,p.sg,p.O5,v.lW,q.Hw,b.NW,O.Ou,B.Rr,_.YE,_.nU,p.Ov],encapsulation:2}),n})();var oo=l(90810),so=l(23077),ro=l(25158),ao=l(31278),co=l(4024),lo=l(67235),mo=l(98118),po=l(90088),go=l(1520),_o=l(293);const uo=[{path:"",component:N,children:[{path:"brands",component:hi,resolve:{brands:co.J}},{path:"categories",component:Wn,resolve:{categories:lo.e}},{path:"fuels",component:Ut,resolve:{fuels:po.I}},{path:"multipliers",component:on,resolve:{multipliers:go.K}},{path:"currencies",component:ke,resolve:{currencies:oo.Y}},{path:"operations-types",component:Ui,resolve:{operationTypes:ao.Z}},{path:"service-types",component:io,resolve:{serviceTypes:_o.P}},{path:"payment-methods",component:We,resolve:{paymentMethods:so.p}},{path:"uoms",component:ht.B,resolve:{uoms:mo.d}},{path:"vouchers",component:ft,resolve:{vouchers:ro.p}}]}];let fo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[J.QG,y.Bz.forChild(uo),Q.m,D.fi]}),n})()}}]);