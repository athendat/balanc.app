"use strict";(self.webpackChunkatherp=self.webpackChunkatherp||[]).push([[629],{86428:(L,k,i)=>{i.d(k,{B:()=>e});const e=(0,i(85094).P1)(E=>E.pagination,E=>E.pagination)},23077:(L,k,i)=>{i.d(k,{p:()=>e});var x=i(5e3),A=i(7903);let e=(()=>{class v{constructor(y){this._paymentMethodsService=y}resolve(y,T){return this._paymentMethodsService.getPaymentMethods()}}return v.\u0275fac=function(y){return new(y||v)(x.LFG(A.o))},v.\u0275prov=x.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"}),v})()},96008:(L,k,i)=>{i.d(k,{VS:()=>E});var x=i(85094);const A=v=>v.paymentMethods,E=((0,x.P1)(A,v=>v.paymentMethod),(0,x.P1)(A,v=>v.paymentMethods))},7903:(L,k,i)=>{i.d(k,{o:()=>$});var x=i(95698),A=i(63900),e=i(18505),E=i(54004),v=i(45840),c=i(75714),y=i(55936),T=i(96008),q=i(59784),Z=i(33921);const Y=Z.Ps`
    query FindAllPaymentMethods($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllPaymentMethods(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            paymentMethods {
                id
                active
                name
                useGateway
            }
        }
    }
`,_=Z.Ps`
    query FindPaymentMethodById($findPaymentMethodById: String!) {
        findPaymentMethodById(id: $findPaymentMethodById) {
            ok
            message

            paymentMethod {
                id
                active
                name
                useGateway
            }
        }
    }
`,O=Z.Ps`
    query FindAllActivePaymentMethods {
        findAllActivePaymentMethods {
            id
            active
            name
            useGateway
        }
    }
`,S=Z.Ps`
    mutation CreatePaymentMethod($createPaymentMethodInput: CreatePaymentMethodInput!) {
        createPaymentMethod(createPaymentMethodInput: $createPaymentMethodInput) {
            ok
            message

            paymentMethod {
                id
                active
                name
                useGateway
            }
        }
    }
`,N=Z.Ps`
    mutation UpdatePaymentMethod($updatePaymentMethodInput: UpdatePaymentMethodInput!) {
        updatePaymentMethod(updatePaymentMethodInput: $updatePaymentMethodInput) {
            ok
            message

            paymentMethod {
                id
                active
                name
                useGateway
            }
        }
    }
`,z=Z.Ps`
    mutation RemovePaymentMethod($removePaymentMethodId: String!) {
        removePaymentMethod(id: $removePaymentMethodId) {
            ok
            message
        }
    }
`,M=Z.Ps`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updatePaymentMethodStatus(updateEntityStatusInput: $updateEntityStatusInput) {
            ok
            message
        }
    }
`;var J=i(5e3),K=i(57261),Q=i(85094);let $=(()=>{class I{constructor(u,g,d){this.apolloProvider=u,this._snackBar=g,this.store=d,this._apollo=this.apolloProvider.use("BALANC")}createPaymentMethod(u){return this.store.select(T.VS).pipe((0,x.q)(1),(0,A.w)(g=>this._apollo.mutate({mutation:S,variables:{createPaymentMethodInput:u},errorPolicy:"all"}).pipe((0,e.b)(({errors:d,data:h})=>{if(d){let f="";d.forEach(P=>f+=`\n ${P.message}.`),this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:f,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const b=(0,v.Z)(g);b.push(h.createPaymentMethod.paymentMethod),this.store.dispatch((0,y.DA)({paymentMethods:b}))}))))}getPaymentMethods(u=1,g=10,d="name",h="asc",b=""){return this._apollo.query({query:Y,errorPolicy:"all",variables:{offset:g*(u-1),limit:g,sort:d,order:h,search:b}}).pipe((0,e.b)(({errors:f,data:P})=>{if(f){let D="";f.forEach(W=>D+=`\n ${W.message}.`),this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:D,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,y.DA)({paymentMethods:P.findAllPaymentMethods.paymentMethods})),this.store.dispatch((0,c.Jr)({pagination:P.findAllPaymentMethods.pagination}))}))}findAllActivePaymentMethods(){return this._apollo.query({query:O,errorPolicy:"all"}).pipe((0,E.U)(({data:u})=>u?u.findAllActivePaymentMethods:null),(0,e.b)(u=>{u&&this.store.dispatch((0,y.DA)({paymentMethods:u}))}))}getPaymentMethodById(u){return this._apollo.query({query:_,variables:{findPaymentMethodByIdId:u},errorPolicy:"all"}).pipe((0,e.b)(({errors:g,data:d})=>{if(g){let h="";g.forEach(b=>h+=`\n ${b.message}.`),this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:h,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,y.$P)({paymentMethod:d.findPaymentMethodById.paymentMethod}))}))}updatePaymentMethod(u){return this.store.select(T.VS).pipe((0,x.q)(1),(0,A.w)(g=>this._apollo.mutate({mutation:N,variables:{updatePaymentMethodInput:u},errorPolicy:"all"}).pipe((0,e.b)(({errors:d,data:h})=>{if(d){let P="";d.forEach(D=>P+=`\n ${D.message}.`),this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:P,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const b=(0,v.Z)(g);b[g.findIndex(P=>P.id===u.id)]=h.updatePaymentMethod.paymentMethod,this.store.dispatch((0,y.DA)({paymentMethods:b}))}))))}updatePaymentMethodStatus(u){return this.store.select(T.VS).pipe((0,x.q)(1),(0,A.w)(g=>this._apollo.mutate({mutation:M,variables:{updateEntityStatusInput:u},errorPolicy:"all"}).pipe((0,e.b)(({errors:d})=>{if(d){let f="";d.forEach(P=>f+=`\n ${P.message}.`),this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:f,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const h=(0,v.Z)(g);h[g.findIndex(f=>f.id===u.id)].active=u.active,this.store.dispatch((0,y.DA)({paymentMethods:h}))}))))}removePaymentMethod(u){return this.store.select(T.VS).pipe((0,x.q)(1),(0,A.w)(g=>this._apollo.mutate({mutation:z,variables:{removePaymentMethodId:u},errorPolicy:"all"}).pipe((0,e.b)(({errors:d})=>{if(d){let f="";d.forEach(P=>f+=`\n ${P.message}.`),this._snackBar.openFromComponent(q.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:f,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const h=(0,v.Z)(g),b=g.findIndex(f=>f.id===u);h.splice(b,1),this.store.dispatch((0,y.DA)({paymentMethods:h}))}))))}}return I.\u0275fac=function(u){return new(u||I)(J.LFG(Z._M),J.LFG(K.ux),J.LFG(Q.yh))},I.\u0275prov=J.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})()},66629:(L,k,i)=>{i.r(k),i.d(k,{TradeModule:()=>Pt});var x=i(35357),A=i(17460),e=i(5e3),E=i(35265);let v=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["trade-purchases"]],decls:1,vars:0,template:function(t,r){1&t&&e._UZ(0,"ath-content-menu")},dependencies:[E.p],encapsulation:2}),o})();var c=i(93075),y=i(86087),T=i(84847),q=i(39646),Z=i(77579),Y=i(56451),_=i(82722),O=i(78372),S=i(63900),N=i(54004),z=i(86428),M=i(85094);const J=o=>o.purchases,K=(0,M.P1)(J,o=>o.purchase),Q=(0,M.P1)(J,o=>o.purchases);var $=i(71683),I=i(45840),w=i(95698),u=i(18505),g=i(68421),d=i(59784),h=i(33921);const b=h.Ps`
    mutation CreatedPurchase($createPurchaseInput: CreatePurchaseInput!) {
        createdPurchase(createPurchaseInput: $createPurchaseInput) {
            code
            createdAt
            currencyId
            id
            paymentMethodId
            paymentStatus
            products {
                cost
                expiration
                expirationDate
                name
                quantity
                uomId
                upc
            }
            status
            supplierId
            total
            userId
            voucherDate
            voucherNo
            voucherTypeId
        }
    }

`,f=h.Ps`
    mutation UpdatePurchase($updatePurchaseInput: UpdatePurchaseInput!) {
        updatedPurchase(updatePurchaseInput: $updatePurchaseInput) {
            id
            code
            createdAt
            currencyId
            paymentMethod
            paymentStatus
            products
            status
            supplierId
            total
            voucherDate
            voucherNo
            voucherTypeId
        }
    }
`,P=h.Ps`
    mutation RemovePurchase($removePurchaseId: String!) {
        removePurchase(id: $removePurchaseId)
    }
`,D=h.Ps`
    query FindAllPurchases($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllPurchases(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            purchases {
                id
                code
                createdAt
                currencyId
                currency {
                    iso
                }
                paymentMethodId
                paymentMethod {
                    name
                }
                paymentStatus
                status
                supplierId
                supplier {
                    name
                }
                total
                voucherDate
                voucherNo
                voucherTypeId
                voucher {
                    name
                }
            }
        }
    }
`,W=h.Ps`
    query FindPurchaseById($findPurchaseById: String!) {
        purchase(id: $findPurchaseById) {
            id
            code
            createdAt
            currencyId
            paymentMethodId
            paymentStatus
            products
            status
            supplierId
            total
            voucherDate
            voucherNo
            voucherTypeId
        }
    }
`;var ne=i(75714),G=i(57261);let X=(()=>{class o{constructor(t,r,n){this.apolloProvider=t,this._snackBar=r,this.store=n,this._apollo=this.apolloProvider.use("BALANC")}createPurchase(t){return this.store.select(Q).pipe((0,w.q)(1),(0,S.w)(r=>this._apollo.mutate({mutation:b,variables:{createPurchaseInput:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:n,data:a})=>{if(n){let p="";n.forEach(m=>p+=`\n ${m.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const l=(0,I.Z)(r);l.push(a.createdPurchase),this.store.dispatch((0,g.Lb)({purchases:l}))}))))}getPurchases(t=1,r=5,n="no",a="desc",l=""){return this._apollo.query({query:D,errorPolicy:"all",variables:{offset:r*(t-1),limit:r,sort:n,order:a,search:l}}).pipe((0,u.b)(({errors:p,data:m})=>{if(p){let U="";p.forEach(re=>U+=`\n ${re.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:U,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,g.Lb)({purchases:m.findAllPurchases.purchases})),this.store.dispatch((0,ne.Jr)({pagination:m.findAllPurchases.pagination}))}))}getPurchaseById(t){return this._apollo.query({query:W,variables:{findPurchaseByIdId:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:r,data:n})=>{if(r){let a="";r.forEach(l=>a+=`\n ${l.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:a,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,g.tN)({purchase:n.purchase}))}))}updatePurchase(t){return this.store.select(Q).pipe((0,w.q)(1),(0,S.w)(r=>this._apollo.mutate({mutation:f,variables:{updatePurchaseInput:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:n,data:a})=>{if(n){let m="";n.forEach(U=>m+=`\n ${U.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:m,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const l=(0,I.Z)(r);l[r.findIndex(m=>m.id===t.id)]=a.updatedPurchase,this.store.dispatch((0,g.Lb)({purchases:l}))}))))}removePurchase(t){return this.store.select(Q).pipe((0,w.q)(1),(0,S.w)(r=>this._apollo.mutate({mutation:P,variables:{removePurchaseId:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:n})=>{if(n){let p="";n.forEach(m=>p+=`\n ${m.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const a=(0,I.Z)(r),l=r.findIndex(p=>p.id===t);a.splice(l,1),this.store.dispatch((0,g.Lb)({purchases:a}))}))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h._M),e.LFG(G.ux),e.LFG(M.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=i(69808),j=i(47423),ee=i(25245),F=i(67322),H=i(98833);function pe(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",28)(2,"div",24),e._uU(3),e.qZA(),e.TgZ(4,"div",24),e._uU(5),e.qZA(),e.TgZ(6,"div",24),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"div",29),e._uU(10),e.qZA(),e.TgZ(11,"div",24),e._uU(12),e.qZA(),e.TgZ(13,"div",24),e._uU(14),e.ALo(15,"currency"),e.qZA(),e.TgZ(16,"div",30),e._uU(17),e.qZA(),e.TgZ(18,"div",31)(19,"button",32),e._UZ(20,"mat-icon",33),e.qZA()()(),e.BQk()),2&o){const t=s.$implicit;e.xp6(3),e.hij(" ",t.voucher.name," "),e.xp6(2),e.hij(" ",t.voucherNo," "),e.xp6(2),e.hij(" ",e.xi3(8,8,t.voucherDate,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",t.supplier.name," "),e.xp6(2),e.hij(" ",t.paymentMethod.name," "),e.xp6(2),e.hij(" ",e.gM2(15,11,t.total,"$ ","symbol","1.2-2")," "),e.xp6(3),e.hij(" ",t.status," "),e.xp6(3),e.Q6J("svgIcon","mat_solid:delete")}}function ue(o,s){if(1&o&&(e.ynx(0),e.YNc(1,pe,21,16,"ng-container",27),e.BQk()),2&o){const t=s.ngIf,r=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",r.trackByFn)}}const de=function(o){return{"pointer-events-none":o}},me=function(){return[5,10,25,100]};function he(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23)(3,"div",24),e._uU(4," Comprobante "),e.qZA(),e.TgZ(5,"div",24),e._uU(6," No.Comprobante "),e.qZA(),e.TgZ(7,"div",24),e._uU(8," F.Comprobante "),e.qZA(),e.TgZ(9,"div",25),e._uU(10," Proveedor "),e.qZA(),e.TgZ(11,"div",24),e._uU(12," Tipo de Pago "),e.qZA(),e.TgZ(13,"div",24),e._uU(14," Importe "),e.qZA(),e.TgZ(15,"div",24),e._uU(16," Estado "),e.qZA(),e.TgZ(17,"div",24),e._uU(18," Acciones "),e.qZA()(),e.YNc(19,ue,2,2,"ng-container",19),e.ALo(20,"async"),e.qZA(),e._UZ(21,"mat-paginator",26),e.BQk()),2&o){const t=e.oxw(2);e.xp6(19),e.Q6J("ngIf",e.lcZ(20,7,t.purchases$)),e.xp6(2),e.Q6J("ngClass",e.VKq(9,de,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(11,me))("showFirstLastButtons",!0)}}function ge(o,s){if(1&o&&(e.ynx(0),e.YNc(1,he,22,12,"ng-container",21),e.BQk()),2&o){const t=s.ngIf;e.oxw();const r=e.MAs(31);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",r)}}function fe(o,s){1&o&&(e.TgZ(0,"div",34),e._uU(1," \xa1No se ha registrado ninguna compra! "),e.qZA())}let _e=(()=>{class o{constructor(t,r,n,a){this._changeDetectorRef=t,this._fuseConfirmationService=r,this._purchasesService=n,this.store=a,this.isLoading=!1,this.purchases$=(0,q.of)([]),this.searchInputControl=new c.NI,this._unsubscribeAll=new Z.x}ngOnInit(){this.store.select(z.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.purchases$=this.store.select(Q),this.searchInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,O.b)(300),(0,S.w)(t=>(this.isLoading=!0,this._purchasesService.getPurchases(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,N.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"no",start:"desc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,Y.T)(this._sort.sortChange,this._paginator.page).pipe((0,S.w)(()=>(this.isLoading=!0,this._purchasesService.getPurchases(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,N.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}cancelPurchase(t){this._fuseConfirmationService.open({title:"Cancelar compra",message:"\xbfEsta seguro que desea cancelar la compra?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}})}trackByFn(t,r){return r.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36($.R),e.Y36(X),e.Y36(M.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["purchases-list"]],viewQuery:function(t,r){if(1&t&&(e.Gf(y.NW,5),e.Gf(T.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(r._paginator=n.first),e.iGM(n=e.CRH())&&(r._sort=n.first)}},decls:32,vars:10,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","mt-6","shrink-0","sm:mt-0","sm:ml-4","gap-2"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","","routerLink","/trade/purchases/form",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noPurchases",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","purchase-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","sm:block","text-center"],[1,"hidden","sm:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","purchase-grid","md:px-8"],[1,"hidden","sm:block","truncate"],[1,"hidden","sm:block","text-center","uppercase"],[1,"flex","flex-row","flex-wrap","justify-center","gap-3"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7"],[1,"icon-size-5",3,"svgIcon"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Comercial"),e.qZA()(),e.TgZ(11,"div",5),e._UZ(12,"mat-icon",6),e.TgZ(13,"a",7),e._uU(14,"Compras"),e.qZA()()(),e.TgZ(15,"div",8)(16,"h2",9),e._uU(17," Compras "),e.qZA()()(),e.TgZ(18,"div",10)(19,"mat-form-field",11),e._UZ(20,"mat-icon",12)(21,"input",13),e.qZA(),e.TgZ(22,"button",14),e._UZ(23,"mat-icon",15),e.TgZ(24,"span",16),e._uU(25,"Agregar"),e.qZA()()()(),e.TgZ(26,"div",17)(27,"div",18),e.YNc(28,ge,2,2,"ng-container",19),e.ALo(29,"async"),e.YNc(30,fe,2,0,"ng-template",null,20,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(4),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:search"),e.xp6(1),e.Q6J("formControl",r.searchInputControl)("autocomplete","off")("placeholder","Buscar compras"),e.xp6(2),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(29,8,r.purchases$)))},dependencies:[x.rH,x.yS,C.mk,C.sg,C.O5,c.Fj,c.JJ,c.oH,j.lW,ee.Hw,F.KE,F.qo,H.Nt,y.NW,T.YE,C.Ov,C.H9,C.uU],encapsulation:2,changeDetection:0}),o})(),ve=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-purchase-details"]],decls:2,vars:0,template:function(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1,"purchase-details works!"),e.qZA())},encapsulation:2}),o})();var ie=i(68675),se=i(17489),ye=i(99987),xe=i(96008),Pe=i(17264);const ae=o=>o.suppliers,R=((0,M.P1)(ae,o=>o.supplier),(0,M.P1)(ae,o=>o.suppliers));var be=i(66592);class Ce{}class Ie{constructor(s,t,r,n,a,l,p){this.name=s,this.uomId=t,this.expiration=r,this.expirationDate=l,this.upc=p,this.cost=n,this.quantity=a}}var ce=i(91079),Ae=i(90508),te=i(86856),Ze=i(74107);const Se=["purchaseNgForm"];function Te(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",35),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.addProductToPurchase(a))}),e._uU(1),e.qZA()}if(2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function Fe(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",41)(2,"div"),e._uU(3),e.qZA(),e.TgZ(4,"div",42),e._uU(5),e.qZA(),e.TgZ(6,"div",39),e._uU(7," U "),e.qZA(),e.TgZ(8,"div",39)(9,"div",43)(10,"button",44),e.NdJ("click",function(){const n=e.CHM(t),a=n.index,l=n.$implicit,p=e.oxw(2);return e.KtG(p.decrementProductQty(a,l))}),e._UZ(11,"mat-icon",45),e.qZA(),e.TgZ(12,"mat-form-field",46)(13,"input",47),e.NdJ("ngModelChange",function(n){const l=e.CHM(t).$implicit;return e.KtG(l.quantity=n)}),e.qZA()(),e.TgZ(14,"button",44),e.NdJ("click",function(){const n=e.CHM(t),a=n.index,l=n.$implicit,p=e.oxw(2);return e.KtG(p.incrementProductQty(a,l))}),e._UZ(15,"mat-icon",45),e.qZA()()(),e.TgZ(16,"div",48),e._uU(17),e.ALo(18,"number"),e.qZA(),e.TgZ(19,"div",48),e._uU(20),e.ALo(21,"number"),e.qZA(),e.TgZ(22,"div",49)(23,"button",50),e.NdJ("click",function(){const a=e.CHM(t).index,l=e.oxw(2);return e.KtG(l.removeProductToPurchase(a))}),e._UZ(24,"mat-icon",45),e.qZA()()(),e.BQk()}if(2&o){const t=s.$implicit,r=s.index;e.xp6(3),e.hij(" ",r+1," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(6),e.Q6J("svgIcon","mat_solid:remove"),e.xp6(2),e.Q6J("ngModel",t.quantity),e.xp6(2),e.Q6J("svgIcon","mat_solid:add"),e.xp6(2),e.hij(" ",e.xi3(18,8,t.cost,"1.2-2")," "),e.xp6(3),e.hij(" ",e.xi3(21,11,t.quantity*t.cost,"1.2-2")," "),e.xp6(4),e.Q6J("svgIcon","mat_solid:close")}}function Me(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",36)(2,"div",37),e._UZ(3,"div"),e.TgZ(4,"div",38),e._uU(5," Producto "),e.qZA(),e.TgZ(6,"div",39),e._uU(7," Presentaci\xf3n "),e.qZA(),e.TgZ(8,"div",39),e._uU(9," Cantidad "),e.qZA(),e.TgZ(10,"div",39),e._uU(11," Costo "),e.qZA(),e.TgZ(12,"div",39),e._uU(13," Total "),e.qZA(),e.TgZ(14,"div",39),e._uU(15," Quitar "),e.qZA()(),e.YNc(16,Fe,25,14,"ng-container",40),e.qZA(),e.BQk()),2&o){const t=e.oxw();e.xp6(16),e.Q6J("ngForOf",t.purchaseProducts)("ngForTrackBy",t.trackByFn)}}function Ue(o,s){1&o&&(e.TgZ(0,"div",51),e._uU(1," \xa1No ha seleccionado ning\xfan producto a\xfan! "),e.qZA())}function ke(o,s){if(1&o&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.iso," ")}}function Ee(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"mat-option",35),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw();return e.KtG(l.selectSupplier(a))}),e._uU(1),e.qZA()}if(2&o){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t.name," ")}}function qe(o,s){if(1&o&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function we(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El tipo de comprobante es obligatorio "),e.qZA())}function Ne(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," La fecha del comprobante es obligatoria "),e.qZA())}function Je(o,s){if(1&o&&(e.TgZ(0,"mat-option",52),e._uU(1),e.qZA()),2&o){const t=s.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function De(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El tipo de comprobante es obligatorio "),e.qZA())}function Qe(o,s){1&o&&(e.TgZ(0,"mat-error"),e._uU(1," El n\xfamero del comprobante es obligatorio "),e.qZA())}let $e=(()=>{class o{constructor(t,r,n,a,l,p){this._changeDetectorRef=t,this._formBuilder=r,this._fuseConfirmationService=n,this._purchasesService=a,this._router=l,this.store=p,this.currencies=[],this.maxDate=new Date,this.paymentMethods=[],this.products=[],this.purchase=new Ce,this.purchaseProducts=[],this.searchProductControl=new c.NI(""),this.searchSupplierControl=new c.NI(""),this.suppliers=[],this.supplierSelected="",this.total=0,this.vouchers=[],this._unsubscribeAll=new Z.x}ngOnInit(){this.purchaseForm=this._formBuilder.group({id:new c.NI,currencyId:new c.NI(null,[c.kI.required]),supplierId:new c.NI(this.supplierSelected,[c.kI.required]),voucherTypeId:new c.NI(null,[c.kI.required]),voucherNo:new c.NI(null,[c.kI.required]),voucherDate:new c.NI(null,[c.kI.required]),paymentMethodId:new c.NI(null,[c.kI.required]),products:new c.Oe([])}),this.store.select(K).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.purchase=t,null!==t&&this.purchaseForm.patchValue(t),this._changeDetectorRef.markForCheck()}),this.store.select(ye.zd).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.currencies=t,this._changeDetectorRef.markForCheck()}),this.store.select(R).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.suppliers=t,this._changeDetectorRef.markForCheck()}),this.store.select(Pe.nR).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.products=t,this._changeDetectorRef.markForCheck()}),this.store.select(xe.VS).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.paymentMethods=t,this._changeDetectorRef.markForCheck()}),this.store.select(be.a).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.vouchers=t,this._changeDetectorRef.markForCheck()}),this.productsFiltered=this.searchProductControl.valueChanges.pipe((0,ie.O)(""),(0,N.U)(t=>{const r="string"==typeof t?t:null==t?void 0:t.name;return r?this._filterProducts(r):this.products.slice()})),this.suppliersFiltered=this.searchSupplierControl.valueChanges.pipe((0,ie.O)(""),(0,N.U)(t=>{const r="string"==typeof t?t:null==t?void 0:t.name;return r?this._filterSuppliers(r):this.suppliers.slice()}))}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}displayFn(t){return t&&t.name?t.name:""}selectSupplier(t){this.purchaseForm.get("supplierId").setValue(t.id)}addProductToPurchase(t){if(this.purchaseProducts.findIndex(a=>a.productId===t.id)>-1)return void this.searchProductControl.reset();const n=this._mapProductToPurchase(t);this.purchaseProducts.push(n),this.searchProductControl.reset(),this._calculatePurchaseTotal()}incrementProductQty(t,r){const n=r;n.quantity++,this.purchaseProducts[t]=n,this._calculatePurchaseTotal()}decrementProductQty(t,r){const n=r;n.quantity--,this.purchaseProducts[t]=n,this._calculatePurchaseTotal()}removeProductToPurchase(t){this.purchaseProducts.splice(t,1),this._calculatePurchaseTotal()}createPurchase(){let t=this.purchaseForm.getRawValue();t=(0,se.omit)(t,["id"]),t.products=this.purchaseProducts,t.total=this.total,this._fuseConfirmationService.open({title:"Registrar compra",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._purchasesService.createPurchase(t).pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._fuseConfirmationService.open({title:"Confirmaci\xf3n",message:"Compra registrada correctamente",icon:{show:!0,name:"mat_solid:done",color:"success"},actions:{confirm:{show:!0,label:"Ok",color:"primary"},cancel:{show:!1}},dismissible:!1}),this._changeDetectorRef.markForCheck(),this._router.navigateByUrl("/trade/purchases/list")})})}_mapProductToPurchase(t){const{name:r,upc:n,uomId:a,cost:l,expiration:p=!0,expirationDate:m}=t;return new Ie(r,a,p,l,1,m,n)}_filterProducts(t){const r=t.toLowerCase();return this.products.filter(n=>n.name.toLowerCase().includes(r))}_filterSuppliers(t){const r=t.toLowerCase();return this.suppliers.filter(n=>n.name.toLowerCase().includes(r))}_calculatePurchaseTotal(){this.total=Number(this.purchaseProducts.reduce((t,r)=>r.cost*r.quantity+t,0).toFixed(2))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(c.qu),e.Y36($.R),e.Y36(X),e.Y36(x.F0),e.Y36(M.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["purchase-form"]],viewQuery:function(t,r){if(1&t&&e.Gf(Se,5),2&t){let n;e.iGM(n=e.CRH())&&(r.purchaseNgForm=n.first)}},decls:68,vars:48,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"flex","flex-col","items-center","p-6"],[1,"flex","flex-col","w-full"],[1,"text-4xl","font-extrabold","leading-tight","tracking-tight"],[1,"grid","grid-flow-row","grid-cols-1","mt-8","sm:grid-cols-6","gap-y-12","sm:gap-x-4","sm:mt-12"],[1,"col-span-4","p-6","shadow","rounded-2xl","bg-card"],[1,"w-full"],["appearance","fill",1,"w-full","fuse-mat-dense"],["matPrefix","",3,"svgIcon"],["type","text","matInput","",3,"formControl","matAutocomplete","placeholder"],[3,"displayWith"],["productsAutocomplete","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-auto","mt-2","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf","ngIfElse"],["noPurchaseProducts",""],[1,"col-span-2","shadow","rounded-2xl","bg-card"],[1,"flex","items-center","justify-center","w-full","gap-2","p-6","mb-2","font-mono","text-3xl","font-semibold","leading-7","text-white","rounded-t-2xl","bg-jungle-500"],[3,"formGroup"],[3,"formControlName","required","placeholder"],[3,"value",4,"ngFor","ngForOf"],[1,"p-6","space-y-3",3,"formGroup"],["purchaseNgForm","ngForm"],["type","text","matInput","",3,"matAutocomplete","placeholder","required"],["supplierAutocomplete","matAutocomplete"],[1,"flex","flex-col","gap-2","md:flex-row"],[1,"w-full","fuse-mat-dense"],[3,"formControlName","required"],[4,"ngIf"],["matInput","",3,"matDatepicker","formControlName","max","required"],["matIconSuffix","",3,"for"],["voucherDate",""],["matInput","","maxlength","50",3,"type","formControlName","required"],[1,"flex","items-center","justify-end"],["mat-flat-button","",1,"w-full",3,"color","disabled","click"],[3,"value","click"],[1,"grid"],[1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","purchase-products-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-primary","dark:bg-opacity-5"],[1,"hidden","text-left","sm:block"],[1,"hidden","text-center","sm:block"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","purchase-products-grid","md:px-8"],[1,"hidden","truncate","md:block"],[1,"flex","flex-row","items-center","justify-center","gap-2"],["mat-stroked-button","",1,"p-2","leading-6","min-w-7","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[1,"fuse-mat-dense","fuse-mat-rounded"],["matInput","","type","number","name","quantity",1,"font-mono","font-semibold","text-center",3,"ngModel","ngModelChange"],[1,"hidden","font-mono","text-center","sm:block"],[1,"flex","justify-center"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"],[3,"value"]],template:function(t,r){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._uU(4," Registrar Compra "),e.qZA(),e.TgZ(5,"div",4)(6,"div",5)(7,"form",6)(8,"mat-form-field",7),e._UZ(9,"mat-icon",8)(10,"input",9),e.TgZ(11,"mat-autocomplete",10,11),e.YNc(13,Te,2,2,"mat-option",12),e.ALo(14,"async"),e.qZA()()(),e.TgZ(15,"div",13),e.YNc(16,Me,17,2,"ng-container",14),e.YNc(17,Ue,2,0,"ng-template",null,15,e.W1O),e.qZA()(),e.TgZ(19,"div",16)(20,"div",17),e._uU(21),e.ALo(22,"number"),e.TgZ(23,"form",18)(24,"mat-form-field",7)(25,"mat-select",19),e.YNc(26,ke,2,2,"mat-option",20),e.qZA()()()(),e.TgZ(27,"form",21,22)(29,"mat-form-field",7),e._UZ(30,"mat-icon",8)(31,"input",23),e.TgZ(32,"mat-autocomplete",10,24),e.YNc(34,Ee,2,2,"mat-option",12),e.ALo(35,"async"),e.qZA()(),e.TgZ(36,"div",25)(37,"mat-form-field",26)(38,"mat-label"),e._uU(39,"Tipo de comprobante"),e.qZA(),e.TgZ(40,"mat-select",27),e.YNc(41,qe,2,2,"mat-option",20),e.qZA(),e.YNc(42,we,2,0,"mat-error",28),e.qZA(),e.TgZ(43,"mat-form-field",26)(44,"mat-label"),e._uU(45,"Fecha del comprobante"),e.qZA(),e._UZ(46,"input",29),e.TgZ(47,"mat-hint"),e._uU(48,"DD/MM/YYYY"),e.qZA(),e._UZ(49,"mat-datepicker-toggle",30)(50,"mat-datepicker",null,31),e.YNc(52,Ne,2,0,"mat-error",28),e.qZA()(),e.TgZ(53,"div",25)(54,"mat-form-field",26)(55,"mat-label"),e._uU(56,"M\xe9todo de pago"),e.qZA(),e.TgZ(57,"mat-select",27),e.YNc(58,Je,2,2,"mat-option",20),e.qZA(),e.YNc(59,De,2,0,"mat-error",28),e.qZA(),e.TgZ(60,"mat-form-field",26)(61,"mat-label"),e._uU(62,"N\xfamero del comprobante"),e.qZA(),e._UZ(63,"input",32),e.YNc(64,Qe,2,0,"mat-error",28),e.qZA()(),e.TgZ(65,"div",33)(66,"button",34),e.NdJ("click",function(){return r.createPurchase()}),e._uU(67," Registrar "),e.qZA()()()()()()()()),2&t){const n=e.MAs(12),a=e.MAs(18),l=e.MAs(33),p=e.MAs(51);e.xp6(9),e.Q6J("svgIcon","mat_solid:search"),e.xp6(1),e.Q6J("formControl",r.searchProductControl)("matAutocomplete",n)("placeholder","Buscar productos"),e.xp6(1),e.Q6J("displayWith",r.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(14,41,r.productsFiltered)),e.xp6(3),e.Q6J("ngIf",r.purchaseProducts.length>0)("ngIfElse",a),e.xp6(5),e.hij(" ",e.xi3(22,43,r.total,"1.2-2")," "),e.xp6(2),e.Q6J("formGroup",r.purchaseForm),e.xp6(2),e.Q6J("formControlName","currencyId")("required",!0)("placeholder","Moneda"),e.xp6(1),e.Q6J("ngForOf",r.currencies),e.xp6(1),e.Q6J("formGroup",r.purchaseForm),e.xp6(3),e.Q6J("svgIcon","mat_solid:search"),e.xp6(1),e.Q6J("matAutocomplete",l)("placeholder","Buscar proveedor")("required",!0),e.xp6(1),e.Q6J("displayWith",r.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(35,46,r.suppliersFiltered)),e.xp6(6),e.Q6J("formControlName","voucherTypeId")("required",!0),e.xp6(1),e.Q6J("ngForOf",r.vouchers),e.xp6(1),e.Q6J("ngIf",r.purchaseForm.get("voucherTypeId").hasError("required")),e.xp6(4),e.Q6J("matDatepicker",p)("formControlName","voucherDate")("max",r.maxDate)("required",!0),e.xp6(3),e.Q6J("for",p),e.xp6(3),e.Q6J("ngIf",r.purchaseForm.get("voucherDate").hasError("required")),e.xp6(5),e.Q6J("formControlName","paymentMethodId")("required",!0),e.xp6(1),e.Q6J("ngForOf",r.paymentMethods),e.xp6(1),e.Q6J("ngIf",r.purchaseForm.get("paymentMethodId").hasError("required")),e.xp6(4),e.Q6J("type","text")("formControlName","voucherNo")("required",!0),e.xp6(1),e.Q6J("ngIf",r.purchaseForm.get("voucherNo").hasError("required")),e.xp6(2),e.Q6J("color","primary")("disabled",r.purchaseForm.pristine||r.purchaseForm.invalid||0===r.purchaseProducts.length)}},dependencies:[C.sg,C.O5,c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.nD,c.On,c.F,c.oH,c.sg,c.u,ce.XC,ce.ZL,Ae.ey,j.lW,te.Mq,te.hl,te.nW,ee.Hw,F.TO,F.KE,F.bx,F.hX,F.qo,H.Nt,Ze.gD,C.Ov,C.JJ],encapsulation:2,changeDetection:0}),o})();var Re=i(63844);class Be{}var V=i(48966),B=i(89186);const Le=h.Ps`
    mutation CreateSupplier($createSupplierInput: CreateSupplierInput!) {
        createSupplier(createSupplierInput: $createSupplierInput) {
            ok
            message

            supplier {
                id
                active
                code
                email
                name
                nit
                phone
            }
        }
    }
`,Ye=h.Ps`
    mutation UpdateSupplier($updateSupplierInput: UpdateSupplierInput!) {
        updateSupplier(updateSupplierInput: $updateSupplierInput) {

            ok
            message

            supplier {
                id
                active
                code
                email
                name
                nit
                phone
            }
        }
    }
`,Oe=h.Ps`
    mutation Mutation($updateEntityStatusInput: UpdateEntityStatusInput!) {
        updateSupplierStatus(updateEntityStatusInput: $updateEntityStatusInput)
    }
`,ze=h.Ps`
    mutation RemoveSupplier($removeSupplierId: String!) {
        removeSupplier(id: $removeSupplierId)
    }
`,Ge=h.Ps`
    query FindAllSuppliers($offset: Int, $limit: Int, $sort: String, $order: Order, $search: String) {
        findAllSuppliers(offset: $offset, limit: $limit, sort: $sort, order: $order, search: $search) {
            ok
            message

            pagination {
                length
                size
                page
            }

            suppliers {
                id
                active
                code
                email
                name
                nit
                phone
            }
        }
    }
`,je=h.Ps`
    query FindSupplierById($findSupplierById: String!) {
        supplier(id: $findSupplierById) {
            id
            active
            code
            email
            name
            nit
            phone
        }
    }
`;let oe=(()=>{class o{constructor(t,r,n){this.apolloProvider=t,this._snackBar=r,this.store=n,this._apollo=this.apolloProvider.use("BALANC")}createSupplier(t){return this.store.select(R).pipe((0,w.q)(1),(0,S.w)(r=>this._apollo.mutate({mutation:Le,variables:{createSupplierInput:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:n,data:a})=>{if(n){let p="";n.forEach(m=>p+=`\n ${m.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const l=(0,I.Z)(r);l.push(a.createSupplier.supplier),this.store.dispatch((0,B.bz)({suppliers:l}))}))))}getSuppliers(t=1,r=20,n="code",a="asc",l=""){return this._apollo.query({query:Ge,errorPolicy:"all",variables:{offset:r*(t-1),limit:r,sort:n,order:a,search:l}}).pipe((0,u.b)(({errors:p,data:m})=>{if(p){let U="";p.forEach(re=>U+=`\n ${re.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:U,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,B.bz)({suppliers:m.findAllSuppliers.suppliers})),this.store.dispatch((0,ne.Jr)({pagination:m.findAllSuppliers.pagination}))}))}getSupplierById(t){return this._apollo.query({query:je,variables:{findSupplierByIdId:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:r,data:n})=>{if(r){let a="";r.forEach(l=>a+=`\n ${l.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:a,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}this.store.dispatch((0,B.n2)({supplier:n.supplier}))}))}updateSupplier(t){return this.store.select(R).pipe((0,w.q)(1),(0,S.w)(r=>this._apollo.mutate({mutation:Ye,variables:{updateSupplierInput:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:n,data:a})=>{if(n){let m="";n.forEach(U=>m+=`\n ${U.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:m,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const l=(0,I.Z)(r);l[r.findIndex(m=>m.id===t.id)]=a.updateSupplier.supplier,this.store.dispatch((0,B.bz)({suppliers:l}))}))))}updatesSupplierStatus(t){return this.store.select(R).pipe((0,w.q)(1),(0,S.w)(r=>this._apollo.mutate({mutation:Oe,variables:{updateEntityStatusInput:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:n})=>{if(n){let p="";n.forEach(m=>p+=`\n ${m.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:p,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}const a=(0,I.Z)(r);a[r.findIndex(p=>p.id===t.id)].active=t.active,this.store.dispatch((0,B.bz)({suppliers:a}))}))))}removeSupplier(t){return this.store.select(R).pipe((0,w.q)(1),(0,S.w)(r=>this._apollo.mutate({mutation:ze,variables:{removeSupplierId:t},errorPolicy:"all"}).pipe((0,u.b)(({errors:n,data:a})=>{if(n){let l="";n.forEach(p=>l+=`\n ${p.message}.`),this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:1e4,data:{message:l,title:"Error",type:"error",svgIcon:"mat_solid:error"}})}if(a){const l=(0,I.Z)(r),p=r.findIndex(m=>m.id===t);l.splice(p,1),this.store.dispatch((0,B.bz)({suppliers:l}))}}))))}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(h._M),e.LFG(G.ux),e.LFG(M.yh))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function He(o,s){1&o&&(e.TgZ(0,"h2",6),e._uU(1,"Agregar proveedor"),e.qZA())}function Ve(o,s){1&o&&(e.TgZ(0,"h2",6),e._uU(1,"Editar proveedor"),e.qZA())}function Ke(o,s){if(1&o&&(e.TgZ(0,"div",7)(1,"div",8)(2,"form",9)(3,"div",10)(4,"mat-form-field",11)(5,"mat-label"),e._uU(6,"Nombre"),e.qZA(),e._UZ(7,"input",12),e.qZA(),e.TgZ(8,"mat-form-field",11)(9,"mat-label"),e._uU(10,"N\xfamero de identificaci\xf3n tributaria"),e.qZA(),e._UZ(11,"input",12),e.qZA(),e.TgZ(12,"mat-form-field",11)(13,"mat-label"),e._uU(14,"Correo electr\xf3nico"),e.qZA(),e._UZ(15,"input",13),e.qZA(),e.TgZ(16,"mat-form-field",11)(17,"mat-label"),e._uU(18,"Tel\xe9fono"),e.qZA(),e._UZ(19,"input",14),e.TgZ(20,"mat-hint"),e._uU(21,"Debe incluir +53 al inicio del tel\xe9fono"),e.qZA()()()()()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("formGroup",t.supplierForm)("autocomplete","off"),e.xp6(5),e.Q6J("formControlName","name"),e.xp6(4),e.Q6J("formControlName","nit"),e.xp6(4),e.Q6J("formControlName","email"),e.xp6(4),e.Q6J("formControlName","phone")}}function We(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.updateSupplier())}),e._uU(1,"Actualizar"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.supplierForm.invalid)("color","primary")}}function Xe(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.createSupplier())}),e._uU(1,"Agregar"),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("disabled",t.supplierForm.invalid)("color","primary")}}function et(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",15)(2,"button",16),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.closeDialog())}),e._uU(3,"Cancelar"),e.qZA(),e.YNc(4,We,2,2,"button",17),e.YNc(5,Xe,2,2,"button",17),e.qZA(),e.BQk()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("color","warn"),e.xp6(2),e.Q6J("ngIf","edit"===t.data.dialogMode),e.xp6(1),e.Q6J("ngIf","add"===t.data.dialogMode)}}let tt=(()=>{class o{constructor(t,r,n,a,l,p,m){this.data=t,this._suppliersService=r,this._changeDetectorRef=n,this._dialogRef=a,this._formBuilder=l,this._fuseConfirmationService=p,this._snackBar=m,this._unsubscribeAll=new Z.x,this.dialogMode=t.dialogMode,this.supplier=this.data.supplier}ngOnInit(){this.supplierForm=this._formBuilder.group({id:new c.NI,name:new c.NI(null,[c.kI.required,c.kI.minLength(3),c.kI.maxLength(150)]),nit:new c.NI(null,[c.kI.required,c.kI.maxLength(20)]),email:new c.NI(null,[c.kI.required,c.kI.email]),phone:new c.NI(null,[c.kI.required,c.kI.maxLength(15),c.kI.pattern("^((\\+53)?\\d{8})?$")])}),null!==this.supplier.name&&this.supplierForm.patchValue(this.supplier)}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}closeDialog(){this._dialogRef.close()}createSupplier(){let t=this.supplierForm.getRawValue();t=(0,se.omit)(t,["id"]),this._fuseConfirmationService.open({title:"Crear categor\xeda",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._suppliersService.createSupplier(t).pipe((0,_.R)(this._unsubscribeAll)).subscribe(({data:a})=>{this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.createSupplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this._changeDetectorRef.markForCheck(),this.closeDialog()})})}updateSupplier(){const t=this.supplierForm.getRawValue();this._fuseConfirmationService.open({title:"Categor\xeda",message:"\xbfEst\xe1 seguro que toda la informaci\xf3n es correcta?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().pipe((0,_.R)(this._unsubscribeAll)).subscribe(n=>{"confirmed"===n&&this._suppliersService.updateSupplier(t).pipe((0,_.R)(this._unsubscribeAll)).subscribe(({data:a})=>{this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateSupplier.message,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.closeDialog(),this._changeDetectorRef.markForCheck()})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(V.WI),e.Y36(oe),e.Y36(e.sBO),e.Y36(V.so),e.Y36(c.qu),e.Y36($.R),e.Y36(G.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["supplier-dialog"]],decls:9,vars:4,consts:[[1,"relative","flex","flex-col","w-full","max-h-screen"],[1,"flex","flex-col","items-center","px-8","pt-4","space-y-1","text-center","sm:items-start","sm:mt-0","sm:pr-8","sm:text-left"],["mat-dialog-title","",4,"ngIf"],[1,"flex","flex-col","items-center","flex-auto","w-full","px-8","pb-6"],["class","w-full overflow-hidden",4,"ngIf"],[4,"ngIf"],["mat-dialog-title",""],[1,"w-full","overflow-hidden"],[1,"flex","border-t"],[1,"flex","flex-col","w-full","pt-8",3,"formGroup","autocomplete"],[1,"flex","flex-col","flex-auto","gap-4"],[1,"w-full","fuse-mat-dense"],["matInput","","type","text",3,"formControlName"],["matInput","","type","email",3,"formControlName"],["matInput","","type","tel",3,"formControlName"],[1,"flex","items-center","justify-between","w-full","px-8","py-4"],["mat-button","",1,"-ml-4",3,"color","click"],["mat-flat-button","",3,"disabled","color","click",4,"ngIf"],["mat-flat-button","",3,"disabled","color","click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0),e.ynx(1),e.TgZ(2,"div",1),e.YNc(3,He,2,0,"h2",2),e.YNc(4,Ve,2,0,"h2",2),e.qZA(),e.BQk(),e.TgZ(5,"div",3),e.ynx(6),e.YNc(7,Ke,22,6,"div",4),e.BQk(),e.qZA(),e.YNc(8,et,6,3,"ng-container",5),e.qZA()),2&t&&(e.xp6(3),e.Q6J("ngIf",!r.data.supplier.id&&"add"===r.dialogMode),e.xp6(1),e.Q6J("ngIf",r.data.supplier.id&&"edit"===r.dialogMode),e.xp6(3),e.Q6J("ngIf","view"!==r.dialogMode),e.xp6(1),e.Q6J("ngIf","view"!==r.data.dialogMode))},dependencies:[C.O5,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,j.lW,V.uh,F.KE,F.bx,F.hX,H.Nt],encapsulation:2}),o})();var ot=i(20773),rt=i(32368);function nt(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"mat-slide-toggle",36),e.NdJ("change",function(n){e.CHM(t);const a=e.oxw(),l=a.$implicit,p=a.index,m=e.oxw(4);return e.KtG(m.updateSupplierStatus(n,l,p))}),e.qZA(),e.BQk()}if(2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("checked",t.active)("color","primary")}}function it(o,s){1&o&&(e.ynx(0),e._UZ(1,"mat-spinner",37),e.BQk()),2&o&&(e.xp6(1),e.Q6J("diameter",20)("color","primary"))}function st(o,s){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",30)(2,"div",31),e._uU(3),e.qZA(),e.TgZ(4,"div",32),e._uU(5),e.qZA(),e.TgZ(6,"div",26),e._uU(7),e.qZA(),e.TgZ(8,"div",26),e._uU(9),e.qZA(),e.TgZ(10,"div",26),e._uU(11),e.qZA(),e.TgZ(12,"div",27),e.YNc(13,nt,2,2,"ng-container",19),e.YNc(14,it,2,2,"ng-container",19),e.qZA(),e.TgZ(15,"div",33)(16,"button",34),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.openDialog(a,"edit"))}),e._UZ(17,"mat-icon",35),e.qZA(),e.TgZ(18,"button",34),e.NdJ("click",function(){const a=e.CHM(t).$implicit,l=e.oxw(4);return e.KtG(l.deleteSupplier(a.id))}),e._UZ(19,"mat-icon",35),e.qZA()()(),e.BQk()}if(2&o){const t=s.$implicit,r=s.index,n=e.oxw(4);e.xp6(3),e.hij(" ",t.code," "),e.xp6(2),e.hij(" ",t.name," "),e.xp6(2),e.hij(" ",t.nit," "),e.xp6(2),e.hij(" ",t.phone," "),e.xp6(2),e.hij(" ",t.email," "),e.xp6(2),e.Q6J("ngIf",!(n.isSlideLoading&&n.selectedSlide===r)),e.xp6(1),e.Q6J("ngIf",n.isSlideLoading&&n.selectedSlide===r),e.xp6(3),e.Q6J("svgIcon","mat_solid:edit"),e.xp6(2),e.Q6J("svgIcon","mat_solid:delete")}}function at(o,s){if(1&o&&(e.ynx(0),e.YNc(1,st,20,9,"ng-container",29),e.BQk()),2&o){const t=s.ngIf,r=e.oxw(3);e.xp6(1),e.Q6J("ngForOf",t)("ngForTrackBy",r.trackByFn)}}const ct=function(o){return{"pointer-events-none":o}},lt=function(){return[5,10,25,100]};function pt(o,s){if(1&o&&(e.ynx(0),e.TgZ(1,"div",22)(2,"div",23)(3,"div",24),e._uU(4," C\xf3digo "),e.qZA(),e.TgZ(5,"div",25),e._uU(6," Nombre "),e.qZA(),e.TgZ(7,"div",26),e._uU(8," NIT "),e.qZA(),e.TgZ(9,"div",27),e._uU(10," Tel\xe9fono "),e.qZA(),e.TgZ(11,"div",27),e._uU(12," Correo "),e.qZA(),e.TgZ(13,"div",27),e._uU(14," Activo "),e.qZA(),e.TgZ(15,"div",26),e._uU(16,"Detalles"),e.qZA()(),e.YNc(17,at,2,2,"ng-container",19),e.ALo(18,"async"),e.qZA(),e._UZ(19,"mat-paginator",28),e.BQk()),2&o){const t=e.oxw(2);e.xp6(3),e.Q6J("mat-sort-header","code"),e.xp6(2),e.Q6J("mat-sort-header","name"),e.xp6(12),e.Q6J("ngIf",e.lcZ(18,9,t.suppliers$)),e.xp6(2),e.Q6J("ngClass",e.VKq(11,ct,t.isLoading))("length",t.pagination.length)("page",t.pagination.page)("pageSize",t.pagination.size)("pageSizeOptions",e.DdM(13,lt))("showFirstLastButtons",!0)}}function ut(o,s){if(1&o&&(e.ynx(0),e.YNc(1,pt,20,14,"ng-container",21),e.BQk()),2&o){const t=s.ngIf;e.oxw();const r=e.MAs(27);e.xp6(1),e.Q6J("ngIf",t.length>0)("ngIfElse",r)}}function dt(o,s){1&o&&(e.TgZ(0,"div",38),e._uU(1," \xa1No se ha creado ning\xfan proveedor! "),e.qZA())}let mt=(()=>{class o{constructor(t,r,n,a,l,p){this._changeDetectorRef=t,this._dialog=r,this._fuseConfirmationService=n,this._snackBar=a,this._suppliersService=l,this.store=p,this.isLoading=!1,this.suppliers$=(0,q.of)([]),this.searchInputControl=new c.NI,this.isSlideLoading=!1,this.selectedSlide=null,this.supplier=new Be,this._unsubscribeAll=new Z.x}ngOnInit(){this.store.select(z.B).pipe((0,_.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()}),this.suppliers$=this.store.select(R),this.searchInputControl.valueChanges.pipe((0,_.R)(this._unsubscribeAll),(0,O.b)(300),(0,S.w)(t=>(this.isLoading=!0,this._suppliersService.getSuppliers(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,t))),(0,N.U)(()=>{this.isLoading=!1})).subscribe()}ngAfterViewInit(){this._sort&&this._paginator&&(this._sort.sort({id:"code",start:"asc",disableClear:!0}),this._changeDetectorRef.markForCheck(),this._sort.sortChange.pipe((0,_.R)(this._unsubscribeAll)).subscribe(()=>{this._paginator.pageIndex=0}),(0,Y.T)(this._sort.sortChange,this._paginator.page).pipe((0,S.w)(()=>(this.isLoading=!0,this._suppliersService.getSuppliers(this._paginator.pageIndex+1,this._paginator.pageSize,this._sort.active,this._sort.direction,this.searchInputControl.value))),(0,N.U)(()=>{this.isLoading=!1})).subscribe())}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}updateSupplierStatus(t,r,n){this.isSlideLoading=!0,this.selectedSlide=n,this._suppliersService.updatesSupplierStatus({id:r.id,active:t.checked}).subscribe(({data:a})=>{this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.updateSupplierStatus,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}}),this.isSlideLoading=!1,this.selectedSlide=null,this._changeDetectorRef.markForCheck()})}deleteSupplier(t){this._fuseConfirmationService.open({title:"Eliminar proveedor",message:"\xbfEsta seguro que desea eliminar el proveedor?",icon:{show:!0,name:"mat_solid:question_mark",color:"info"},actions:{confirm:{label:"Aceptar",color:"primary"}}}).afterClosed().subscribe(n=>{"confirmed"===n&&this._suppliersService.removeSupplier(t).pipe((0,_.R)(this._unsubscribeAll)).subscribe(({data:a})=>{this._snackBar.openFromComponent(d.h,{panelClass:["p-0","bg-transparent"],horizontalPosition:"end",verticalPosition:"bottom",duration:5e3,data:{message:a.removeSupplier,title:"Confirmaci\xf3n",type:"success",svgIcon:"mat_solid:done"}})}),this._changeDetectorRef.markForCheck()})}openDialog(t,r){this._dialog.open(tt,{data:{supplier:t,dialogMode:r},panelClass:"ath-dialog-panel"})}trackByFn(t,r){return r.id||t}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(e.sBO),e.Y36(V.uw),e.Y36($.R),e.Y36(G.ux),e.Y36(oe),e.Y36(M.yh))},o.\u0275cmp=e.Xpm({type:o,selectors:[["suppliers"]],viewQuery:function(t,r){if(1&t&&(e.Gf(y.NW,5),e.Gf(T.YE,5)),2&t){let n;e.iGM(n=e.CRH())&&(r._paginator=n.first),e.iGM(n=e.CRH())&&(r._sort=n.first)}},decls:28,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:absolute","sm:inset-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","px-6","py-8","border-b","sm:flex-row","flex-0","sm:items-center","sm:justify-between","md:px-8"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],["routerLink","/dashboard",1,"whitespace-nowrap","text-primary-500"],[1,"flex","items-center","ml-1","whitespace-nowrap"],[1,"icon-size-5","text-secondary",3,"svgIcon"],[1,"ml-1","text-primary-500"],[1,"mt-2"],[1,"text-3xl","font-extrabold","leading-7","tracking-tight","truncate","md:text-4xl","sm:leading-10"],[1,"flex","items-center","gap-2","mt-6","shrink-0","sm:mt-0","sm:ml-4"],[1,"fuse-mat-dense","fuse-mat-rounded","min-w-64"],["matPrefix","",1,"icon-size-5",3,"svgIcon"],["matInput","",3,"formControl","autocomplete","placeholder"],["mat-raised-button","",1,"text-white","bg-gradient-to-r","from-primary-500","to-primary-700",3,"click"],[3,"svgIcon"],[1,"hidden","ml-2","mr-1","text-white","sm:block"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","overflow-hidden","sm:mb-18","sm:overflow-y-auto"],[4,"ngIf"],["noSuppliers",""],[4,"ngIf","ngIfElse"],[1,"grid"],["matSort","","matSortDisableClear","",1,"sticky","top-0","z-10","grid","gap-4","px-6","py-4","font-semibold","shadow","supplier-grid","md:px-8","text-md","text-secondary","bg-gray-50","dark:bg-slate-900"],[1,"hidden","md:block",3,"mat-sort-header"],[1,"hidden","sm:block",3,"mat-sort-header"],[1,"hidden","text-center","sm:block"],[1,"hidden","text-center","lg:block"],[1,"z-10","border-b","sm:absolute","sm:inset-x-0","sm:bottom-0","sm:border-t","sm:border-b-0","bg-gray-50","dark:bg-transparent",3,"ngClass","length","page","pageSize","pageSizeOptions","showFirstLastButtons"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"grid","items-center","gap-4","px-6","py-3","border-b","supplier-grid","md:px-8"],[1,"hidden","md:block"],[1,"truncate"],[1,"flex","flex-row","flex-wrap","justify-center","gap-3"],["mat-stroked-button","",1,"px-2","leading-6","min-w-10","min-h-7","h-7",3,"click"],[1,"icon-size-5",3,"svgIcon"],[3,"checked","color","change"],[3,"diameter","color"],[1,"p-8","text-4xl","font-semibold","tracking-tight","text-center","border-t","sm:p-16"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div")(5,"a",4),e._uU(6,"Inicio"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"mat-icon",6),e.TgZ(9,"a",7),e._uU(10,"Proveedores"),e.qZA()()(),e.TgZ(11,"div",8)(12,"h2",9),e._uU(13," Proveedores "),e.qZA()()(),e.TgZ(14,"div",10)(15,"mat-form-field",11),e._UZ(16,"mat-icon",12)(17,"input",13),e.qZA(),e.TgZ(18,"button",14),e.NdJ("click",function(){return r.openDialog(r.supplier,"add")}),e._UZ(19,"mat-icon",15),e.TgZ(20,"span",16),e._uU(21,"Agregar"),e.qZA()()()(),e.TgZ(22,"div",17)(23,"div",18),e.YNc(24,ut,2,2,"ng-container",19),e.ALo(25,"async"),e.YNc(26,dt,2,0,"ng-template",null,20,e.W1O),e.qZA()()()),2&t&&(e.xp6(8),e.Q6J("svgIcon","mat_solid:chevron_right"),e.xp6(8),e.Q6J("svgIcon","mat_solid:search"),e.xp6(1),e.Q6J("formControl",r.searchInputControl)("autocomplete","off")("placeholder","Buscar proveedores"),e.xp6(2),e.Q6J("svgIcon","mat_solid:add"),e.xp6(5),e.Q6J("ngIf",e.lcZ(25,7,r.suppliers$)))},dependencies:[x.yS,C.mk,C.sg,C.O5,c.Fj,c.JJ,c.oH,j.lW,ee.Hw,F.KE,F.qo,H.Nt,y.NW,ot.Ou,rt.Rr,T.YE,T.nU,C.Ov],encapsulation:2,data:{animation:Re.L},changeDetection:0}),o})();var ht=i(98440),gt=i(95259);let ft=(()=>{class o{constructor(t){this._purchasesService=t}resolve(t,r){return this._purchasesService.getPurchases()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(X))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),le=(()=>{class o{constructor(t){this._suppliersService=t}resolve(t,r){return this._suppliersService.getSuppliers()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(oe))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _t=i(90810),vt=i(23077),yt=i(25158);const xt=[{path:"suppliers",component:mt,resolve:{suppliers:le}},{path:"purchases",component:v},{path:"purchases/list",component:_e,resolve:{purchases:ft}},{path:"purchases/form",component:$e,resolve:{currencies:_t.Y,merchant:ht.d4,paymentMethods:vt.p,products:gt.SE,suppliers:le,vouchers:yt.p}},{path:"purchases/details",component:ve}];let Pt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[x.Bz.forChild(xt),A.m]}),o})()}}]);